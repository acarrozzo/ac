/* Created: 2022/02/07 18:25:01 GMT+00:00 version: latest */(()=>{var t={7757:(t,e,n)=>{t.exports=n(5666)},5536:(t,e,n)=>{"use strict";n.d(e,{Q6:()=>r,do:()=>i,ge:()=>o,D$:()=>a,k5:()=>s,GJ:()=>c,RQ:()=>l,Wx:()=>u,Th:()=>d,rc:()=>p,fr:()=>m,_w:()=>h});var r="latest",i="abtasty_resetActionTracking",o="targetPages",a="qaParameters",s="audience",c="segment",l="trigger",u="$^",d=16,p=.03,m=5e3,h=1e5},6080:(t,e,n)=>{"use strict";n.d(e,{WA:()=>r.W,hX:()=>b,Pe:()=>f,vM:()=>y,KJ:()=>o,xb:()=>c,kK:()=>a,v_:()=>_,Z$:()=>g,UI:()=>d,ID:()=>I,EQ:()=>u,ET:()=>T.E,D9:()=>A,zG:()=>i,jg:()=>w,vg:()=>S,OH:()=>k,Ut:()=>x,jC:()=>E,d1:()=>p,Vl:()=>l});var r=n(8686);function i(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return e.reduce((function(e,n){return null!=e?n(e):n.apply(void 0,[t].concat(r))}),void 0)}}(0,r.W)((function(t,e){var n,r;return function(){for(var i=this,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];var c=+new Date;n&&c<n+t?(clearTimeout(r),r=setTimeout((function(){n=c,e.apply(i,a)}),t)):(n=c,e.apply(this,a))}})),(0,r.W)((function(t,e){return t.push(e)}));var o=(0,r.W)((function(t,e,n,r){return t(r)?e(r):n(r)}));function a(t){return null==t}var s=n(1002);function c(t){return null!=t&&("string"==typeof t?""===t:Array.isArray(t)?0===t.length:"object"===(0,s.Z)(t)&&0===Object.keys(t).length)}var l=(0,r.W)((function(t,e){return e.split(t)})),u=(0,r.W)((function(t,e){return e.match(t)})),d=((0,r.W)((function(t,e,n){return n.split(t).map(e).join(t)})),(0,r.W)((function(t,e){return e.map(t)}))),p=(0,r.W)((function(t,e){return e.reduce((function(e,n){return t(n)?e:e.concat(n)}),[])})),m=n(4942),h=n(885),f=function(t){return t.reduce((function(t,e){var n=(0,h.Z)(e,2),r=n[0],i=n[1];return 2===e.length?Object.assign(t,(0,m.Z)({},r,i)):t}),{})},g=function(t){return t[t.length-1]},v=n(2982),b=(0,r.W)((function(t,e){return e.reduce((function(e,n){return t(n)?[].concat((0,v.Z)(e),[n]):e}),[])})),y=(0,r.W)((function(t,e){var n={};return e.forEach((function(e){var r=t(e);n[r]=n[r]||[],n[r].push(e)})),n})),w=(0,r.W)((function(t,e){return e.map((function(e){return e[t]}))})),_=(0,r.W)((function(t,e){return e.join(t)})),S=((0,r.W)((function(t,e){return e.some(t)})),(0,r.W)((function(t,e){return t.reduce((function(t,n){var r=t;return void 0!==e[n]&&(r[n]=e[n]),r}),{})})),(0,r.W)((function(t,e){return e[t]}))),T=n(5355),k=(0,r.W)((function(t,e,n){return n[t]===e})),C=n(4880),x=(0,r.W)((function(t,e,n){return(0,C.p)(t,[e],n)})),E=(0,r.W)((function(t,e,n){return t(S(e,n))})),A=(0,r.W)((function(t,e){var n={};for(var r in e)t(e[r],r,e)&&(n[r]=e[r]);return n})),I=(0,r.W)((function(t,e){return Object.keys(e).reduce((function(n,r){return n[r]=t(e[r],r,e),n}),{})}));(0,r.W)((function(t,e){return t+e})),(0,r.W)((function(t,e){return e-t})),(0,r.W)((function(t,e){return e/t})),(0,r.W)((function(t,e){return e*t})),(0,r.W)((function(t,e){return Math.pow(e,t)}))},8686:(t,e,n)=>{"use strict";n.d(e,{W:()=>o});var r=n(2982),i="__missing__";function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];var c=t.length,l=function(t){return t===i},u=e.map((function(t){return l(t)&&a.length>0?a.shift():t})).concat(a),d=u.filter((function(t){return!l(t)})).length;return d<c?o(t,u):t.apply(void 0,(0,r.Z)(u))}}},5355:(t,e,n)=>{"use strict";n.d(e,{E:()=>r});var r=(0,n(8686).W)((function(t,e){return t.reduce((function(t,e){return t?t[e]:void 0}),e)}))},4880:(t,e,n)=>{"use strict";n.d(e,{p:()=>a});var r=n(8686),i=n(5355),o=(0,r.W)((function(t,e){return null==e||e!=e?t:e})),a=(0,r.W)((function(t,e,n){return o(t,(0,i.E)(e,n))}))},2022:(t,e,n)=>{"use strict";n.d(e,{Sq:()=>a,Lr:()=>s,Pf:()=>c,cb:()=>l});var r=n(2084),i=n(838),o=n(7806);function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent,e=/MSIE [678]/.test(t);return e}function s(){return window.self!==window.top&&"https:"===window.location.protocol}function c(){return new Promise((function(t){var e;if(null==window.ABTasty.ADBlockEnabled){l()&&null!==(e=window.performance)&&void 0!==e&&e.mark&&window.performance.mark("adblockStart");var n=setTimeout((function(){void 0!==window.ABTasty.ADBlockEnabled&&(window.ABTasty.AdBlockDetectionFailed=!0,t("AbBlock detection failed"))}),2e3);(0,o.tI)("adblockDetectionLoop",n);var a=!1,s="".concat((0,r.pW)()).concat("try.abtasty.com","/abt-advertisement.js"),c=(0,i.u)(s,(function(){window.ABTasty.ADBlockEnabled=!1,l()&&u(),t("AdBlock is disabled")}));c.async=!1,c.onerror=function(){a&&t(),a=!0,window.ABTasty.ADBlockEnabled=!0,l()&&u(),t("AdBlock is enabled")}}else t();function u(){var t;if(null!==(t=window.performance)&&void 0!==t&&t.mark){window.performance.mark("abblockEnd"),window.performance.measure("adblockTiming","adblockStart","abblockEnd");var e=window.performance.getEntriesByName("adblockTiming");window.ABTasty.latency.adblockTiming=e&&e[0]?e[0].duration:null}}}))}function l(){return["Mozilla/5.0 (compatible; bot/ABTasty/1.0; +http://www.abtasty.com/bot.html)","Mozilla/5.0 (Linux; Android 6.0.1; Nexus 5X Build/MMB29P) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.96 Mobile Safari/537.36 (compatible; bot/ABTasty/1.0; +http://www.abtasty.com/bot.html)"].includes(navigator.userAgent)}},1042:(t,e,n)=>{"use strict";n.r(e),n.d(e,{resetState:()=>a,success:()=>l,warning:()=>u,verbose:()=>d,error:()=>p,info:()=>m});var r=n(1918),i={info:"info::",error:"error::",warning:"warning::",verbose:"verbose::",success:"success::"},o={allowed:!!r.get("abTastyDebug"),verbose:!!r.get("abTastyVerbose")};function a(){o.allowed=!!r.get("abTastyDebug"),o.verbose=!!r.get("abTastyVerbose")}function s(){var t=!window.abTastyStopLog;return(o.allowed||window.abTastyDebug)&&t}function c(t,e,n){if(s()){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];e.apply(void 0,["%c [AB Tasty Debug mode] %c ".concat(t),"background: #222; color: #bada55; padding: 3px; border-radius: 5px 0px 0px 5px;","".concat(n," padding: 3px; border-radius: 0px 5px 5px 0px;")].concat(i))}}function l(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];c.apply(void 0,[i.success,console.info,"background: green; color: white;"].concat(e))}function u(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];c.apply(void 0,[i.warning,console.warn,"background: orange; color: white;"].concat(e))}function d(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];c.apply(void 0,[i.verbose,console.debug,"background: pink; color: white;"].concat(e))}function p(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];c.apply(void 0,[i.error,console.error,"background: red; color: white;"].concat(e))}function m(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];c.apply(void 0,[i.info,console.info,"background: blue; color: white;"].concat(e))}},838:(t,e,n)=>{"use strict";n.d(e,{u:()=>i});var r=n(1042);function i(t,e){if(t){var n=document.getElementsByTagName("head")[0],i=document.createElement("script");return e&&(i.onload=e),i.setAttribute("type","text/javascript"),i.setAttribute("src",t),n.appendChild(i),i}(0,r.error)('appendScript called with missing "src" parameter')}},9267:(t,e,n)=>{"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=document,n=e.readyState,r="interactive"===n||"complete"===n;if(null==t)return r;if(r)t();else{var i=function e(){document.removeEventListener("DOMContentLoaded",e),t()};document.addEventListener("DOMContentLoaded",i)}}n.d(e,{A:()=>r})},6044:(t,e,n)=>{"use strict";n.d(e,{Tb:()=>r,Do:()=>i});n(5536),n(5951),n(5528);var r=function(t){return null},i=function(t){return r(new Error("testing with tag_version")),t()}},8669:(t,e,n)=>{"use strict";n.d(e,{U:()=>s,v:()=>c});var r=n(4942);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var a={method:"GET",cache:"no-cache"};function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l(t,o({mode:"cors",headers:{Origin:document.location.origin}},e))}function c(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l(t,o({mode:"cors",method:"POST",headers:{Origin:document.location.origin},body:JSON.stringify(e)},n))}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return window.fetch?fetch(t,o(o({},a),e)):u(t,e)}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o(o({},a),e),r=new XMLHttpRequest;if(r.open(n.method,t,!0),r.setRequestHeader("Content-type","text/plain"),"GET"===n.method)r.send();else r.send(JSON.stringify(n.body));return Promise.resolve(r)}},1155:(t,e,n)=>{"use strict";n.d(e,{VH:()=>r,X_:()=>i,ek:()=>o,tK:()=>a,PO:()=>s});n(1042);function r(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;!0===t()?e():setTimeout((function(){r(t,e,n)}),n)}function i(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,r=arguments.length>2?arguments[2]:void 0;return new Promise((function(i,o){!function r(){return t()?i(!0):e=setTimeout(r,n)}(),r&&setTimeout((function(){clearTimeout(e),o(!0)}),r)}))}function o(t,e,n){"sessionStorage"===t?sessionStorage.setItem(e,n):localStorage.setItem(e,n)}function a(t,e){return"sessionStorage"===t?sessionStorage.getItem(e):localStorage.getItem(e)}function s(t,e){"sessionStorage"===t?sessionStorage.removeItem(e):localStorage.removeItem(e)}},7352:(t,e,n)=>{"use strict";n.d(e,{PL:()=>r,WO:()=>c,nZ:()=>l,hb:()=>u});var r,i,o=n(2982),a=n(6080);!function(t){t.consentValid="consentValid",t.executedCampaign="executedCampaign",t.tagContentExecuted="tagContentExecuted",t.trackingInitialized="trackingInitialized",t.identityAdded="identityAdded"}(r||(r={})),function(t){t.loading="loading",t.complete="complete"}(i||(i={}));var s={};function c(t){t.forEach((function(t){s[t]={status:i.loading}}))}function l(){Object.keys(r).forEach((function(t){(0,a.kK)(s[t])&&(s[t]={status:i.loading})})),window.ABTasty.eventState=s}function u(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"abtasty",r=new CustomEvent("".concat(n,"_").concat(t),{detail:e});window.dispatchEvent(r),s[t]||l(),s[t].status=i.complete,!(0,a.kK)(e)&&(0,a.kK)(s[t].detail)?s[t].detail=[e]:(0,a.kK)(e)||(s[t].detail=[].concat((0,o.Z)(s[t].detail),[e]))}},1438:(t,e,n)=>{"use strict";n.d(e,{Zt:()=>i,uY:()=>o,mW:()=>a,s:()=>s});var r=n(6080);function i(t){var e,n=t;return(0,r.kK)(t)&&t.indexOf(":eq")>-1&&(n=t.replace(/html:eq\([0-9]+\)/g,"html")).match(/:eq\([0-9]+\)/g).forEach((function(t){e=Number(t.replace(":eq(","").replace(")",""))+1,n=n.replace(t,":nth-of-type(".concat(e,")"))})),n}function o(t){if(void 0!==t){var e=t.split(".");return 256*(256*(256*+e[0]+ +e[1])+ +e[2])+ +e[3]}}function a(){return new RegExp("^(?=.*?\\b(safari)\\b)(?:(?!chrome|crios).)*$","gi").test(navigator.userAgent)}function s(){var t=navigator.userAgent.toLowerCase();return t.indexOf("ipad")>-1||t.indexOf("iphone")>-1}},6407:(t,e,n)=>{"use strict";n.r(e),n.d(e,{resetPerfTracking:()=>a,registerPerfTracking:()=>s,endPerfTracking:()=>c,calculatePerfTracking:()=>l,sendPerfTracking:()=>u});var r=n(885),i=(0,n(4334).B)(),o={},a=function(){Object.keys(o).forEach((function(t){return delete o[t]}))},s=function(t){return!(!window.performance||!window.performance.now||o[t])&&(o[t]=[window.performance.now()],!0)},c=function(t){return!!(window.performance&&window.performance.now&&o[t]&&2!==o[t].length)&&(o[t].push(window.performance.now()),!0)},l=function(t){if(!o[t])return 0;var e=(0,r.Z)(o[t],2),n=e[0],i=e[1];return Math.round(1e3*(i-n))},u=function(t){return function(e,n){if(!o[e])return!1;var r={ec:"Performance Tracking",ea:n,ev:l(e)};return null==i||i.then((function(e){return e.dispatchHit(t)(e.HitType.event,r)})),!0}}},7806:(t,e,n)=>{"use strict";n.d(e,{tI:()=>i,iG:()=>o,MH:()=>a});var r={};function i(t,e){r[t]=e}function o(){Object.keys(r).forEach((function(t){return clearTimeout(r[t])})),r={}}function a(t){clearTimeout(r[t])}},8393:(t,e,n)=>{"use strict";n.d(e,{J:()=>r});var r="b1c05f3030611d124ca247d0cffcf1a4"},262:(t,e,n)=>{"use strict";n.d(e,{J:()=>r.J,B:()=>i.B0});var r=n(8393),i=n(8634)},8634:(t,e,n)=>{"use strict";n.d(e,{Rk:()=>u,B0:()=>p});var r=n(1042),i=n(6080),o=n(6044),a=n(4284),s=n(8393),c=(0,n(4334).B)();var l=null;function u(){try{var t=document.currentScript,e=t?t.src:null;(0,i.kK)(e)||(l=e.indexOf("http")<0?new URL("".concat(document.location.protocol).concat(e)):new URL(e))}catch(t){var n="Self hosting setting URL failed with: ".concat(t);(0,o.Tb)(new Error(n)),r.error(n)}}function d(){return(0,i.kK)(l)&&u(),l}function p(t){try{(window.abTastyNoRandomHit||Math.floor(1e3*Math.random())+1===1)&&function(){var t=d();if(!t)return!1;var e=t.protocol,n=t.host,r=t.port;return["http:","https:"].indexOf(e)>-1&&-1===["3000"].indexOf(r)&&!(0,i.kK)(n)&&["try.abtasty.com","qa-code.abtasty.com","try.abtasty.com","try.abtastychina.cn"].every((function(t){return n!==t}))}()&&function(t){if(d()&&d().href){var e={cid:s.J,ec:"Self Hosting",ea:(0,a.Nn)(),el:d().href};null==c||c.then((function(n){return n.dispatchHit(t)(n.HitType.event,e)}))}}(t)}catch(t){var e="Self hosting tracking failed with: ".concat(t);(0,o.Tb)(new Error(e)),r.error(e)}}},6049:(t,e,n)=>{"use strict";n.d(e,{Q:()=>s});var r=n(5861),i=n(7757),o=n.n(i),a=n(4284);function s(){return c.apply(this,arguments)}function c(){return(c=(0,r.Z)(o().mark((function t(){var e,n,r,i,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=(0,a.wy)(),n=e.addJquery,r=e.jqueryVarName,!n){t.next=12;break}t.next=10;break;case 5:return t.t0=t.sent,s=(0,t.t0)(),t.next=9,s;case 9:i=t.sent.noConflict();case 10:return""!==r&&null!=r&&(i=r.split(".").reduce((function(t,e){return t?t[e]:t}),window)),t.abrupt("return",i||window.jQuery||window.$);case 12:return t.abrupt("return",window.jQuery);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},2084:(t,e,n)=>{"use strict";n.d(e,{sZ:()=>p,yT:()=>m,pW:()=>h,UO:()=>f,J5:()=>g,re:()=>v,gy:()=>b,z3:()=>w,oe:()=>_,rD:()=>T,CL:()=>C,ST:()=>A,rl:()=>O});var r=n(2982),i=n(885),o=n(1042),a=n(6044),s=n(4284),c=n(1748),l=n(6080),u=n(2022);function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;return(0,l.zG)((0,l.EQ)(t),(0,l.KJ)(l.kK,(function(){return""}),l.Z$),(0,l.Vl)("&"),(0,l.d1)(l.xb),(0,l.UI)((0,l.Vl)("=")),l.Pe)(e)}function p(t){return(0,l.zG)((function(t){return t.replace(/(https?\:\/\/)([^\/]+).*/,"$2")}),(0,l.Vl)("."),(function(t){return t.reverse()}),(function(t){return t.map((function(e,n){var r=t.reduce((function(t,e,r){return r<=n?"".concat(e,".").concat(t):"".concat(t)}));return".".concat(r)}))}),(function(t){return t.length>1?t.slice(1):t}))(t)}function m(){var t=window.location.href,e="ABTastyDomainTest=true",n=(0,s.wy)().isSecureCookie||(0,u.Lr)()?"Samesite=None;Secure;":"",r=(0,l.zG)((function(t){return p(t)}),(function(t){return t.find((function(t){return document.cookie="".concat(e,";path=/;domain=").concat(t,";").concat(n),-1!==document.cookie.indexOf(e)}))}))(t);return document.cookie="".concat(e,";expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;domain=").concat(r,";").concat(n),r}function h(){return"".concat(window.location.protocol,"//")}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;return d(/\?([^#]+)/,t)}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;return d(/#([^?]+)/,t)}function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;return(0,l.zG)(f,(0,l.vg)(t))(e)}function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;return-1!==e.indexOf(t)}function y(){var t=window.location,e=t.protocol,n=t.hostname,r=t.port,i=t.pathname;return"".concat(e,"//").concat(n).concat(""===r?"":r).concat(i)}function w(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;return(0,l.zG)(T,(0,l.vg)(t))(e)}function _(t,e,n){var r=new URL(n),i=""===r.search?"?":"&";return r.search+="".concat(i).concat(t,"=").concat(e),r.href}var S=/^([^=]+)=?(.*)$/;function T(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.includes("?")?(0,l.zG)((function(t){return t.match(/\?([^#]+)/)}),(0,l.KJ)(l.kK,(function(){return""}),(function(t){return t[t.length-1]})),(0,l.Vl)("&"),(0,l.d1)((function(t){return(0,l.xb)(t)||!S.test(t)})),(0,l.UI)((function(t){return t.match(S).slice(1)})),(0,l.KJ)((function(){return e}),l.Pe,(function(t){return t})))(t):e?{}:[]}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;return t.includes("#")?(0,l.zG)((function(t){return t.match(/#([^?]+)/)}),(0,l.KJ)(l.kK,(function(){return""}),(function(t){return t[t.length-1]})),(0,l.Vl)("&"),(0,l.d1)((function(t){return(0,l.xb)(t)||!S.test(t)})),(0,l.UI)((function(t){return t.match(S).slice(1)})),l.Pe)(t):{}}function C(t){if(null==t||""===t)return"";var e=t.includes("?")?"&":"?",n=T(t),r=T(window.location.href,!1),o=["gclid","cid","utm_source","utm_medium","utm_campaign","utm_term","utm_content","xtor","xts","xtdt","cm_mmc","MKZOID"],a=(0,l.zG)((0,l.hX)((function(t){var e=(0,i.Z)(t,1)[0];return!n[e]&&o.includes(e)})),(0,l.UI)((function(t){return"".concat(t[0],"=").concat(t[1])})))(r);return 0===a.length?t:t+e+a.join("&")}function x(t){return Object.keys(t).map((function(e){return"".concat(e,"=").concat(t[e])})).join("&")}function E(t){return t.includes("?")?t.indexOf("?"):t.includes("#")?t.indexOf("#"):t.length}function A(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;if(!t.includes("?")&&!e.includes("?"))return t;var n=T(t),r=T(e),i=Object.assign({},r,n),o=x(i),a="?".concat(o),s=t.includes("#")?"#".concat(x(k(t))):"",c=E(t),l=t.slice(0,c);return"".concat(l).concat(a).concat(s)}function I(t,e){return t.includes(e)?(0,l.zG)((function(t){return t.replace(new RegExp("(\\#|\\?|\\&)(".concat(e,"(=\\w+)?)\\&"),"g"),"$1")}),(function(t){return t.replace(new RegExp("(\\#|\\?|\\&)(".concat(e,"(=\\w+)?)"),"g"),"")}))(t):t}function $(t){return["tastypreprod"].concat((0,r.Z)(c.k9)).reduce(I,t)}function P(t){try{return decodeURI(t)}catch(t){}return null}function O(t,e){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;switch(t){case"is":case"simplematch":case"ignore_parameters":return r=P(n=i?$(i):(0,l.zG)(y,$)("")),e===n||"".concat(e,"/")===n||e===r||"".concat(e,"/")===r;case"exact":case"equals":case"is strictly":return r=P(n=$(i||window.location.href)),e===n||"".concat(e,"/")===n||e===r||"".concat(e,"/")===r;case"substring":case"contains":case"contain":return r=P(n=$(i||window.location.href)),-1!==n.indexOf(e)||-1!==r.indexOf(e);case"regex":case"regexp":n=$(i||window.location.href);try{return new RegExp(e,"i").test(n)}catch(t){var s="The url check used an invalid regular expression => ".concat(e);return(0,a.Tb)(new Error(s)),o.error(s,t),!1}}}},4284:(t,e,n)=>{"use strict";n.d(e,{zu:()=>o,MA:()=>a,ae:()=>s,em:()=>c,wy:()=>l,rH:()=>u,Nn:()=>d,Oy:()=>p,Xx:()=>m,S3:()=>h,aD:()=>f,kA:()=>g});var r=n(8049),i={accountSettings:{id:47583,identifier:"ca01eaacbc96f88880592589dd7f732c",accountName:"Newsday",region:"north-america",frameworkVersion:"latest",pack:"premium",quota:0,toleranceParams:[],toleranceRegex:null,omnitureIntegration:0,accountIframeException:!1,runAsThread:!1,sessionRecordingRights:!1,heatmapRight:!1,addJquery:!1,jqueryVarName:null,ajaxAutoReload:!0,excludeIE:!0,hashMrasnAllowed:!0,cedexisRadar:0,globalCode:"",globalCodeOnDocReady:!0,customCookieDomain:null,customCookiePath:"/",isSecureCookie:!1,oneVisitorOneTest:!1,waitForConsent:{data:null,campaignRestrictions:{test:!1,perso:!1,redirection:!1,aa:!1,patch:!1},mode:"disabled"},storageMode:"cookies",datalayerMaxToSend:100,tealiumAccountName:null,tealiumProfileName:null,apiTokenWeborama:null,getAlwaysWeborama:null,kruxNamespace:null,eulerianPixelURL:null,clarityProjectId:null},tests:{534697:{id:534697,name:"Subscribe Button",traffic:50,type:"ab",sub_type:"ab",parentID:0,targetingMode:"fastest",dynamicTrafficModulation:50,dynamicTestedTraffic:100,priority:0,isAsync:!1,heatmap:!1,size:1,mutationObserverEnabled:!1,scopes:{urlScope:[{include:!0,condition:10,value:"/"}],ipScope:[{include:!1,to:"0",range:!1,from:"1247443611"}]},actionTrackings:{mousedown:[{name:"Subscribe Button Click",selector:"#masthead A.tBtn"}]},variations:{666581:{id:666581,name:"Variation 1",traffic:50,masterVariationId:0,modifications:[{id:2624377,selector:"#masthead .headR .logStatus .tBtn",type:"editHtml",value:'<a xmlns="http://www.w3.org/1999/xhtml" href="/subscribe" class="tBtn subacct active" data-rdy="true"><em>SUBSCRIBE</em><span>STARTING AT $1</span></a>'},{id:2624465,selector:"",type:"addCSS",value:"#masthead .tBtn span {\n    display: block;\n    font-size: 0.7rem;\n}\n\n.headR .tBtn {\n    text-align: left;\n    margin-top: -7px;\n    border-radius: 0;\n    background: #fcd000;\n    padding: 8px 18px;\n    color: #004573;\n    animation: pulse 5s 1;\n}\n\n#masthead .tBtn em {\n    font-size: 0.9rem;\n    letter-spacing: -0.02em;\n    font-weight: 900;\n}\n\n@keyframes pulse {\n  0% {\n    background: #fcd000;\n  }\n  100% {\n    background: #fcd000;\n  }\n}"}]}},audienceTrigger:{name:"Not Logged In",id:"b8beae8a-5cd4-43e4-8b3f-19736580acac",targeting_groups:[{position:0,id:"99c6112f-493f-41a3-be21-c7e5d4d08d7e",targetings:[{id:"ac6cf41a-43fb-4e61-a039-63529e3c34ac",operator:"auto",position:0,targeting_type:40,mutationObserverEnabled:!1,conditions:[{id:"4ee023d3-38b2-4fbe-8490-dfc934b1bf98",value:"!polopoly.user.isLoggedIn();",isAsync:!1}]}]}],is_segment:!1},additionalType:""},683559:{id:683559,name:"[STAGE] Sports Newsletter Exit Intent",traffic:100,type:"ab",sub_type:"ab",parentID:0,globalCode:"const newsletter = {\n\temptyEmailMsg: 'Enter a valid email address!',\n\n\tmatherPostNewsletterEvent: (event, options) => {\n\t\t(window._matherq = window._matherq || []).push(['newsletterEvent', event, options]);\n\t},\n\n\tescapeHTML(str) { // prevent SQL injection measurement\n\t\tif (str !== undefined) {\n\t\t\tstr = str.replace(/</gi, '&lt;').replace(/>/gi, '&gt;').replace(/\"/g, '&quot;');\n\t\t}\n\t\treturn str;\n\t},\n\n\tsetCookie: (name, value, days) => {\n\t\tlet expires;\n\t\tif (days) {\n\t\t\tvar date = new Date();\n\t\t\tdate.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n\t\t\texpires = \"; expires=\" + date.toGMTString();\n\t\t} else {\n\t\t\texpires = \"\";\n\t\t}\n\t\tdocument.cookie = encodeURIComponent(name) + \"=\" + encodeURIComponent(value) + expires + \"; path=/\";\n\t}\n};\n\n$(() => {\n\n\tif (typeof polopoly !== \"undefined\" && polopoly.util.querystringValue('email')) {\n\t\tnewsletter.userContact = escape(polopoly.util.querystringValue('email'));\n\t\t$('.newsletterSignup #subscribeForm :input[name=\"userContact\"]').val(newsletter.userContact);\n\t\t$('.unsubContainer .moduleBody p span').html(newsletter.userContact);\n\t}\n\n\t$('body').on('click', '.newsletterSignup form a.btn', function (e) {\n\t\te.preventDefault();\n\t\tlet $formWrapper = $(this).siblings('.formBorder'),\n\t\t\t$form = $(this).parents('form'),\n\t\t\tsailthruID = $formWrapper.find('input[name=\"sub\"]').val(); // for A/B Tasty\n\n\t\t$(this).removeClass(\"disable\");\n\t\t$formWrapper.find('.error').removeClass('error');\n\n\t\t/// if email address field is blank\n\t\tif ($formWrapper.find('input[name=\"userContact\"]').val() === '' || $formWrapper.find('input[name=\"userContact\"]') === newsletter.emptyEmailMsg) {\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').addClass('error');\n\t\t\treturn false;\n\t\t} else if ($formWrapper.find('input[name=\"userContact\"]').val().indexOf('@') < 0) {\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').addClass('error');\n\t\t\treturn false;\n\t\t}\n\n\t\tnewsletter.userContact = $formWrapper.find('input[name=\"userContact\"]').val();\n\n\t\t// SailThru id starts with \"nd\" or \"am\"\n\t\tif ($formWrapper.find('input[name=\"sub\"]').val().substr(0, 2).toLowerCase() === \"nd\" || $formWrapper.find('input[name=\"sub\"]').val().substr(0, 2).toLowerCase() === \"am\") {\n\t\t\tif ($form.attr('action') !== '') {\n\t\t\t\turl = $form.attr('action');\n\t\t\t} else {\n\t\t\t\tif (window.location.href.indexOf(':8080') > -1) {\n\t\t\t\t\turl = 'http://' + window.location.hostname + ':8080' + '/managenewsletters';\n\t\t\t\t} else {\n\t\t\t\t\turl = 'https://' + window.location.hostname + '/managenewsletters';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet respMsg;\n\t\t\tif ($formWrapper.parents('.newsletterSignup').data('confirm') && $formWrapper.parents('.newsletterSignup').data('confirm') !== '') {\n\t\t\t\trespMsg = $formWrapper.parents('.newsletterSignup').data('confirm');\n\t\t\t} else {\n\t\t\t\tconst thistarget = (window.location.href.indexOf('7.') > -1) ? '_blank' : \"\";\n\t\t\t\trespMsg = 'Sign up completed. <a href=\"/newsletters\" target=\"' + thistarget + '\">See more Newsletters</a>.';\n\t\t\t}\n\n\t\t\t// build the input fields object\n\t\t\tconst postData = {};\n\t\t\t$.each($form.serializeArray(), function (i, field) {\n\t\t\t\tpostData[field.name] = field.value;\n\t\t\t});\n\t\t\tpostData.userContact = newsletter.escapeHTML(newsletter.userContact);\n\t\t\tpostData.list = $formWrapper.find('input[name=\"sub\"]').val();\n\t\t\tpostData.origin = $formWrapper.find('input[name=\"origin\"]').val();\n\t\t\tpostData.site = $formWrapper.find('input[name=\"site\"]').val();\n\t\t\tif (!!postData.origin) {} else {\n\t\t\t\tpostData.origin = \"newsday\";\n\t\t\t}\n\n\t\t\tif ($formWrapper.find('input[name=\"email\"]').val() !== '') {\n\t\t\t\tpostData.search_token = '';\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t$.ajax({\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\turl: url,\n\t\t\t\t\tdata: postData,\n\t\t\t\t\tdataType: \"json\",\n\t\t\t\t\tcache: false,\n\t\t\t\t\tsuccess: function (data) {\n\t\t\t\t\t\tif (!!data && data.response === \"{ok=true}\") { // Cheetahmail response \"OK\", SailThru response \"{ok=true}\"\n\t\t\t\t\t\t\t$form.siblings('.signupSuccess').html(\"<p>\" + respMsg + \"</p>\").show();\n\t\t\t\t\t\t\t$formWrapper.parent('form').remove();\n\n\t\t\t\t\t\t\tnewsletter.setCookie(\"nlSignUpID\", sailthruID, 90); // for A/B Tasty to check if the user has already signed up\n\n\t\t\t\t\t\t\t/* only from newsday - there are other forms outside newsday not passing origin */\n\t\t\t\t\t\t\tif (postData.origin === \"newsday\") {\n\t\t\t\t\t\t\t\twindow.nlname = postData.list;\n\t\t\t\t\t\t\t\t_satellite.track(\"nlsuccess\");\n\t\t\t\t\t\t\t\tif (navigator.cookieEnabled && window.location.hostname.indexOf('.newsday.com') >= 0) {\n\t\t\t\t\t\t\t\t\tdocument.cookie = \"newsletterSignupEmail=\" + polopoly.base64.stringEncode(postData.userContact) + \";domain=.newsday.com;path=/\";\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (postData.site === \"connext\") {\n\t\t\t\t\t\t\t\tif (navigator.cookieEnabled && ndGlobal.site === \"newsday\") {\n\t\t\t\t\t\t\t\t\twindow.nlname = postData.list;\n\t\t\t\t\t\t\t\t\t_satellite.track(\"nlsuccess\");\n\t\t\t\t\t\t\t\t\tdate = new Date();\n\t\t\t\t\t\t\t\t\tdate.setTime(date.getTime() + (365 * 24 * 60 * 60 * 1000));\n\t\t\t\t\t\t\t\t\texpires = \"; expires=\" + date.toGMTString();\n\t\t\t\t\t\t\t\t\tdocument.cookie = \"c_ecapture=true;domain=.newsday.com;\" + expires + \";path=/\";\n\t\t\t\t\t\t\t\t\tdocument.cookie = \"c_newsletterSignupEmail=\" + polopoly.base64.stringEncode(postData.userContact) + \";domain=.newsday.com;path=/\";\n\n\t\t\t\t\t\t\t\t\t/* newsletter-data */\n\t\t\t\t\t\t\t\t\tvar newsletter_name = window.nlname;\n\t\t\t\t\t\t\t\t\tvar newsletter_user = postData.userContact;\n\t\t\t\t\t\t\t\t\tvar action_name = _satellite.getVar('mg2 action name');\n\t\t\t\t\t\t\t\t\tvar offers = [\n\t\t\t\t\t\t\t\t\t\t{ offerName: newsletter_name, offerId: newsletter_name, campaign: action_name }\n\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\tnewsletter.matherPostNewsletterEvent({ action: 'signup_completed', offers: offers }, { email: newsletter_user });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//if (_satellite.getVar('content type') !== \"front\") {Connext.Run();}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if ((!!data && data.response === \"Invalid email: \" + newsletter.userContact) || (!!data && data.response === \"err:email:illegal\")) {\n\t\t\t\t\t\t\t// invalid email address response from SailThru\n\t\t\t\t\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (err) {\n\t\t\t\tconsole.log(\"Error signing up. \" + err.message);\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.log('You need to set up the correct SailThru id.');\n\t\t}\n\t}).on('focus', '.newsletterSignup :input[name=\"userContact\"]', function () {\n\t\t$(this).removeClass('error').find('.error').removeClass('error');\n\t\tif ($(this).val() === newsletter.emptyEmailMsg) {\n\t\t\t$(this).val('');\n\t\t}\n\t}).on('keyup', '.newsletterSignup form :input[name=\"userContact\"]', function () {\n\t\tif ($(this).val().indexOf('@')) {\n\t\t\t$(this).parent('.formBorder').siblings('a.btn').removeClass(\"disable\");\n\t\t}\n\t}).on('keypress', '.newsletterSignup form :input[name=\"userContact\"]', function (e) {\n\t\t// return key hit\n\t\tif (e.which === 13) {\n\t\t\t$(this).parent('.formBorder').siblings('a.btn').click();\n\t\t\treturn false;\n\t\t}\n\t});\n\n});\n\n/*$(document).on(\"onNotAuthorized\", function() {\n    $(\".ab_widget_container_popin-image\").hide();\n});*/",targetingMode:"waituntil",dynamicTrafficModulation:50,dynamicTestedTraffic:100,priority:0,isAsync:!1,heatmap:!1,size:8,mutationObserverEnabled:!1,scopes:{urlScope:[{include:!0,condition:40,value:"https://stage.newsday.com/sports"}]},widgets:[{id:"ebbc88aa-680d-42f2-bf07-4995150f1ecd",version:"3.1",config:'{"actiontracking":[{"name":"More than 5 seconds","from":5}]}',name:"@abtasty/time-spent-on-page"}],actionTrackings:{mousedown:[{name:"Email Input",selector:"#nl-modal form div .form-control.email-enter"},{name:"Sign Up",selector:"#nl-modal form a.btn"}]},variations:{847759:{id:847759,name:"Sports Modal w/Img",traffic:100,masterVariationId:0,modifications:[{id:3203876,selector:"#ab_widget_container_popin-image_78cf38a3_683559 .popinimage_container_78cf38a3_683559 .popin_text_container h2",type:"editStyleCSS",value:'{"font-weight":"900!important","margin-top":"12px!important","margin-bottom":"32px!important","margin":"12px 0px 32px 0px!important","font-size":"22px!important","padding-right":"0!important","padding-left":"0!important","padding":"0!important","width":"auto!important","min-width":"none!important","height":"0px!important","min-height":"none!important","padding-top":"0!important","padding-bottom":"0!important"}'},{id:3212802,selector:"",type:"addCSS",value:".modal-open .ab_widget_container_popin-image {display:none!importantimportant;}\nh2.popin_img_title {\n    letter-spacing: -0.03em;\n}\n\n#nl-modal {\nwhite-space: initial;\npadding:0 22px 22px;\n}\n\n#nl-modal form {\n    margin: 0;\n}\n\n#nl-modal .btn {\n    width: 100%;\n    margin:12px 0;\n}\n\ninput.form-control.email-enter {\n    border-radius: 6px;\n    padding: 12px;\n}\n\n.privacy-link {\n    background: none!important;\n    border: none!important;\n    color: #0076be!important;\n    font-weight:normal!important;\n    font-size: 12px!important;\n    text-decoration:underline;\n    fill: #0076be!important;\n    -webkit-text-fill-color: #0076be!important;\n    \n}\n\n#nl-modal p.disclaimer {\n    font-size: 12px!important;\n   \n}\n\n#nl-modal .signupSuccess {\n    margin-bottom: 22px;\n}\n\n@media (max-width:400px) {\n    body #ab_widget_container_popin-image_78cf38a3_683559 .ab_widget_container_popin-image_content {\n    max-width: none!important;\n    width: 98%;\n}\n#nl-modal .signupSuccess a {margin-top:6px;}\n}"},{id:3235409,selector:"#ab_widget_container_popin-image_78cf38a3_683559 .ab_widget_container_popin-image_content .popinimage_container_78cf38a3_683559 .popin_text_container",type:"editStyleCSS",value:'{"width":"100%!important","min-width":"none!important","height":"67%!important","min-height":"none!important","padding-right":"12px!important","padding-left":"12px!important","padding":"0px 12px 0px 12px!important"}'}],widgets:[{id:"78cf38a3-1ba9-4953-8548-447aaf273529",version:"1.2",config:'{"layout":"popin","contentLayout":"top","textImageRatio":50,"autoWidth":false,"popinPercentWidth":40,"popinPixelsWidth":400,"widthUnit":"px","autoHeight":true,"popinPercentHeight":50,"popinPixelsHeight":344,"heightUnit":"vh","popinPosition":[{"x":1,"y":1}],"zindex":"9999","zindexCustom":1,"image":"https://editor-assets.abtasty.com/47583/60356fba507ab1614114746.jpg","isTitle":true,"title":"Get the Sports Now Newsletter","textContent":"New York sports stories for the die hard fan.\\n\\n<div id=\\"nl-modal\\" class=\\"newsletterSignup\\" data-confirm=\\"\\">\\n  <form id=\\"subscribeForm\\" action=\\"\\" method=\\"POST\\">\\n      <div class=\\"formBorder\\">\\n      <input type=\\"text\\" class=\\"form-control email-enter\\" name=\\"userContact\\" value=\\"\\" placeholder=\\"Email address\\" required=\\"required\\">\\n      <input type=\\"hidden\\" name=\\"sub\\" value=\\"ND_edit_sports_now_masterlist\\">\\n      <input name=\\"requestType\\" type=\\"hidden\\" value=\\"new_subscription\\" />\\n      <input name=\\"responseType\\" type=\\"hidden\\" value=\\"json\\" />\\n      <input name=\\"version\\" type=\\"hidden\\" value=\\"2\\" />\\n      <input name=\\"confirmationEmail\\" type=\\"hidden\\" value=\\"\\" />\\n      <input name=\\"email\\" type=\\"hidden\\" value=\\"\\" />\\n      <input name=\\"grc-response\\" type=\\"hidden\\" value=\\"verified\\" />\\n      <input name=\\"nsource\\" type=\\"hidden\\" value=\\"A\\" />\\n      <input name=\\"origin\\" type=\\"hidden\\" value=\\"sailthru\\" />\\n      <input name=\\"site\\" type=\\"hidden\\" value=\\"connext\\" />\\n      </div>\\n    <a class=\\"btn disable\\" href=\\"#\\">Sign up</a>\\n  </form>\\n  <div class=\\"signupSuccess\\"></div>\\n  <p class=\\"disclaimer\\">By signing up, you agree to our <a class=\\"privacy-link\\" href=\\"https://www.newsday.com/privacy\\" target=\\"blank\\">privacy policy</a></p>\\n</div>","linkType":false,"buttonText":"SIGN UP","redirectionUrl":"https://stage.newsday.com","openInNewTab":false,"titleTextAlign":"center","titleTextColor":"rgba(0, 0, 0, 1)","titleFontName":"inherit","titleFontStyle":"font-weight: bold !important;","titleFontSize":24,"textAlign":"center","textColor":"rgba(57, 57, 57, 1)","fontName":"inherit","fontStyle":"font-style: normal !important; font-weight: normal;","fontSize":16,"buttonsBorderWidth":8,"buttonsBorderColor":"rgba(39, 97, 158, 1)","buttonsBorderRadius":6,"buttonsBackgroundColor":"rgba(39, 97, 158, 1)","buttonsTextColor":"rgba(247, 247, 247, 1)","buttonsAlign":"fill","buttonsFontName":"inherit","buttonsFontStyle":"font-weight: bold !important;","buttonsFontSize":16,"containerMargin":[{"top":0,"left":0,"bottom":0,"right":0}],"containerPadding":[{"top":0,"right":0,"bottom":22,"left":0}],"backgroundColor":"rgba(247, 247, 247, 1)","isBackgroundImage":false,"backgroundImage":"https://widgets-images.abtasty.com/widgets-default-image.png","backgroundSize":"cover","backgroundPosition":"center","backgroundRepeat":false,"dropShadow":true,"dropShadowColor":"rgba(57, 57, 57, 0.25);","dropShadowBlur":10,"borderWidth":2,"borderColor":"rgba(255, 255, 255, 1)","borderRadius":0,"overlay":true,"overlayColor":"rgba(0, 0, 0, 0.6)","overlayClickable":true,"closeButton":true,"closeButtonPosition":"in","closeButtonSize":26,"closeButtonColor":"rgba(255, 255, 255, 1)","closeButtonBackgroundColor":"rgba(0, 0, 0, 1)","closeButtonBorderRadius":50,"closeButtonBorderWidth":8,"closeButtonBorderColor":"rgba(0, 0, 0, 1)","triggerEvent":"pageLoad","triggerEventClick":"body","triggerEventElementVisible":"body","triggerEventCustomScript":"/* In this example snippet, the widget will be triggered as soon as any scroll is detected.\\nCreate your own by resolving resolve() with true (which does trigger) or false (which doesn\'t trigger) */\\n\\nfunction launchIfScroll() {\\n\\treturn new Promise(resolve => {\\n\\t\\tdocument.addEventListener(\'scroll\', () => resolve(true), {once: true});\\n\\t});\\n}\\n\\nconst result = await launchIfScroll();\\nreturn resolve(result);","isOncePerPageTrigger":true,"triggerEventReengageDelay":10,"triggerEventDelay":0,"autoHide":true,"timeHide":2,"displayRecurrence":"session","displayRecurrence_day":5,"displayRecurrence_week":2,"displayRecurrence_month":1,"closingRecurrence":"week","closingRecurrence_day":5,"closingRecurrence_week":1,"closingRecurrence_month":1,"validationRecurrence":"everytime","validationRecurrence_day":5,"validationRecurrence_week":2,"validationRecurrence_month":1}',name:"@abtasty/popin-image"}]}},audienceTrigger:{name:"Show NL Signup",id:"f382ddd4-032d-42b6-a721-ed612671d261",targeting_groups:[{position:0,id:"2f308826-e886-4674-992e-802c8b8e667a",targetings:[{id:"71672828-c46c-42ab-9092-570d1fbe8348",operator:"auto",position:0,targeting_type:40,mutationObserverEnabled:!1,conditions:[{id:"023bf38b-fef6-4ff5-be53-6cb4173657b5",value:"var showPopup = false;\nif (!document.cookie.match(\"nlSignUpID=\")) {\n\tshowPopup = true;\n\thj('trigger', 'hotjar_record');\n}\nreturn showPopup",isAsync:!1}]}]}],is_segment:!1},additionalType:""},695469:{id:695469,name:"Sports Newsletter Exit Intent",traffic:100,type:"ab",sub_type:"ab",parentID:0,globalCode:"const newsletter = {\n\temptyEmailMsg: 'Enter a valid email address!',\n\n\tmatherPostNewsletterEvent: (event, options) => {\n\t\t(window._matherq = window._matherq || []).push(['newsletterEvent', event, options]);\n\t},\n\n\tescapeHTML(str) { // prevent SQL injection measurement\n\t\tif (str !== undefined) {\n\t\t\tstr = str.replace(/</gi, '&lt;').replace(/>/gi, '&gt;').replace(/\"/g, '&quot;');\n\t\t}\n\t\treturn str;\n\t},\n\n\tsetCookie: (name, value, days) => {\n\t\tlet expires;\n\t\tif (days) {\n\t\t\tvar date = new Date();\n\t\t\tdate.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n\t\t\texpires = \"; expires=\" + date.toGMTString();\n\t\t} else {\n\t\t\texpires = \"\";\n\t\t}\n\t\tdocument.cookie = encodeURIComponent(name) + \"=\" + encodeURIComponent(value) + expires + \"; path=/\";\n\t}\n};\n\n$(() => {\n\n\tif (typeof polopoly !== \"undefined\" && polopoly.util.querystringValue('email')) {\n\t\tnewsletter.userContact = escape(polopoly.util.querystringValue('email'));\n\t\t$('.newsletterSignup #subscribeForm :input[name=\"userContact\"]').val(newsletter.userContact);\n\t\t$('.unsubContainer .moduleBody p span').html(newsletter.userContact);\n\t}\n\n\t$('body').on('click', '.newsletterSignup form a.btn', function (e) {\n\t\te.preventDefault();\n\t\tlet $formWrapper = $(this).siblings('.formBorder'),\n\t\t\t$form = $(this).parents('form'),\n\t\t\tsailthruID = $formWrapper.find('input[name=\"sub\"]').val(); // for A/B Tasty\n\n\t\t$(this).removeClass(\"disable\");\n\t\t$formWrapper.find('.error').removeClass('error');\n\n\t\t/// if email address field is blank\n\t\tif ($formWrapper.find('input[name=\"userContact\"]').val() === '' || $formWrapper.find('input[name=\"userContact\"]') === newsletter.emptyEmailMsg) {\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').addClass('error');\n\t\t\treturn false;\n\t\t} else if ($formWrapper.find('input[name=\"userContact\"]').val().indexOf('@') < 0) {\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').addClass('error');\n\t\t\treturn false;\n\t\t}\n\n\t\tnewsletter.userContact = $formWrapper.find('input[name=\"userContact\"]').val();\n\n\t\t// SailThru id starts with \"nd\" or \"am\"\n\t\tif ($formWrapper.find('input[name=\"sub\"]').val().substr(0, 2).toLowerCase() === \"nd\" || $formWrapper.find('input[name=\"sub\"]').val().substr(0, 2).toLowerCase() === \"am\") {\n\t\t\tif ($form.attr('action') !== '') {\n\t\t\t\turl = $form.attr('action');\n\t\t\t} else {\n\t\t\t\tif (window.location.href.indexOf(':8080') > -1) {\n\t\t\t\t\turl = 'http://' + window.location.hostname + ':8080' + '/managenewsletters';\n\t\t\t\t} else {\n\t\t\t\t\turl = 'https://' + window.location.hostname + '/managenewsletters';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet respMsg;\n\t\t\tif ($formWrapper.parents('.newsletterSignup').data('confirm') && $formWrapper.parents('.newsletterSignup').data('confirm') !== '') {\n\t\t\t\trespMsg = $formWrapper.parents('.newsletterSignup').data('confirm');\n\t\t\t} else {\n\t\t\t\tconst thistarget = (window.location.href.indexOf('7.') > -1) ? '_blank' : \"\";\n\t\t\t\trespMsg = 'Sign up completed. <a href=\"/newsletters\" target=\"' + thistarget + '\">See more Newsletters</a>.';\n\t\t\t}\n\n\t\t\t// build the input fields object\n\t\t\tconst postData = {};\n\t\t\t$.each($form.serializeArray(), function (i, field) {\n\t\t\t\tpostData[field.name] = field.value;\n\t\t\t});\n\t\t\tpostData.userContact = newsletter.escapeHTML(newsletter.userContact);\n\t\t\tpostData.list = $formWrapper.find('input[name=\"sub\"]').val();\n\t\t\tpostData.origin = $formWrapper.find('input[name=\"origin\"]').val();\n\t\t\tpostData.site = $formWrapper.find('input[name=\"site\"]').val();\n\t\t\tif (!!postData.origin) {} else {\n\t\t\t\tpostData.origin = \"newsday\";\n\t\t\t}\n\n\t\t\tif ($formWrapper.find('input[name=\"email\"]').val() !== '') {\n\t\t\t\tpostData.search_token = '';\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t$.ajax({\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\turl: url,\n\t\t\t\t\tdata: postData,\n\t\t\t\t\tdataType: \"json\",\n\t\t\t\t\tcache: false,\n\t\t\t\t\tsuccess: function (data) {\n\t\t\t\t\t\tif (!!data && data.response === \"{ok=true}\") { // Cheetahmail response \"OK\", SailThru response \"{ok=true}\"\n\t\t\t\t\t\t\t$form.siblings('.signupSuccess').html(\"<p>\" + respMsg + \"</p>\").show();\n\t\t\t\t\t\t\t$formWrapper.parent('form').remove();\n\n\t\t\t\t\t\t\tnewsletter.setCookie(\"nlSignUpID\", sailthruID, 90); // for A/B Tasty to check if the user has already signed up\n\n\t\t\t\t\t\t\t/* only from newsday - there are other forms outside newsday not passing origin */\n\t\t\t\t\t\t\tif (postData.origin === \"newsday\") {\n\t\t\t\t\t\t\t\twindow.nlname = postData.list;\n\t\t\t\t\t\t\t\t_satellite.track(\"nlsuccess\");\n\t\t\t\t\t\t\t\tif (navigator.cookieEnabled && window.location.hostname.indexOf('.newsday.com') >= 0) {\n\t\t\t\t\t\t\t\t\tdocument.cookie = \"newsletterSignupEmail=\" + polopoly.base64.stringEncode(postData.userContact) + \";domain=.newsday.com;path=/\";\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (postData.site === \"connext\") {\n\t\t\t\t\t\t\t\tif (navigator.cookieEnabled && ndGlobal.site === \"newsday\") {\n\t\t\t\t\t\t\t\t\twindow.nlname = postData.list;\n\t\t\t\t\t\t\t\t\t_satellite.track(\"nlsuccess\");\n\t\t\t\t\t\t\t\t\tdate = new Date();\n\t\t\t\t\t\t\t\t\tdate.setTime(date.getTime() + (365 * 24 * 60 * 60 * 1000));\n\t\t\t\t\t\t\t\t\texpires = \"; expires=\" + date.toGMTString();\n\t\t\t\t\t\t\t\t\tdocument.cookie = \"c_ecapture=true;domain=.newsday.com;\" + expires + \";path=/\";\n\t\t\t\t\t\t\t\t\tdocument.cookie = \"c_newsletterSignupEmail=\" + polopoly.base64.stringEncode(postData.userContact) + \";domain=.newsday.com;path=/\";\n\n\t\t\t\t\t\t\t\t\t/* newsletter-data */\n\t\t\t\t\t\t\t\t\tvar newsletter_name = window.nlname;\n\t\t\t\t\t\t\t\t\tvar newsletter_user = postData.userContact;\n\t\t\t\t\t\t\t\t\tvar action_name = _satellite.getVar('mg2 action name');\n\t\t\t\t\t\t\t\t\tvar offers = [\n\t\t\t\t\t\t\t\t\t\t{ offerName: newsletter_name, offerId: newsletter_name, campaign: action_name }\n\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\tnewsletter.matherPostNewsletterEvent({ action: 'signup_completed', offers: offers }, { email: newsletter_user });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//if (_satellite.getVar('content type') !== \"front\") {Connext.Run();}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if ((!!data && data.response === \"Invalid email: \" + newsletter.userContact) || (!!data && data.response === \"err:email:illegal\")) {\n\t\t\t\t\t\t\t// invalid email address response from SailThru\n\t\t\t\t\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (err) {\n\t\t\t\tconsole.log(\"Error signing up. \" + err.message);\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.log('You need to set up the correct SailThru id.');\n\t\t}\n\t}).on('focus', '.newsletterSignup :input[name=\"userContact\"]', function () {\n\t\t$(this).removeClass('error').find('.error').removeClass('error');\n\t\tif ($(this).val() === newsletter.emptyEmailMsg) {\n\t\t\t$(this).val('');\n\t\t}\n\t}).on('keyup', '.newsletterSignup form :input[name=\"userContact\"]', function () {\n\t\tif ($(this).val().indexOf('@')) {\n\t\t\t$(this).parent('.formBorder').siblings('a.btn').removeClass(\"disable\");\n\t\t}\n\t}).on('keypress', '.newsletterSignup form :input[name=\"userContact\"]', function (e) {\n\t\t// return key hit\n\t\tif (e.which === 13) {\n\t\t\t$(this).parent('.formBorder').siblings('a.btn').click();\n\t\t\treturn false;\n\t\t}\n\t});\n\n});\n\n/*$(document).on(\"onNotAuthorized\", function() {\n    $(\".ab_widget_container_popin-image\").hide();\n});*/",targetingMode:"waituntil",dynamicTrafficModulation:50,dynamicTestedTraffic:100,priority:0,isAsync:!1,heatmap:!1,size:8,mutationObserverEnabled:!1,scopes:{urlScope:[{include:!0,condition:10,value:"/sports"},{include:!1,condition:40,value:"https://projects.newsday.com/sports/baseball/baseballs-second-color-barrier/"},{include:!1,condition:10,value:"/sports/high-school"},{include:!1,condition:10,value:"ace-stage.newsday.com"},{include:!1,condition:10,value:"local.newsday.com"}]},widgets:[{id:"5e79c947-6779-4603-b4f7-d6e1af002f65",version:"3.1",config:'{"actiontracking":[{"name":"More than 5 seconds","from":5}]}',name:"@abtasty/time-spent-on-page"}],actionTrackings:{mousedown:[{name:"Email Input",selector:"#nl-modal form div .form-control.email-enter"},{name:"Sign Up",selector:"#nl-modal form a.btn"}]},variations:{862819:{id:862819,name:"Sports Modal w/Img",traffic:100,masterVariationId:0,modifications:[{id:3254262,selector:"#ab_widget_container_popin-image_9b102fb1_695469 .popinimage_container_9b102fb1_695469 .popin_text_container h2",type:"editStyleCSS",value:'{"font-weight":"900!important","margin-top":"12px!important","margin-bottom":"32px!important","margin":"12px 0px 32px 0px!important","font-size":"22px!important","padding-right":"0!important","padding-left":"0!important","padding":"0!important","width":"auto!important","min-width":"none!important","height":"0px!important","min-height":"none!important","padding-top":"0!important","padding-bottom":"0!important"}'},{id:3254263,selector:"",type:"addCSS",value:".modal-open .ab_widget_container_popin-image {display:none!importantimportant;}\nh2.popin_img_title {\n    letter-spacing: -0.03em;\n}\n\n#nl-modal {\nwhite-space: initial;\npadding:0 22px 22px;\n  background: none !important;\n}\n\n#nl-modal form {\n    margin: 0;\n}\n\n#nl-modal .btn {\n    width: 100%;\n    margin:12px 0;\n}\n\ninput.form-control.email-enter {\n    border-radius: 6px;\n    padding: 12px;\n}\n\n.privacy-link {\n    background: none!important;\n    border: none!important;\n    color: #0076be!important;\n    font-weight:normal!important;\n    font-size: 12px!important;\n    text-decoration:underline;\n    fill: #0076be!important;\n    -webkit-text-fill-color: #0076be!important;\n    \n}\n\n#nl-modal p.disclaimer {\n    font-size: 12px!important;\n   \n}\n\n#nl-modal .formBorder{\n\tdisplay: block !important;\n  \tpadding: 0 !important;\n}\n\n#nl-modal .signupSuccess {\n    margin-bottom: 22px;\n}\n\n#nl-modal input.error{\n    border-color: #ebccd1;\n    background: #f2dede;\n}\n\n@media (max-width:400px) {\n    body #ab_widget_container_popin-image_9b102fb1_695469 .ab_widget_container_popin-image_content {\n    max-width: none!important;\n    width: 98%;\n}\n#nl-modal .signupSuccess a {margin-top:6px;}\n}"},{id:3254264,selector:"#ab_widget_container_popin-image_9b102fb1_695469 .ab_widget_container_popin-image_content .popinimage_container_9b102fb1_695469 .popin_text_container",type:"editStyleCSS",value:'{"width":"100%!important","min-width":"none!important","height":"67%!important","min-height":"none!important","padding-right":"12px!important","padding-left":"12px!important","padding":"0px 12px 0px 12px!important"}'}],widgets:[{id:"9b102fb1-b83b-4db4-aa93-db32c78bcd05",version:"1.2",config:'{"layout":"popin","contentLayout":"top","textImageRatio":50,"autoWidth":false,"popinPercentWidth":40,"popinPixelsWidth":400,"widthUnit":"px","autoHeight":true,"popinPercentHeight":50,"popinPixelsHeight":344,"heightUnit":"vh","popinPosition":[{"x":1,"y":1}],"zindex":"9999","zindexCustom":1,"image":"https://editor-assets.abtasty.com/47583/60356fba507ab1614114746.jpg","isTitle":true,"title":"Get the Sports Now Newsletter","textContent":"New York sports stories for the die hard fan.\\n\\n<div id=\\"nl-modal\\" class=\\"newsletterSignup\\" data-confirm=\\"\\">\\n  <form id=\\"subscribeForm\\" action=\\"\\" method=\\"POST\\">\\n      <div class=\\"formBorder\\">\\n      <input type=\\"text\\" class=\\"form-control email-enter\\" name=\\"userContact\\" value=\\"\\" placeholder=\\"Email address\\" required=\\"required\\">\\n      <input type=\\"hidden\\" name=\\"sub\\" value=\\"ND_edit_sports_now_masterlist\\">\\n      <input name=\\"requestType\\" type=\\"hidden\\" value=\\"new_subscription\\" />\\n      <input name=\\"responseType\\" type=\\"hidden\\" value=\\"json\\" />\\n      <input name=\\"version\\" type=\\"hidden\\" value=\\"2\\" />\\n      <input name=\\"confirmationEmail\\" type=\\"hidden\\" value=\\"\\" />\\n      <input name=\\"email\\" type=\\"hidden\\" value=\\"\\" />\\n      <input name=\\"grc-response\\" type=\\"hidden\\" value=\\"verified\\" />\\n      <input name=\\"nsource\\" type=\\"hidden\\" value=\\"A\\" />\\n      <input name=\\"origin\\" type=\\"hidden\\" value=\\"sailthru\\" />\\n      <input name=\\"site\\" type=\\"hidden\\" value=\\"connext\\" />\\n      </div>\\n    <a class=\\"btn disable\\" href=\\"#\\">Sign up</a>\\n  </form>\\n  <div class=\\"signupSuccess\\"></div>\\n  <p class=\\"disclaimer\\">By signing up, you agree to our <a class=\\"privacy-link\\" href=\\"https://www.newsday.com/privacy\\" target=\\"blank\\">privacy policy</a></p>\\n</div>","linkType":false,"buttonText":"SIGN UP","redirectionUrl":"https://stage.newsday.com","openInNewTab":false,"titleTextAlign":"center","titleTextColor":"rgba(0, 0, 0, 1)","titleFontName":"inherit","titleFontStyle":"font-weight: bold !important;","titleFontSize":24,"textAlign":"center","textColor":"rgba(57, 57, 57, 1)","fontName":"inherit","fontStyle":"font-style: normal !important; font-weight: normal;","fontSize":16,"buttonsBorderWidth":8,"buttonsBorderColor":"rgba(39, 97, 158, 1)","buttonsBorderRadius":6,"buttonsBackgroundColor":"rgba(39, 97, 158, 1)","buttonsTextColor":"rgba(247, 247, 247, 1)","buttonsAlign":"fill","buttonsFontName":"inherit","buttonsFontStyle":"font-weight: bold !important;","buttonsFontSize":16,"containerMargin":[{"top":0,"left":0,"bottom":0,"right":0}],"containerPadding":[{"top":0,"right":0,"bottom":22,"left":0}],"backgroundColor":"rgba(247, 247, 247, 1)","isBackgroundImage":false,"backgroundImage":"https://widgets-images.abtasty.com/widgets-default-image.png","backgroundSize":"cover","backgroundPosition":"center","backgroundRepeat":false,"dropShadow":true,"dropShadowColor":"rgba(57, 57, 57, 0.25);","dropShadowBlur":10,"borderWidth":2,"borderColor":"rgba(255, 255, 255, 1)","borderRadius":0,"overlay":true,"overlayColor":"rgba(0, 0, 0, 0.6)","overlayClickable":true,"closeButton":true,"closeButtonPosition":"in","closeButtonSize":26,"closeButtonColor":"rgba(255, 255, 255, 1)","closeButtonBackgroundColor":"rgba(0, 0, 0, 1)","closeButtonBorderRadius":50,"closeButtonBorderWidth":8,"closeButtonBorderColor":"rgba(0, 0, 0, 1)","triggerEvent":"exitIntent","triggerEventClick":"body","triggerEventElementVisible":"body","triggerEventCustomScript":"/* In this example snippet, the widget will be triggered as soon as any scroll is detected.\\nCreate your own by resolving resolve() with true (which does trigger) or false (which doesn\'t trigger) */\\n\\nfunction launchIfScroll() {\\n\\treturn new Promise(resolve => {\\n\\t\\tdocument.addEventListener(\'scroll\', () => resolve(true), {once: true});\\n\\t});\\n}\\n\\nconst result = await launchIfScroll();\\nreturn resolve(result);","isOncePerPageTrigger":true,"triggerEventReengageDelay":10,"triggerEventDelay":0,"autoHide":true,"timeHide":2,"displayRecurrence":"session","displayRecurrence_day":5,"displayRecurrence_week":2,"displayRecurrence_month":1,"closingRecurrence":"week","closingRecurrence_day":5,"closingRecurrence_week":3,"closingRecurrence_month":1,"validationRecurrence":"everytime","validationRecurrence_day":5,"validationRecurrence_week":2,"validationRecurrence_month":1}',name:"@abtasty/popin-image"}]}},audienceTrigger:{name:"Show NL Signup",id:"f382ddd4-032d-42b6-a721-ed612671d261",targeting_groups:[{position:0,id:"2f308826-e886-4674-992e-802c8b8e667a",targetings:[{id:"71672828-c46c-42ab-9092-570d1fbe8348",operator:"auto",position:0,targeting_type:40,mutationObserverEnabled:!1,conditions:[{id:"023bf38b-fef6-4ff5-be53-6cb4173657b5",value:"var showPopup = false;\nif (!document.cookie.match(\"nlSignUpID=\")) {\n\tshowPopup = true;\n\thj('trigger', 'hotjar_record');\n}\nreturn showPopup",isAsync:!1}]}]}],is_segment:!1},additionalType:""},701594:{id:701594,name:"Subscription Short Form",traffic:100,type:"ab",sub_type:"ab",parentID:0,targetingMode:"fastest",dynamicTrafficModulation:50,dynamicTestedTraffic:100,priority:0,isAsync:!1,heatmap:!1,size:1,mutationObserverEnabled:!1,scopes:{urlScope:[{include:!0,condition:40,value:"https://subscribe.newsday.com/"}]},widgets:[{id:"b2df7198-8669-4dc9-a933-f28839da5037",version:"3.1",config:'{"actiontracking":[{"name":"More than 5 seconds","from":10}],"actiontracking.from.0":10}',name:"@abtasty/time-spent-on-page"}],actionTrackings:{mousedown:[{name:"Digital Subscribe CTA",selector:"body .promotion.promotion_default.active .promotion__wrapper .promotion__container .promotion__body .promotion__buttons button"}]},variations:{870641:{id:870641,name:"Control",traffic:0,masterVariationId:0},870646:{id:870646,name:"Short Form",traffic:100,masterVariationId:0,modifications:[{id:3281399,selector:"",type:"customScriptNew",oldValue:'$("body").off("click", ".promotion:first").on("click", ".promotion:first", function(e) {\ne.preventDefault(); \ne.stopPropagation(); \nwindow.location.href = "https://subscribe.newsday.com/Subscribe4?sitecode=Ncom&ofrgp_id=1020&returnUrl=https%3A%2F%2Fwww.newsday.com%2Fservices%2Fprofile-7.386%3Fview%3Ddcards%26clearUserState%3Dtrue"; \n});'}]}},additionalType:""},707098:{id:707098,name:"HS sports exit intent",traffic:100,type:"ab",sub_type:"ab",parentID:0,globalCode:"const newsletter = {\n\temptyEmailMsg: 'Enter a valid email address!',\n\n\tmatherPostNewsletterEvent: (event, options) => {\n\t\t(window._matherq = window._matherq || []).push(['newsletterEvent', event, options]);\n\t},\n\n\tescapeHTML(str) { // prevent SQL injection measurement\n\t\tif (str !== undefined) {\n\t\t\tstr = str.replace(/</gi, '&lt;').replace(/>/gi, '&gt;').replace(/\"/g, '&quot;');\n\t\t}\n\t\treturn str;\n\t},\n\n\tsetCookie: (name, value, days) => {\n\t\tlet expires;\n\t\tif (days) {\n\t\t\tvar date = new Date();\n\t\t\tdate.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n\t\t\texpires = \"; expires=\" + date.toGMTString();\n\t\t} else {\n\t\t\texpires = \"\";\n\t\t}\n\t\tdocument.cookie = encodeURIComponent(name) + \"=\" + encodeURIComponent(value) + expires + \"; path=/\";\n\t}\n};\n\n$(() => {\n\n\tif (typeof polopoly !== \"undefined\" && polopoly.util.querystringValue('email')) {\n\t\tnewsletter.userContact = escape(polopoly.util.querystringValue('email'));\n\t\t$('.newsletterSignupModal #subscribeForm :input[name=\"userContact\"]').val(newsletter.userContact);\n\t\t$('.unsubContainer .moduleBody p span').html(newsletter.userContact);\n\t}\n\n\t$('body').on('click', '.newsletterSignupModal form a.btn', function (e) {\n\t\te.preventDefault();\n\t\tlet $formWrapper = $(this).siblings('.formBorderModal'),\n\t\t\t$form = $(this).parents('form'),\n\t\t\tsailthruID = $formWrapper.find('input[name=\"sub\"]').val(); // for A/B Tasty\n\n\t\t$(this).removeClass(\"disable\");\n\t\t$formWrapper.find('.error').removeClass('error');\n\n\t\t/// if email address field is blank\n\t\tif ($formWrapper.find('input[name=\"userContact\"]').val() === '' || $formWrapper.find('input[name=\"userContact\"]') === newsletter.emptyEmailMsg) {\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').addClass('error');\n\t\t\treturn false;\n\t\t} else if ($formWrapper.find('input[name=\"userContact\"]').val().indexOf('@') < 0) {\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').addClass('error');\n\t\t\treturn false;\n\t\t}\n\n\t\tnewsletter.userContact = $formWrapper.find('input[name=\"userContact\"]').val();\n\n\t\t// SailThru id starts with \"nd\" or \"am\"\n\t\tif ($formWrapper.find('input[name=\"sub\"]').val().substr(0, 2).toLowerCase() === \"nd\" || $formWrapper.find('input[name=\"sub\"]').val().substr(0, 2).toLowerCase() === \"am\") {\n\t\t\tif ($form.attr('action') !== '') {\n\t\t\t\turl = $form.attr('action');\n\t\t\t} else {\n\t\t\t\tif (window.location.href.indexOf(':8080') > -1) {\n\t\t\t\t\turl = 'http://' + window.location.hostname + ':8080' + '/managenewsletters';\n\t\t\t\t} else {\n\t\t\t\t\turl = 'https://' + window.location.hostname + '/managenewsletters';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet respMsg;\n\t\t\tif ($formWrapper.parents('.newsletterSignupModal').data('confirm') && $formWrapper.parents('.newsletterSignupModal').data('confirm') !== '') {\n\t\t\t\trespMsg = $formWrapper.parents('.newsletterSignupModal').data('confirm');\n\t\t\t} else {\n\t\t\t\tconst thistarget = (window.location.href.indexOf('7.') > -1) ? '_blank' : \"\";\n\t\t\t\trespMsg = 'Sign up completed. <a href=\"/newsletters\" target=\"' + thistarget + '\">See more Newsletters</a>.';\n\t\t\t}\n\n\t\t\t// build the input fields object\n\t\t\tconst postData = {};\n\t\t\t$.each($form.serializeArray(), function (i, field) {\n\t\t\t\tpostData[field.name] = field.value;\n\t\t\t});\n\t\t\tpostData.userContact = newsletter.escapeHTML(newsletter.userContact);\n\t\t\tpostData.list = $formWrapper.find('input[name=\"sub\"]').val();\n\t\t\tpostData.origin = $formWrapper.find('input[name=\"origin\"]').val();\n\t\t\tpostData.site = $formWrapper.find('input[name=\"site\"]').val();\n\t\t\tif (!!postData.origin) {} else {\n\t\t\t\tpostData.origin = \"newsday\";\n\t\t\t}\n\n\t\t\tif ($formWrapper.find('input[name=\"email\"]').val() !== '') {\n\t\t\t\tpostData.search_token = '';\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t$.ajax({\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\turl: url,\n\t\t\t\t\tdata: postData,\n\t\t\t\t\tdataType: \"json\",\n\t\t\t\t\tcache: false,\n\t\t\t\t\tsuccess: function (data) {\n\t\t\t\t\t\tif (!!data && data.response === \"{ok=true}\") { // Cheetahmail response \"OK\", SailThru response \"{ok=true}\"\n\t\t\t\t\t\t\t$form.siblings('.signupSuccess').html(\"<p>\" + respMsg + \"</p>\").show();\n\t\t\t\t\t\t\t$formWrapper.parent('form').remove();\n\n\t\t\t\t\t\t\tnewsletter.setCookie(\"HSSnlSignUpID\", sailthruID, 90); // for A/B Tasty to check if the user has already signed up\n\n\t\t\t\t\t\t\t/* only from newsday - there are other forms outside newsday not passing origin */\n\t\t\t\t\t\t\tif (postData.origin === \"newsday\") {\n\t\t\t\t\t\t\t\twindow.nlname = postData.list;\n\t\t\t\t\t\t\t\t_satellite.track(\"nlsuccess\");\n\t\t\t\t\t\t\t\tif (navigator.cookieEnabled && window.location.hostname.indexOf('.newsday.com') >= 0) {\n\t\t\t\t\t\t\t\t\tdocument.cookie = \"newsletterSignupEmail=\" + polopoly.base64.stringEncode(postData.userContact) + \";domain=.newsday.com;path=/\";\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (postData.site === \"connext\") {\n\t\t\t\t\t\t\t\tif (navigator.cookieEnabled && ndGlobal.site === \"newsday\") {\n\t\t\t\t\t\t\t\t\twindow.nlname = postData.list;\n\t\t\t\t\t\t\t\t\t_satellite.track(\"nlsuccess\");\n\t\t\t\t\t\t\t\t\tdate = new Date();\n\t\t\t\t\t\t\t\t\tdate.setTime(date.getTime() + (365 * 24 * 60 * 60 * 1000));\n\t\t\t\t\t\t\t\t\texpires = \"; expires=\" + date.toGMTString();\n\t\t\t\t\t\t\t\t\tdocument.cookie = \"c_ecapture=true;domain=.newsday.com;\" + expires + \";path=/\";\n\t\t\t\t\t\t\t\t\tdocument.cookie = \"c_newsletterSignupEmail=\" + polopoly.base64.stringEncode(postData.userContact) + \";domain=.newsday.com;path=/\";\n\n\t\t\t\t\t\t\t\t\t/* newsletter-data */\n\t\t\t\t\t\t\t\t\tvar newsletter_name = window.nlname;\n\t\t\t\t\t\t\t\t\tvar newsletter_user = postData.userContact;\n\t\t\t\t\t\t\t\t\tvar action_name = _satellite.getVar('mg2 action name');\n\t\t\t\t\t\t\t\t\tvar offers = [\n\t\t\t\t\t\t\t\t\t\t{ offerName: newsletter_name, offerId: newsletter_name, campaign: action_name }\n\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\tnewsletter.matherPostNewsletterEvent({ action: 'signup_completed', offers: offers }, { email: newsletter_user });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//if (_satellite.getVar('content type') !== \"front\") {Connext.Run();}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if ((!!data && data.response === \"Invalid email: \" + newsletter.userContact) || (!!data && data.response === \"err:email:illegal\")) {\n\t\t\t\t\t\t\t// invalid email address response from SailThru\n\t\t\t\t\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (err) {\n\t\t\t\tconsole.log(\"Error signing up. \" + err.message);\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.log('You need to set up the correct SailThru id.');\n\t\t}\n\t}).on('focus', '.newsletterSignupModal :input[name=\"userContact\"]', function () {\n\t\t$(this).removeClass('error').find('.error').removeClass('error');\n\t\tif ($(this).val() === newsletter.emptyEmailMsg) {\n\t\t\t$(this).val('');\n\t\t}\n\t}).on('keyup', '.newsletterSignupModal form :input[name=\"userContact\"]', function () {\n\t\tif ($(this).val().indexOf('@')) {\n\t\t\t$(this).parent('.formBorderModal').siblings('a.btn').removeClass(\"disable\");\n\t\t}\n\t}).on('keypress', '.newsletterSignupModal form :input[name=\"userContact\"]', function (e) {\n\t\t// return key hit\n\t\tif (e.which === 13) {\n\t\t\t$(this).parent('.formBorderModal').siblings('a.btn').click();\n\t\t\treturn false;\n\t\t}\n\t});\n\n});\n\n/*$(document).on(\"onNotAuthorized\", function() {\n    $(\".ab_widget_container_popin-image\").hide();\n});*/",targetingMode:"waituntil",dynamicTrafficModulation:50,dynamicTestedTraffic:100,priority:0,isAsync:!1,heatmap:!1,size:8,mutationObserverEnabled:!1,scopes:{urlScope:[{include:!0,condition:10,value:"/sports/high-school"},{include:!1,condition:10,value:"projects.newsday"},{include:!1,condition:10,value:"ace-stage.newsday.com"},{include:!1,condition:10,value:"local.newsday.com"}]},widgets:[{id:"c8d3070c-1fc7-48cd-83cd-5037d5cf2d9d",version:"3.1",config:'{"actiontracking":[{"name":"More than 5 seconds","from":5}]}',name:"@abtasty/time-spent-on-page"}],actionTrackings:{mousedown:[{name:"Email Input",selector:"#nl-modal form div .form-control.email-enter"},{name:"Sign Up",selector:"#nl-modal form a.btn"}]},variations:{877833:{id:877833,name:"HS Sports Modal w/Img",traffic:100,masterVariationId:0,modifications:[{id:3306674,selector:"#ab_widget_container_popin-image_6f561765_707098 .popinimage_container_6f561765_707098 .popin_text_container h2",type:"editStyleCSS",value:'{"font-weight":"900!important","margin-top":"12px!important","margin-bottom":"32px!important","margin":"12px 0px 32px 0px!important","font-size":"22px!important","padding-right":"0!important","padding-left":"0!important","padding":"0!important","width":"auto!important","min-width":"none!important","height":"0px!important","min-height":"none!important","padding-top":"0!important","padding-bottom":"0!important"}'},{id:3306675,selector:"",type:"addCSS",value:".modal-open .ab_widget_container_popin-image {display:none!importantimportant;}\nh2.popin_img_title {\n    letter-spacing: -0.03em;\n}\n\n#nl-modal {\nwhite-space: initial;\npadding:0 22px 22px;\n}\n\n#nl-modal form {\n    margin: 0;\n}\n\n#nl-modal .btn {\n    width: 100%;\n    margin:12px 0;\n}\n\ninput.form-control.email-enter {\n    border-radius: 6px;\n    padding: 12px;\n}\n\n.privacy-link {\n    background: none!important;\n    border: none!important;\n    color: #0076be!important;\n    font-weight:normal!important;\n    font-size: 12px!important;\n    text-decoration:underline;\n    fill: #0076be!important;\n    -webkit-text-fill-color: #0076be!important;\n    \n}\n\n#nl-modal p.disclaimer {\n    font-size: 12px!important;\n   \n}\n\n#nl-modal .signupSuccess {\n    margin-bottom: 22px;\n}\n\n#nl-modal input.error{\n    border-color: #ebccd1;\n    background: #f2dede;\n}\n\n\n@media (max-width:400px) {\n    body #ab_widget_container_popin-image_6f561765_707098 .ab_widget_container_popin-image_content {\n    max-width: none!important;\n    width: 98%;\n}\n#nl-modal .signupSuccess a {margin-top:6px;}\n}"},{id:3306676,selector:"#ab_widget_container_popin-image_6f561765_707098 .ab_widget_container_popin-image_content .popinimage_container_6f561765_707098 .popin_text_container",type:"editStyleCSS",value:'{"width":"100%!important","min-width":"none!important","height":"67%!important","min-height":"none!important","padding-right":"12px!important","padding-left":"12px!important","padding":"0px 12px 0px 12px!important"}'}],widgets:[{id:"6f561765-cc38-4037-bfc0-aa4461ec5963",version:"1.2",config:'{"layout":"popin","contentLayout":"top","textImageRatio":50,"autoWidth":false,"popinPercentWidth":40,"popinPixelsWidth":400,"widthUnit":"px","autoHeight":true,"popinPercentHeight":50,"popinPixelsHeight":344,"heightUnit":"vh","popinPosition":[{"x":1,"y":1}],"zindex":"9999","zindexCustom":1,"image":"https://editor-assets.abtasty.com/47583/60898c5b78f821619627099.jpg","isTitle":true,"title":"Get the HS Sports Newsletter","textContent":"Get scores, photos, and our picks for players of the week. \\n\\n<div id=\\"nl-modal\\" class=\\"newsletterSignupModal\\" data-confirm=\\"\\">\\n  <form id=\\"subscribeForm\\" action=\\"\\" method=\\"POST\\">\\n      <div class=\\"formBorderModal\\">\\n      <input type=\\"text\\" class=\\"form-control email-enter\\" name=\\"userContact\\" value=\\"\\" placeholder=\\"Email address\\" required=\\"required\\">\\n      <input type=\\"hidden\\" name=\\"sub\\" value=\\"ND_edit_high_school_sports_masterlist\\">\\n      <input name=\\"requestType\\" type=\\"hidden\\" value=\\"new_subscription\\" />\\n      <input name=\\"responseType\\" type=\\"hidden\\" value=\\"json\\" />\\n      <input name=\\"version\\" type=\\"hidden\\" value=\\"2\\" />\\n      <input name=\\"confirmationEmail\\" type=\\"hidden\\" value=\\"\\" />\\n      <input name=\\"email\\" type=\\"hidden\\" value=\\"\\" />\\n      <input name=\\"grc-response\\" type=\\"hidden\\" value=\\"verified\\" />\\n      <input name=\\"nsource\\" type=\\"hidden\\" value=\\"A\\" />\\n      <input name=\\"origin\\" type=\\"hidden\\" value=\\"sailthru\\" />\\n      <input name=\\"site\\" type=\\"hidden\\" value=\\"connext\\" />\\n      </div>\\n    <a class=\\"btn disable\\" href=\\"#\\">Sign up</a>\\n  </form>\\n  <div class=\\"signupSuccess\\"></div>\\n  <p class=\\"disclaimer\\">By signing up, you agree to our <a class=\\"privacy-link\\" href=\\"https://www.newsday.com/privacy\\" target=\\"blank\\">privacy policy</a></p>\\n</div>","linkType":false,"buttonText":"SIGN UP","redirectionUrl":"https://stage.newsday.com","openInNewTab":false,"titleTextAlign":"center","titleTextColor":"rgba(0, 0, 0, 1)","titleFontName":"inherit","titleFontStyle":"font-weight: bold !important;","titleFontSize":24,"textAlign":"center","textColor":"rgba(57, 57, 57, 1)","fontName":"inherit","fontStyle":"font-style: normal !important; font-weight: normal;","fontSize":16,"buttonsBorderWidth":8,"buttonsBorderColor":"rgba(39, 97, 158, 1)","buttonsBorderRadius":6,"buttonsBackgroundColor":"rgba(39, 97, 158, 1)","buttonsTextColor":"rgba(247, 247, 247, 1)","buttonsAlign":"fill","buttonsFontName":"inherit","buttonsFontStyle":"font-weight: bold !important;","buttonsFontSize":16,"containerMargin":[{"top":0,"left":0,"bottom":0,"right":0}],"containerPadding":[{"top":0,"right":0,"bottom":22,"left":0}],"backgroundColor":"rgba(247, 247, 247, 1)","isBackgroundImage":false,"backgroundImage":"https://widgets-images.abtasty.com/widgets-default-image.png","backgroundSize":"cover","backgroundPosition":"center","backgroundRepeat":false,"dropShadow":true,"dropShadowColor":"rgba(57, 57, 57, 0.25);","dropShadowBlur":10,"borderWidth":2,"borderColor":"rgba(255, 255, 255, 1)","borderRadius":0,"overlay":true,"overlayColor":"rgba(0, 0, 0, 0.6)","overlayClickable":true,"closeButton":true,"closeButtonPosition":"in","closeButtonSize":26,"closeButtonColor":"rgba(255, 255, 255, 1)","closeButtonBackgroundColor":"rgba(0, 0, 0, 1)","closeButtonBorderRadius":50,"closeButtonBorderWidth":8,"closeButtonBorderColor":"rgba(0, 0, 0, 1)","triggerEvent":"exitIntent","triggerEventClick":"body","triggerEventElementVisible":"body","triggerEventCustomScript":"/* In this example snippet, the widget will be triggered as soon as any scroll is detected.\\nCreate your own by resolving resolve() with true (which does trigger) or false (which doesn\'t trigger) */\\n\\nfunction launchIfScroll() {\\n\\treturn new Promise(resolve => {\\n\\t\\tdocument.addEventListener(\'scroll\', () => resolve(true), {once: true});\\n\\t});\\n}\\n\\nconst result = await launchIfScroll();\\nreturn resolve(result);","isOncePerPageTrigger":true,"triggerEventReengageDelay":10,"triggerEventDelay":0,"autoHide":true,"timeHide":2,"displayRecurrence":"session","displayRecurrence_day":5,"displayRecurrence_week":2,"displayRecurrence_month":1,"closingRecurrence":"week","closingRecurrence_day":5,"closingRecurrence_week":3,"closingRecurrence_month":1,"validationRecurrence":"everytime","validationRecurrence_day":5,"validationRecurrence_week":2,"validationRecurrence_month":1}',name:"@abtasty/popin-image"}]}},audienceTrigger:{name:"Audience of the account47583",id:"e14c387b-db05-486d-ad16-4e3ce3818303",targeting_groups:[{position:0,id:"f46f6f89-d306-4980-a1ae-0a2d2f8f3014",targetings:[{id:"5e2562a4-8b47-455b-9114-de214d794b04",operator:"auto",position:0,targeting_type:40,mutationObserverEnabled:!1,conditions:[{id:"ae8f6bb6-8daa-46be-98ea-de68882c7c98",value:"var showPopup = false;\nif (!document.cookie.match(\"HSSnlSignUpID=\")) {\n\tshowPopup = true;\n\thj('trigger', 'hotjar_record');\n}\nreturn showPopup && (window.nd_user.is_logged_in || window.location.pathname === \"/sports/high-school\")",isAsync:!1}]},{id:"b6249657-513a-48a4-874b-7a4eac0e5c2c",operator:"auto",position:1,targeting_type:51,mutationObserverEnabled:!1,conditions:[{id:"4a8c6019-a920-4115-ac7a-739a181dcf91",condition:10,value:"/sports/high-school",count:2,include:!0},{id:"98e7ded5-9d1e-468b-94eb-2b0e7673899d",condition:10,value:"projects.newsday",count:2,include:!1}]}]}],is_segment:!1},additionalType:""},707575:{id:707575,name:"newsletter toaster (Business)",traffic:100,type:"ab",sub_type:"ab",parentID:0,targetingMode:"fastest",dynamicTrafficModulation:50,dynamicTestedTraffic:100,priority:0,isAsync:!1,heatmap:!1,size:16,mutationObserverEnabled:!1,scopes:{urlScope:[{include:!1,condition:10,value:"/services"},{include:!0,condition:10,value:"/business"},{include:!1,condition:10,value:"ace-stage.newsday.com"},{include:!1,condition:10,value:"local.newsday.com"}]},actionTrackings:{mousedown:[{name:"Subscribe Button",selector:"#ab_widget_container_promotional-banner_0aa7feb2_707575 .toasterInside form a"}]},variations:{878455:{id:878455,name:"Business newsletter toaster",traffic:100,masterVariationId:0,modifications:[{id:3309218,selector:"",type:"addCSS",value:".fixed-bottom {position: fixed!important; bottom: 0!important;width:100%;z-index:5;margin:0;padding:0;border:0;}\n\n.toasterInside{\n\tdisplay: flex !important;\n  \twidth: 100%;\n  \tjustify-content: center;\n  \talign-items: center;\n  \n}\n\n.toasterInside > div:first-child{\n\ttext-align: left !important;\n  \tfont-size: 18px;\n  \tmargin-right: 50px;\n}\n\n.toasterInside > div:first-child strong{\n\tfont-size: 36px;\n  \tdisplay: block;\n  \tmargin-bottom: 7px !important;\n}\n\n.toasterInside form{\n\tdisplay: flex;\n  \tjustify-content: center;\n  \theight: fit-content !important;\n}\n\n.toasterInside form a {\n\tborder: none !important;\n  \tmargin: 0 !important;\n    border-top-left-radius: 0px !important;\n    border-bottom-left-radius: 0px !important;\n  \twidth: 130px !important;\n    display: flex !important;\n    justify-content: center !important;\n    flex-direction: column !important;\n  \tfont-size: 17px !important;\n  \tbackground-color: #8ccafe !important;\n  \tcolor: #023965 !important;\n  \t-webkit-text-fill-color: #023965 !important;\n  \tmax-width: unset !important;\n}\n\n.toasterInside form div input{\n\tborder: none;\n    border-top-left-radius: 6px;\n    border-bottom-left-radius: 6px;\n    color: black;\n    -webkit-text-fill-color: black;\n \twidth: 300px;\n    font-size: 17px;\n  \tpadding: 12px !important;\n}\n\n.ab_widget_container_promotional-banner_content .signupSuccess p{\n\ttext-align: center !important;\n  \tmax-width: unset !important;\n}\n\n.ab_widget_container_promotional-banner_content{\n\toverflow: hidden\n}\n\n.ab_widget_container_promotional-banner_content .moreNL{\n\tmax-width: unset !important;\n  \tmargin: 11px 0 0 0 !important;\n  \tdisplay: block;\n}\n\n.promotionalbanner_container_0aa7feb2_707575{\n\tposition: relative;\n  \tz-index: 1;\n}\n.ab_widget_container_promotional-banner_close_button{\n\tz-index: 2;\n}\n#ab_widget_container_promotional-banner_0aa7feb2_707575 .ab_widget_container_promotional-banner_content::after{\n\tcontent: '';\n    background-color: #003965;\n  \tborder: 5px solid #8ccbff;\n    position: absolute;\n    left: calc(50% + -33px);\n    margin-left: -500px;\n    width: 1100px;\n    height: 10000px;\n    vertical-align: middle;\n    top: 50%;\n    margin-top: -5000px;\n    transform: rotate(\n22.5deg\n);\n}\n\n\n@media (max-width:750px) {\nBODY .abtasty-banner-wrapper {\n    display: none!important;\n}\n}\n\n@media (max-width: 1250px) {\nBODY #ab_widget_container_promotional-banner_0aa7feb2_707575 {\n    display: none;\n}\n}"},{id:3309220,selector:"#ab_widget_container_promotional-banner_b3f2d467_707575 .ab_widget_container_promotional-banner_content .MG2login.active",type:"customScriptNew",oldValue:'setTimeout(function () { \nvar loginLink = $(".MG2login");\nconsole.warn("bigtasty 6");\n}, 1500);'},{id:3389460,selector:"",type:"customScriptNew",oldValue:"const newsletter = {\n\temptyEmailMsg: 'Enter a valid email address!',\n\n\tmatherPostNewsletterEvent: (event, options) => {\n\t\t(window._matherq = window._matherq || []).push(['newsletterEvent', event, options]);\n\t},\n\n\tescapeHTML(str) { // prevent SQL injection measurement\n\t\tif (str !== undefined) {\n\t\t\tstr = str.replace(/</gi, '&lt;').replace(/>/gi, '&gt;').replace(/\"/g, '&quot;');\n\t\t}\n\t\treturn str;\n\t},\n\n\tsetCookie: (name, value, days) => {\n\t\tlet expires;\n\t\tif (days) {\n\t\t\tvar date = new Date();\n\t\t\tdate.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n\t\t\texpires = \"; expires=\" + date.toGMTString();\n\t\t} else {\n\t\t\texpires = \"\";\n\t\t}\n\t\tdocument.cookie = encodeURIComponent(name) + \"=\" + encodeURIComponent(value) + expires + \"; path=/\";\n\t}\n};\n\n$(() => {\n\n\tif (typeof nd_user !== \"undefined\" && typeof nd_user.info.get(\"email\") !== \"undefined\") {\n\t\tnewsletter.userContact = nd_user.info.get(\"email\");\n\t\t$('.newsletterSignupToaster #subscribeForm :input[name=\"userContact\"]').val(newsletter.userContact);\n\t\t$('.unsubContainer .moduleBody p span').html(newsletter.userContact);\n\t}\n      \n\t$('body').on('click', '.toasterInside form a.btn', function (e) {\n\t\te.preventDefault();\n\t\tlet $formWrapper = $(this).siblings('.formBorderModal'),\n\t\t\t$form = $(this).parents('form'),\n\t\t\tsailthruID = $formWrapper.find('input[name=\"sub\"]').val(); // for A/B Tasty\n\n\t\t$(this).removeClass(\"disable\");\n\t\t$formWrapper.find('.error').removeClass('error');\n\n\t\t/// if email address field is blank\n\t\tif ($formWrapper.find('input[name=\"userContact\"]').val() === '' || $formWrapper.find('input[name=\"userContact\"]') === newsletter.emptyEmailMsg) {\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').addClass('error');\n\t\t\treturn false;\n\t\t} else if ($formWrapper.find('input[name=\"userContact\"]').val().indexOf('@') < 0) {\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').addClass('error');\n\t\t\treturn false;\n\t\t}\n\n\t\tnewsletter.userContact = $formWrapper.find('input[name=\"userContact\"]').val();\n\n\t\t// SailThru id starts with \"nd\" or \"am\"\n\t\tif ($formWrapper.find('input[name=\"sub\"]').val().substr(0, 2).toLowerCase() === \"nd\" || $formWrapper.find('input[name=\"sub\"]').val().substr(0, 2).toLowerCase() === \"am\") {\n\t\t\tif ($form.attr('action') !== '') {\n\t\t\t\turl = $form.attr('action');\n\t\t\t} else {\n\t\t\t\tif (window.location.href.indexOf(':8080') > -1) {\n\t\t\t\t\turl = 'http://' + window.location.hostname + ':8080' + '/managenewsletters';\n\t\t\t\t} else {\n\t\t\t\t\turl = 'https://' + window.location.hostname + '/managenewsletters';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet respMsg;\n\t\t\tif ($formWrapper.parents('.toasterInside').data('confirm') && $formWrapper.parents('.toasterInside').data('confirm') !== '') {\n\t\t\t\trespMsg = $formWrapper.parents('.toasterInside').data('confirm');\n\t\t\t} else {\n\t\t\t\tconst thistarget = (window.location.href.indexOf('7.') > -1) ? '_blank' : \"\";\n\t\t\t\trespMsg = 'Sign up completed. <a class=\"moreNL\" href=\"/newsletters\" target=\"' + thistarget + '\">See more Newsletters</a>';\n\t\t\t}\n\n\t\t\t// build the input fields object\n\t\t\tconst postData = {};\n\t\t\t$.each($form.serializeArray(), function (i, field) {\n\t\t\t\tpostData[field.name] = field.value;\n\t\t\t});\n\t\t\tpostData.userContact = newsletter.escapeHTML(newsletter.userContact);\n\t\t\tpostData.list = $formWrapper.find('input[name=\"sub\"]').val();\n\t\t\tpostData.origin = $formWrapper.find('input[name=\"origin\"]').val();\n\t\t\tpostData.site = $formWrapper.find('input[name=\"site\"]').val();\n\t\t\tif (!!postData.origin) {} else {\n\t\t\t\tpostData.origin = \"newsday\";\n\t\t\t}\n\n\t\t\tif ($formWrapper.find('input[name=\"email\"]').val() !== '') {\n\t\t\t\tpostData.search_token = '';\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t$.ajax({\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\turl: url,\n\t\t\t\t\tdata: postData,\n\t\t\t\t\tdataType: \"json\",\n\t\t\t\t\tcache: false,\n\t\t\t\t\tsuccess: function (data) {\n\t\t\t\t\t\tif (!!data && data.response === \"{ok=true}\") { // Cheetahmail response \"OK\", SailThru response \"{ok=true}\"\n\t\t\t\t\t\t\t$form.siblings('.signupSuccess').html(\"<p>\" + respMsg + \"</p>\").show();\n\t\t\t\t\t\t\t$formWrapper.parent('form').remove();\n\n\t\t\t\t\t\t\tnewsletter.setCookie(\"BTnlSignUpID\", sailthruID, 90); // for A/B Tasty to check if the user has already signed up\n\n\t\t\t\t\t\t\t/* only from newsday - there are other forms outside newsday not passing origin */\n\t\t\t\t\t\t\tif (postData.origin === \"newsday\") {\n\t\t\t\t\t\t\t\twindow.nlname = postData.list;\n\t\t\t\t\t\t\t\t_satellite.track(\"nlsuccess\");\n\t\t\t\t\t\t\t\tif (navigator.cookieEnabled && window.location.hostname.indexOf('.newsday.com') >= 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdocument.cookie = \"newsletterSignupEmail=\" + window.btoa(postData.userContact) + \";domain=.newsday.com;path=/\";\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (postData.site === \"connext\") {\n\t\t\t\t\t\t\t\tif (navigator.cookieEnabled && ndGlobal.site === \"newsday\") {\n\t\t\t\t\t\t\t\t\twindow.nlname = postData.list;\n\t\t\t\t\t\t\t\t\t_satellite.track(\"nlsuccess\");\n\t\t\t\t\t\t\t\t\tdate = new Date();\n\t\t\t\t\t\t\t\t\tdate.setTime(date.getTime() + (365 * 24 * 60 * 60 * 1000));\n\t\t\t\t\t\t\t\t\texpires = \"; expires=\" + date.toGMTString();\n\t\t\t\t\t\t\t\t\tdocument.cookie = \"c_ecapture=true;domain=.newsday.com;\" + expires + \";path=/\";\n\t\t\t\t\t\t\t\t\tdocument.cookie = \"c_newsletterSignupEmail=\" + window.btoa(postData.userContact) + \";domain=.newsday.com;path=/\";\n\n\t\t\t\t\t\t\t\t\t/* newsletter-data */\n\t\t\t\t\t\t\t\t\tvar newsletter_name = window.nlname;\n\t\t\t\t\t\t\t\t\tvar newsletter_user = postData.userContact;\n\t\t\t\t\t\t\t\t\tvar action_name = _satellite.getVar('mg2 action name');\n\t\t\t\t\t\t\t\t\tvar offers = [\n\t\t\t\t\t\t\t\t\t\t{ offerName: newsletter_name, offerId: newsletter_name, campaign: action_name }\n\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\tnewsletter.matherPostNewsletterEvent({ action: 'signup_completed', offers: offers }, { email: newsletter_user });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//if (_satellite.getVar('content type') !== \"front\") {Connext.Run();}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if ((!!data && data.response === \"Invalid email: \" + newsletter.userContact) || (!!data && data.response === \"err:email:illegal\")) {\n\t\t\t\t\t\t\t// invalid email address response from SailThru\n\t\t\t\t\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (err) {\n\t\t\t\tconsole.log(\"Error signing up. \" + err.message);\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.log('You need to set up the correct SailThru id.');\n\t\t}\n\t}).on('focus', '.toasterInside :input[name=\"userContact\"]', function () {\n\t\t$(this).removeClass('error').find('.error').removeClass('error');\n\t\tif ($(this).val() === newsletter.emptyEmailMsg) {\n\t\t\t$(this).val('');\n\t\t}\n\t}).on('keyup', '.toasterInside form :input[name=\"userContact\"]', function () {\n\t\tif ($(this).val().indexOf('@')) {\n\t\t\t$(this).parent('.formBorderModal').siblings('a.btn').removeClass(\"disable\");\n\t\t}\n\t}).on('keypress', '.toasterInside form :input[name=\"userContact\"]', function (e) {\n\t\t// return key hit\n\t\tif (e.which === 13) {\n\t\t\t$(this).parent('.formBorderModal').siblings('a.btn').click();\n\t\t\treturn false;\n\t\t}\n\t});\n\n});\n\n/*$(document).on(\"onNotAuthorized\", function() {\n    $(\".ab_widget_container_popin-image\").hide();\n});*/"},{id:3468974,selector:"#ab_widget_container_promotional-banner_0aa7feb2_707575 .ab_widget_container_promotional-banner_content button",type:"editAttributes",value:'[{"action":"edit","attributeName":"class","attributeValue":"ab_widget_container_promotional-banner_close_button"},{"action":"edit","attributeName":"data-abtasty-actionnable","attributeValue":"true"},{"action":"edit","attributeName":"aria-label","attributeValue":"Close"}]'}],widgets:[{id:"0aa7feb2-ab1e-4b61-a8cc-b2675789c815",version:"1.1",config:'{"layout":"free","elementReferrer":"#toaster-wrap","referrerInsertType":"afterbegin","message":"<div class=\'toasterInside\'>\\n    <div><strong>Get the Business Newsletter.</strong>\\n        Stay in the know on jobs, retail, and all things business across Long Island.</div>\\n\\n    <form action=\\"\\" method=\\"POST\\">\\n        <div class=\\"formBorderModal\\">\\n            <input type=\\"text\\" class=\\"form-control email-enter\\" name=\\"userContact\\" value=\\"\\" placeholder=\\"Email address\\"\\n                required=\\"required\\">\\n            <input type=\\"hidden\\" name=\\"sub\\" value=\\"ND_edit_daily_business_masterlist\\">\\n            <input name=\\"requestType\\" type=\\"hidden\\" value=\\"new_subscription\\" />\\n            <input name=\\"responseType\\" type=\\"hidden\\" value=\\"json\\" />\\n            <input name=\\"version\\" type=\\"hidden\\" value=\\"2\\" />\\n            <input name=\\"confirmationEmail\\" type=\\"hidden\\" value=\\"\\" />\\n            <input name=\\"email\\" type=\\"hidden\\" value=\\"\\" />\\n            <input name=\\"grc-response\\" type=\\"hidden\\" value=\\"verified\\" />\\n            <input name=\\"nsource\\" type=\\"hidden\\" value=\\"A\\" />\\n            <input name=\\"origin\\" type=\\"hidden\\" value=\\"sailthru\\" />\\n            <input name=\\"site\\" type=\\"hidden\\" value=\\"connext\\" />\\n        </div>\\n        <a class=\\"btn disable\\" href=\\"#\\">Sign up</a>\\n    </form>\\n    <div class=\\"signupSuccess\\"></div>\\n</div>","linkType":false,"buttonText":"Sign up","buttonUrl":"https://subscribe.newsday.com/Subscribe2?sitecode=Ncom&ofrgp_id=936&returnUrl=https%3A%2F%2Fwww.newsday.com%2Fservices%2Fprofile-7.386%3Fview%3Ddcards%26clearUserState%3Dtrue","bannerUrl":"https://www.newsday.com","openInNewTab":false,"textAlign":"center","textColor":"rgba(255, 255, 255, 1)","fontName":"inherit","fontStyle":"font-weight: bold !important;","fontSize":15,"buttonsBorderWidth":2,"buttonsBorderColor":"rgba(255, 255, 255, 1)","buttonsBorderRadius":4,"buttonsBackgroundColor":"rgba(103, 196, 222, 1)","buttonsTextColor":"rgba(25, 34, 93, 1)","containerMargin":[{"top":0,"left":0,"bottom":0,"right":0}],"containerPadding":[{"top":20,"right":60,"bottom":20,"left":60}],"backgroundColor":"rgba(0, 101, 173, 1)","isBackgroundImage":false,"backgroundImage":"https://assets.projects.newsday.com/projects-uploads/uploads/2021/02/toaster-winter-trees.png","backgroundSize":"auto","backgroundPosition":"bottom right","backgroundRepeat":false,"dropShadow":false,"dropShadowColor":"rgba(57, 57, 57, 0.25);","dropShadowBlur":10,"closeButton":true,"borderWidth":0,"borderColor":"rgba(222, 236, 239, 1)","borderRadius":0,"triggerEvent":"pageLoad","triggerEventClick":"body","triggerEventElementVisible":"body","triggerEventCustomScript":"/* In this example snippet, the widget will be triggered as soon as any scroll is detected.\\nCreate your own by resolving resolve() with true (which does trigger) or false (which doesn\'t trigger) */\\n\\nfunction launchIfScroll() {\\n\\treturn new Promise(resolve => {\\n\\t\\tdocument.addEventListener(\'scroll\', () => resolve(true), {once: true});\\n\\t});\\n}\\n\\nconst result = await launchIfScroll();\\nreturn resolve(result);","isOncePerPageTrigger":true,"triggerEventReengageDelay":10,"triggerEventDelay":2,"autoHide":true,"timeHide":2,"displayRecurrence":"everytime","displayRecurrence_day":5,"displayRecurrence_week":2,"displayRecurrence_month":1,"closingRecurrence":"week","closingRecurrence_day":5,"closingRecurrence_week":2,"closingRecurrence_month":1,"validationRecurrence":"session","validationRecurrence_day":5,"validationRecurrence_week":2,"validationRecurrence_month":1}',name:"@abtasty/promotional-banner"}]}},audienceTrigger:{name:"Audience of the account47583",id:"3534a4d7-9530-4278-8ac1-6cf79eae2cca",targeting_groups:[{position:0,id:"6cd11420-ff40-40ef-9889-5fd7467b1ceb",targetings:[{id:"18946148-68a8-4910-91ce-7ac671a00b80",operator:"auto",position:0,targeting_type:40,mutationObserverEnabled:!1,conditions:[{id:"c8e4f026-a6ed-4511-8a2a-5d9e8adbcd29",value:'var showPopup = false;\nif (!document.cookie.match("BTnlSignUpID=")) {\n    showPopup = true;\n    hj(\'trigger\', \'hotjar_record\');\n}\nreturn showPopup &&\n    (\n        window.location.pathname === "/business"\n        ||\n        new Promise((resolve, reject) => {\n            const fallback = setTimeout(() => { resolve(false); }, 8 * 1000);\n            window.addEventListener("nd_mg2_onLoggedIn", e => {\n                if(nd_user.getProductID() === \'NVID\' || nd_user.getProductID() === undefined){\n                  clearTimeout(fallback);\n                  resolve(false);\n                }else{\n                  clearTimeout(fallback);\n                  resolve(true);\n                }\n            });\n            window.addEventListener("nd_mg2_onNotAuthorized", e => {\n                clearTimeout(fallback);\n                resolve(false);\n            });\n        })\n        \n    );',isAsync:!1}]},{id:"6836f0a5-a74a-4022-8db4-b6fefa2e4f0b",operator:"auto",position:1,targeting_type:51,mutationObserverEnabled:!1,conditions:[{id:"2ca9f25d-03f1-405c-970a-ade01f00ff88",condition:10,value:"/business",count:2,include:!0},{id:"2d290cb0-610f-4cf2-bea7-3869546d6fd7",condition:10,value:"/services",count:2,include:!1}]}]}],is_segment:!1},additionalType:""},709175:{id:709175,name:"newsletter toaster (Feed Me)",traffic:100,type:"ab",sub_type:"ab",parentID:0,targetingMode:"fastest",dynamicTrafficModulation:50,dynamicTestedTraffic:100,priority:0,isAsync:!1,heatmap:!1,size:15,mutationObserverEnabled:!1,scopes:{urlScope:[{include:!1,condition:10,value:"/services"},{include:!0,condition:10,value:"/lifestyle/restaurants"},{include:!1,condition:10,value:"stage.newsday.com"},{include:!1,condition:10,value:"ace-stage.newsday.com"},{include:!1,condition:10,value:"local.newsday.com"}]},actionTrackings:{mousedown:[{name:"Subscribe Button",selector:"#ab_widget_container_promotional-banner_14308875_709175 .toasterInside form a"}]},variations:{880486:{id:880486,name:"FeedMe newsletter toaster",traffic:100,masterVariationId:0,modifications:[{id:3316959,selector:"",type:"addCSS",value:".fixed-bottom {position: fixed!important; bottom: 0!important;width:100%;z-index:5;margin:0;padding:0;border:0;}\n\n.toasterInside{\n\tdisplay: flex !important;\n  \twidth: 100%;\n  \tjustify-content: center;\n  \talign-items: center;\n  \n}\n\n.toasterInside > div:first-child{\n\ttext-align: left !important;\n  \tfont-size: 18px;\n  \tmargin-right: 250px;\n}\n\n.toasterInside > div:first-child strong{\n\tfont-size: 36px;\n  \tdisplay: block;\n  \twidth: 460px !important;\n  \tmargin-bottom: 7px !important;\n}\n\n.toasterInside > div:first-child strong span{\n\tcolor: #d50332;\n  \t-webkit-text-fill-color: #d50332;\n}\n\n.toasterInside form{\n\tdisplay: flex;\n  \tjustify-content: center;\n  \theight: fit-content !important;\n}\n\n.toasterInside form a {\n\tborder: none !important;\n  \tmargin: 0 !important;\n    border-top-left-radius: 0px !important;\n    border-bottom-left-radius: 0px !important;\n  \twidth: 130px !important;\n    display: flex !important;\n    justify-content: center !important;\n    flex-direction: column !important;\n  \tfont-size: 17px !important;\n  \tbackground-color: #d50332 !important;\n  \tcolor: #fff !important;\n  \t-webkit-text-fill-color: #fff !important;\n  \tmax-width: unset !important;\n}\n\n.toasterInside form div input{\n\tborder: none;\n    border-top-left-radius: 6px !imporant;\n    border-bottom-left-radius: 6px !imporant;\n  \tborder-top-right-radius: 0px !important;\n  \tborder-bottom-right-radius: 0px !important;\n    color: black;\n    -webkit-text-fill-color: black;\n \twidth: 300px;\n    font-size: 17px;\n  \tpadding: 12px !important;\n}\n\n.ab_widget_container_promotional-banner_content .signupSuccess p{\n\ttext-align: center !important;\n  \tmax-width: unset !important;\n}\n\n.ab_widget_container_promotional-banner_content .moreNL{\n\tmax-width: unset !important;\n  \tmargin: 11px 0 0 0 !important;\n  \tdisplay: block;\n  \tborder: none !important;\n  \tbackground-color: #d50732 !important;\n  \tcolor: #fff !important;\n  \t-webkit-text-fill-color: #fff !important;\n}\n\n\n@media (max-width:750px) {\nBODY #ab_widget_container_promotional-banner_14308875_709175 {\n    display: none!important;\n}\n}\n\n@media (max-width: 1250px) {\nBODY #ab_widget_container_promotional-banner_14308875_709175 {\n    display: none;\n}\n}"},{id:3387593,selector:"",type:"customScriptNew",oldValue:"const newsletter = {\n\temptyEmailMsg: 'Enter a valid email address!',\n\n\tmatherPostNewsletterEvent: (event, options) => {\n\t\t(window._matherq = window._matherq || []).push(['newsletterEvent', event, options]);\n\t},\n\n\tescapeHTML(str) { // prevent SQL injection measurement\n\t\tif (str !== undefined) {\n\t\t\tstr = str.replace(/</gi, '&lt;').replace(/>/gi, '&gt;').replace(/\"/g, '&quot;');\n\t\t}\n\t\treturn str;\n\t},\n\n\tsetCookie: (name, value, days) => {\n\t\tlet expires;\n\t\tif (days) {\n\t\t\tvar date = new Date();\n\t\t\tdate.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n\t\t\texpires = \"; expires=\" + date.toGMTString();\n\t\t} else {\n\t\t\texpires = \"\";\n\t\t}\n\t\tdocument.cookie = encodeURIComponent(name) + \"=\" + encodeURIComponent(value) + expires + \"; path=/\";\n\t}\n};\n\n$(() => {\n\n\tif (typeof nd_user !== \"undefined\" && typeof nd_user.info.get(\"email\") !== \"undefined\") {\n\t\tnewsletter.userContact = nd_user.info.get(\"email\");\n\t\t$('.newsletterSignupToaster #subscribeForm :input[name=\"userContact\"]').val(newsletter.userContact);\n\t\t$('.unsubContainer .moduleBody p span').html(newsletter.userContact);\n\t}\n      \n\t$('body').on('click', '.toasterInside form a.btn', function (e) {\n\t\te.preventDefault();\n\t\tlet $formWrapper = $(this).siblings('.formBorderModal'),\n\t\t\t$form = $(this).parents('form'),\n\t\t\tsailthruID = $formWrapper.find('input[name=\"sub\"]').val(); // for A/B Tasty\n\n\t\t$(this).removeClass(\"disable\");\n\t\t$formWrapper.find('.error').removeClass('error');\n\n\t\t/// if email address field is blank\n\t\tif ($formWrapper.find('input[name=\"userContact\"]').val() === '' || $formWrapper.find('input[name=\"userContact\"]') === newsletter.emptyEmailMsg) {\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').addClass('error');\n\t\t\treturn false;\n\t\t} else if ($formWrapper.find('input[name=\"userContact\"]').val().indexOf('@') < 0) {\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').addClass('error');\n\t\t\treturn false;\n\t\t}\n\n\t\tnewsletter.userContact = $formWrapper.find('input[name=\"userContact\"]').val();\n\n\t\t// SailThru id starts with \"nd\" or \"am\"\n\t\tif ($formWrapper.find('input[name=\"sub\"]').val().substr(0, 2).toLowerCase() === \"nd\" || $formWrapper.find('input[name=\"sub\"]').val().substr(0, 2).toLowerCase() === \"am\") {\n\t\t\tif ($form.attr('action') !== '') {\n\t\t\t\turl = $form.attr('action');\n\t\t\t} else {\n\t\t\t\tif (window.location.href.indexOf(':8080') > -1) {\n\t\t\t\t\turl = 'http://' + window.location.hostname + ':8080' + '/managenewsletters';\n\t\t\t\t} else {\n\t\t\t\t\turl = 'https://' + window.location.hostname + '/managenewsletters';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet respMsg;\n\t\t\tif ($formWrapper.parents('.toasterInside').data('confirm') && $formWrapper.parents('.toasterInside').data('confirm') !== '') {\n\t\t\t\trespMsg = $formWrapper.parents('.toasterInside').data('confirm');\n\t\t\t} else {\n\t\t\t\tconst thistarget = (window.location.href.indexOf('7.') > -1) ? '_blank' : \"\";\n\t\t\t\trespMsg = 'Sign up completed. <a class=\"moreNL\" href=\"/newsletters\" target=\"' + thistarget + '\">See more Newsletters</a>';\n\t\t\t}\n\n\t\t\t// build the input fields object\n\t\t\tconst postData = {};\n\t\t\t$.each($form.serializeArray(), function (i, field) {\n\t\t\t\tpostData[field.name] = field.value;\n\t\t\t});\n\t\t\tpostData.userContact = newsletter.escapeHTML(newsletter.userContact);\n\t\t\tpostData.list = $formWrapper.find('input[name=\"sub\"]').val();\n\t\t\tpostData.origin = $formWrapper.find('input[name=\"origin\"]').val();\n\t\t\tpostData.site = $formWrapper.find('input[name=\"site\"]').val();\n\t\t\tif (!!postData.origin) {} else {\n\t\t\t\tpostData.origin = \"newsday\";\n\t\t\t}\n\n\t\t\tif ($formWrapper.find('input[name=\"email\"]').val() !== '') {\n\t\t\t\tpostData.search_token = '';\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t$.ajax({\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\turl: url,\n\t\t\t\t\tdata: postData,\n\t\t\t\t\tdataType: \"json\",\n\t\t\t\t\tcache: false,\n\t\t\t\t\tsuccess: function (data) {\n\t\t\t\t\t\tif (!!data && data.response === \"{ok=true}\") { // Cheetahmail response \"OK\", SailThru response \"{ok=true}\"\n\t\t\t\t\t\t\t$form.siblings('.signupSuccess').html(\"<p>\" + respMsg + \"</p>\").show();\n\t\t\t\t\t\t\t$formWrapper.parent('form').remove();\n\n\t\t\t\t\t\t\tnewsletter.setCookie(\"FMTnlSignUpID\", sailthruID, 90); // for A/B Tasty to check if the user has already signed up\n\n\t\t\t\t\t\t\t/* only from newsday - there are other forms outside newsday not passing origin */\n\t\t\t\t\t\t\tif (postData.origin === \"newsday\") {\n\t\t\t\t\t\t\t\twindow.nlname = postData.list;\n\t\t\t\t\t\t\t\t_satellite.track(\"nlsuccess\");\n\t\t\t\t\t\t\t\tif (navigator.cookieEnabled && window.location.hostname.indexOf('.newsday.com') >= 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdocument.cookie = \"newsletterSignupEmail=\" + window.btoa(postData.userContact) + \";domain=.newsday.com;path=/\";\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (postData.site === \"connext\") {\n\t\t\t\t\t\t\t\tif (navigator.cookieEnabled && ndGlobal.site === \"newsday\") {\n\t\t\t\t\t\t\t\t\twindow.nlname = postData.list;\n\t\t\t\t\t\t\t\t\t_satellite.track(\"nlsuccess\");\n\t\t\t\t\t\t\t\t\tdate = new Date();\n\t\t\t\t\t\t\t\t\tdate.setTime(date.getTime() + (365 * 24 * 60 * 60 * 1000));\n\t\t\t\t\t\t\t\t\texpires = \"; expires=\" + date.toGMTString();\n\t\t\t\t\t\t\t\t\tdocument.cookie = \"c_ecapture=true;domain=.newsday.com;\" + expires + \";path=/\";\n\t\t\t\t\t\t\t\t\tdocument.cookie = \"c_newsletterSignupEmail=\" + window.btoa(postData.userContact) + \";domain=.newsday.com;path=/\";\n\n\t\t\t\t\t\t\t\t\t/* newsletter-data */\n\t\t\t\t\t\t\t\t\tvar newsletter_name = window.nlname;\n\t\t\t\t\t\t\t\t\tvar newsletter_user = postData.userContact;\n\t\t\t\t\t\t\t\t\tvar action_name = _satellite.getVar('mg2 action name');\n\t\t\t\t\t\t\t\t\tvar offers = [\n\t\t\t\t\t\t\t\t\t\t{ offerName: newsletter_name, offerId: newsletter_name, campaign: action_name }\n\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\tnewsletter.matherPostNewsletterEvent({ action: 'signup_completed', offers: offers }, { email: newsletter_user });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//if (_satellite.getVar('content type') !== \"front\") {Connext.Run();}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if ((!!data && data.response === \"Invalid email: \" + newsletter.userContact) || (!!data && data.response === \"err:email:illegal\")) {\n\t\t\t\t\t\t\t// invalid email address response from SailThru\n\t\t\t\t\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (err) {\n\t\t\t\tconsole.log(\"Error signing up. \" + err.message);\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.log('You need to set up the correct SailThru id.');\n\t\t}\n\t}).on('focus', '.toasterInside :input[name=\"userContact\"]', function () {\n\t\t$(this).removeClass('error').find('.error').removeClass('error');\n\t\tif ($(this).val() === newsletter.emptyEmailMsg) {\n\t\t\t$(this).val('');\n\t\t}\n\t}).on('keyup', '.toasterInside form :input[name=\"userContact\"]', function () {\n\t\tif ($(this).val().indexOf('@')) {\n\t\t\t$(this).parent('.formBorderModal').siblings('a.btn').removeClass(\"disable\");\n\t\t}\n\t}).on('keypress', '.toasterInside form :input[name=\"userContact\"]', function (e) {\n\t\t// return key hit\n\t\tif (e.which === 13) {\n\t\t\t$(this).parent('.formBorderModal').siblings('a.btn').click();\n\t\t\treturn false;\n\t\t}\n\t});\n\n});\n\n/*$(document).on(\"onNotAuthorized\", function() {\n    $(\".ab_widget_container_popin-image\").hide();\n});*/"},{id:3468973,selector:"#ab_widget_container_promotional-banner_14308875_709175 .ab_widget_container_promotional-banner_content button",type:"editAttributes",value:'[{"action":"edit","attributeName":"class","attributeValue":"ab_widget_container_promotional-banner_close_button"},{"action":"edit","attributeName":"data-abtasty-actionnable","attributeValue":"true"},{"action":"edit","attributeName":"aria-label","attributeValue":"Close"}]'}],widgets:[{id:"14308875-93ba-4786-91db-df7a892a5da1",version:"1.1",config:'{"layout":"free","elementReferrer":"#toaster-wrap","referrerInsertType":"afterbegin","message":"<div class=\'toasterInside\'>\\n    <div><strong>Get the Feed<span>Me</span> Newsletter.</strong>\\n        Let us help you find the best places to eat.</div>\\n\\n    <form action=\\"\\" method=\\"POST\\">\\n        <div class=\\"formBorderModal\\">\\n            <input type=\\"text\\" class=\\"form-control email-enter\\" name=\\"userContact\\" value=\\"\\" placeholder=\\"Email address\\"\\n                required=\\"required\\">\\n            <input type=\\"hidden\\" name=\\"sub\\" value=\\"ND_edit_feed_me_masterlist\\">\\n            <input name=\\"requestType\\" type=\\"hidden\\" value=\\"new_subscription\\" />\\n            <input name=\\"responseType\\" type=\\"hidden\\" value=\\"json\\" />\\n            <input name=\\"version\\" type=\\"hidden\\" value=\\"2\\" />\\n            <input name=\\"confirmationEmail\\" type=\\"hidden\\" value=\\"\\" />\\n            <input name=\\"email\\" type=\\"hidden\\" value=\\"\\" />\\n            <input name=\\"grc-response\\" type=\\"hidden\\" value=\\"verified\\" />\\n            <input name=\\"nsource\\" type=\\"hidden\\" value=\\"A\\" />\\n            <input name=\\"origin\\" type=\\"hidden\\" value=\\"sailthru\\" />\\n            <input name=\\"site\\" type=\\"hidden\\" value=\\"connext\\" />\\n        </div>\\n        <a class=\\"btn disable\\" href=\\"#\\">Sign up</a>\\n    </form>\\n<div class=\\"signupSuccess\\"></div>\\n</div>","linkType":false,"buttonText":"Sign up","buttonUrl":"https://subscribe.newsday.com/Subscribe2?sitecode=Ncom&ofrgp_id=936&returnUrl=https%3A%2F%2Fwww.newsday.com%2Fservices%2Fprofile-7.386%3Fview%3Ddcards%26clearUserState%3Dtrue","bannerUrl":"https://www.newsday.com","openInNewTab":false,"textAlign":"center","textColor":"rgba(255, 255, 255, 1)","fontName":"inherit","fontStyle":"font-weight: bold !important;","fontSize":15,"buttonsBorderWidth":2,"buttonsBorderColor":"rgba(255, 255, 255, 1)","buttonsBorderRadius":4,"buttonsBackgroundColor":"rgba(103, 196, 222, 1)","buttonsTextColor":"rgba(25, 34, 93, 1)","containerMargin":[{"top":0,"left":0,"bottom":0,"right":0}],"containerPadding":[{"top":20,"right":60,"bottom":20,"left":60}],"backgroundColor":"rgba(0, 0, 0, 1)","isBackgroundImage":false,"backgroundImage":"https://assets.projects.newsday.com/projects-uploads/uploads/2021/02/toaster-winter-trees.png","backgroundSize":"auto","backgroundPosition":"bottom right","backgroundRepeat":false,"dropShadow":true,"dropShadowColor":"rgba(57, 57, 57, 0.25);","dropShadowBlur":10,"closeButton":true,"borderWidth":0,"borderColor":"rgba(222, 236, 239, 1)","borderRadius":0,"triggerEvent":"pageLoad","triggerEventClick":"body","triggerEventElementVisible":"body","triggerEventCustomScript":"/* In this example snippet, the widget will be triggered as soon as any scroll is detected.\\nCreate your own by resolving resolve() with true (which does trigger) or false (which doesn\'t trigger) */\\n\\nfunction launchIfScroll() {\\n\\treturn new Promise(resolve => {\\n\\t\\tdocument.addEventListener(\'scroll\', () => resolve(true), {once: true});\\n\\t});\\n}\\n\\nconst result = await launchIfScroll();\\nreturn resolve(result);","isOncePerPageTrigger":true,"triggerEventReengageDelay":10,"triggerEventDelay":2,"autoHide":true,"timeHide":2,"displayRecurrence":"everytime","displayRecurrence_day":5,"displayRecurrence_week":2,"displayRecurrence_month":1,"closingRecurrence":"week","closingRecurrence_day":5,"closingRecurrence_week":2,"closingRecurrence_month":1,"validationRecurrence":"session","validationRecurrence_day":5,"validationRecurrence_week":2,"validationRecurrence_month":1}',name:"@abtasty/promotional-banner"}]}},audienceTrigger:{name:"Audience of the account47583",id:"4e2edce2-8e56-4e5b-9ab1-9fa3a730c472",targeting_groups:[{position:0,id:"e9ae131c-67e5-4ffa-bc10-e5216df45f14",targetings:[{id:"e3564ebc-1a84-4abf-8b7f-3a2f54622d81",operator:"auto",position:0,targeting_type:40,mutationObserverEnabled:!1,conditions:[{id:"8cd62282-af40-463b-8829-4aa46cc69cb6",value:'var showPopup = false;\nif (!document.cookie.match("FMTnlSignUpID=")) {\n    showPopup = true;\n    hj(\'trigger\', \'hotjar_record\');\n}\nreturn showPopup &&\n    (\n        window.location.pathname === "/lifestyle/restaurants"\n        ||\n        new Promise((resolve, reject) => {\n            const fallback = setTimeout(() => { resolve(false); }, 8 * 1000);\n            window.addEventListener("nd_mg2_onLoggedIn", e => {\n                if(nd_user.getProductID() === \'NVID\' || nd_user.getProductID() === undefined){\n                  clearTimeout(fallback);\n                  resolve(false);\n                }else{\n                  clearTimeout(fallback);\n                  resolve(true);\n                }\n            });\n            window.addEventListener("nd_mg2_onNotAuthorized", e => {\n                clearTimeout(fallback);\n                resolve(false);\n            });\n        })\n        \n    );',isAsync:!1}]},{id:"604be56e-d594-436e-8132-af1d7d005b24",operator:"auto",position:1,targeting_type:51,mutationObserverEnabled:!1,conditions:[{id:"3b3234bf-c368-479e-9510-837b5fa47bcb",condition:10,value:"/lifestyle/restaurants",count:2,include:!0},{id:"c71f6765-4fe1-488b-88ab-6d70f1a5dcdf",condition:10,value:"/services",count:2,include:!1}]}]}],is_segment:!1},additionalType:""},713090:{id:713090,name:"React Onboarding",traffic:80,type:"ab",sub_type:"ab",parentID:0,targetingMode:"waituntil",dynamicTrafficModulation:50,dynamicTestedTraffic:100,priority:0,isAsync:!1,heatmap:!1,size:1,mutationObserverEnabled:!1,scopes:{urlScope:[{include:!0,condition:40,value:"https://stage.projects.newsday.com/long-island/onboarding/"},{include:!0,condition:40,value:"https://projects.newsday.com/long-island/onboarding/"}],ipScope:[{include:!1,to:0,range:!1,from:"2685600401"},{include:!1,to:0,range:!1,from:"1153827530"},{include:!1,to:0,range:!1,from:"1814647045"},{include:!1,to:0,range:!1,from:"1237800937"}]},actionTrackings:{mousedown:[{name:"Next Button",selector:".button-group .btn.next"},{name:"App Download - Text Me",selector:"BODY .linkTextingWidget .linkTextingInner BUTTON"},{name:"App Download - Next",selector:'[name="ob-app"].card .button-group .btn.next'},{name:"App Download - Skip",selector:'[name="ob-app"].card .button-group .btn.skip'},{name:"Topics - Next",selector:'[name="ob-topics"].card .button-group .btn.next'},{name:"Topics - Interest Links",selector:".onboarding .topics a"},{name:"Newsletters - Next",selector:'[name="ob-newsletters"].card .button-group .btn.next'},{name:"Newsletters - Skip",selector:'[name="ob-newsletters"].card .button-group .btn.skip'},{name:"Today's Paper - Link",selector:'[name="ob-eedition"].card .paper a'},{name:"Today's Paper - Next",selector:'[name="ob-eedition"].card .button-group .btn.next'},{name:"Topics - Back",selector:'[name="ob-topics"].card .back'},{name:"Newsletters - Toggle",selector:'[name="ob-newsletters"].card .switch'},{name:"Newsletters - See More",selector:'[name="ob-newsletters"].card a.nl-showmore'},{name:"Newsletters - Back",selector:'[name="ob-newsletters"].card .back'},{name:"End - Continue",selector:".btn.return-home"},{name:"App Download - iOS Apple Store",selector:".app-download .linktext .badge-app-store"},{name:"App Download - Android Google Play",selector:".app-download .linktext  .badge-google-play"},{name:"Newsday Live - Event Link",selector:".onboarding .event"},{name:"Newsday Live - Next",selector:'[name="ob-promos"].card .button-group .btn.next'},{name:"Newsday Live - Back",selector:'[name="ob-promos"].card .btn.back'},{name:"End - Article Link",selector:".onboarding .return-article"},{name:"Topics - Skip",selector:'[name="ob-topics"].card .button-group .btn.skip'}]},variations:{885535:{id:885535,name:"Simple - Original",traffic:20,masterVariationId:0,modifications:[{id:3334807,selector:"",type:"customScriptNew",oldValue:"window.order = ['welcome', 'app', 'topics', 'newsletter', 'eedition', 'optins', 'final'];\nwindow.varName=\"simple\";\nwindow.abTastyListener();"},{id:3334808,selector:"",type:"addCSS",value:""}],widgets:[{id:"b6b6441c-05d0-4ece-9468-30d43b097607",version:"2.1",config:'{"selector":"BODY MAIN ARTICLE DIV.card:nth-child(2)"}',name:"@abtasty/virtual-click"}]},885536:{id:885536,name:"Variation 1",traffic:20,masterVariationId:0,modifications:[{id:3334809,selector:"",type:"customScriptNew",oldValue:"window.order = ['welcome', 'appV1', 'topicsV1', 'newsletterV1', 'eeditionV1', 'optins', 'finalV1'];\nwindow.varName=\"V1\";\nwindow.abTastyListener();"}]},885537:{id:885537,name:"Variation 2",traffic:20,masterVariationId:0,modifications:[{id:3334810,selector:"",type:"customScriptNew",oldValue:"window.order = ['welcome', 'app', 'topics', 'newsletter', 'optins', 'finalV2'];\nwindow.varName=\"V2\";\nwindow.abTastyListener();"}]},885538:{id:885538,name:"Variation 3",traffic:20,masterVariationId:0,modifications:[{id:3334811,selector:"",type:"customScriptNew",oldValue:"window.order = ['welcome', 'appV1', 'topicsV1', 'newsletterV1', 'optins', 'finalV1'];\nwindow.varName=\"V3\";\nwindow.abTastyListener();"}]}},audienceSegment:{name:"Users without deals flow cookie",id:"dde47768-ad32-4de9-921c-13abf16300eb",targeting_groups:[{position:0,id:"d4ec677d-5b7d-4878-b8a7-f32103dd1c4f",targetings:[{id:"359b4549-2e69-4495-9e2c-eba945e44d9e",operator:"or",position:0,targeting_type:20,mutationObserverEnabled:!1,conditions:[{id:"2cfa8a3c-c7c0-46fe-b128-b85b0a1d8caa",name:"c_deals_onboard",value:null,include:!1}]}]}],is_segment:!0},additionalType:""},713624:{id:713624,name:"Orange Subscribe Button (desktop)",traffic:100,type:"subsegment",parentID:713625,globalCode:'$(document).on({\n\tmg2LoginSuccess: function mg2LoginSuccess(e) {\n\t\tconsole.log("log in successful, hidding btn");\n        if (polopoly.user.isLoggedIn() === false) {\n            console.log("reversing");\n            !polopoly.user.isLoggedIn();\n            $(".logStatus .MG2Subscribe").hide();\n        }\n\t}\n});',targetingMode:"fastest",dynamicTrafficModulation:50,dynamicTestedTraffic:100,priority:0,isAsync:!1,heatmap:!1,size:2,mutationObserverEnabled:!1,scopes:{urlScope:[{include:!0,condition:10,value:"newsday.com"},{include:!1,condition:10,value:"stage.projects.newsday.com"},{include:!1,condition:10,value:"ace-stage.newsday.com"},{include:!1,condition:10,value:"local.newsday.com"}]},actionTrackings:{mousedown:[{name:"Subscribe Button Click",selector:"#masthead A.tBtn"}]},variations:{886176:{id:886176,name:"Control - Jan 21 Winner",traffic:100,masterVariationId:0,modifications:[{id:3336960,selector:"#masthead .headR .logStatus a.tBtn.subacct",type:"editHtml",value:'<a xmlns="http://www.w3.org/1999/xhtml" href="https://projects.newsday.com/services/subscribe-offers" class="MG2Subscribe tBtn subacct active" data-rdy="true"><em>SUBSCRIBE</em><span>$1 FOR 5 MONTHS</span></a>'},{id:3336961,selector:"",type:"addCSS",value:"#masthead .tBtn span {\n    display: block;\n    font-size: 0.7rem;\n    margin:0 -2px;\n}\n\n.headR a.logInbtn {top:-2px;position:relative;}\n\n.headR .tBtn {\n    text-align: center;\n    border-radius: 0;\n    background: #F7A008;\n    padding: 8px 18px;\n    color: #454545;\n    height:48px;\n    min-width: 130px;\n}\n\n#masthead .tBtn em {\n    font-size: 0.9rem;\n    letter-spacing: -0.02em;\n    font-weight: 900;\n}\n\n@keyframes pulse {\n  0% {\n    background: #fcd000;\n  }\n  100% {\n    background: #fcd000;\n  }\n}"}]}},additionalType:"patch"},713625:{id:713625,name:"Orange Subscribe Button (desktop)",type:"mastersegment",sub_type:"sp",parentID:0,priority:0,children:[713624],variations:{886177:{id:886177,name:"Variation 1"}}},741714:{id:741714,name:"Mobile toasters (test 2)",traffic:100,type:"ab",sub_type:"ab",parentID:0,globalCode:"window.addEventListener('nd_user_data_populated', (e) => {\nvar toasterHide = document.createElement('style');\n  toasterHide.innerHTML = `\n  .ab_widget_container_promotional-banner, .ab_widget_container_popin-simple {\n  display: none !important;\n  }\n  `;\n  document.head.appendChild(toasterHide);\n});",targetingMode:"fastest",dynamicTrafficModulation:50,dynamicTestedTraffic:100,priority:0,isAsync:!1,heatmap:!1,size:7,mutationObserverEnabled:!1,scopes:{urlScope:[{include:!0,condition:40,value:"https://www.newsday.com/"},{include:!1,condition:10,value:"ace-stage.newsday.com"},{include:!1,condition:10,value:"local.newsday.com"}]},actionTrackings:{mousedown:[{name:"Subscribe Button",selector:"#ab_widget_container_popin-simple_5d9918f7_741714 .popin_text_container div a"}]},variations:{921594:{id:921594,name:"Mobile popover",traffic:50,masterVariationId:0,modifications:[{id:3443879,selector:"",type:"addCSS",value:"BODY .ab_widget_container_popin-simple {\n\tdisplay: block;\n  \tposition: relative\n}\n\n@media (min-width:440px) {\nBODY #ab_widget_container_popin-simple_5d9918f7_741714{\n    display: none !important;\n}\n}\n\n\n#ab_widget_container_popin-simple_5d9918f7_741714 .ab_widget_container_popin-simple_content{\n\twidth: 100% !important\n}\n\n.popinsimple_container_5d9918f7_741714{\n\t  \tbackground: rgb(79,0,129) !important;\n\tbackground: linear-gradient(90deg, rgba(79,0,129,1) 0%, rgba(153,0,0,1) 100%) !important;\n\n}\n\n#ab_widget_container_popin-simple_5d9918f7_741714 p > img{\n\twidth: 150px;\n  \tdisplay: block;\n}\n\n#ab_widget_container_popin-simple_5d9918f7_741714 p > strong{\n\tfont-size: 44px;\n}\n\n#ab_widget_container_popin-simple_5d9918f7_741714 p > strong span{\n  \tposition: relative;\n  \n}\n\n#ab_widget_container_popin-simple_5d9918f7_741714 p > strong span::after{\n\tcontent: '';\n    border-top: 3px solid #ff5d5d;\n    display: block;\n    position: absolute;\n    width: 47px;\n    top: 25px;\n    right: -11px;\n    transform: rotate( \n45deg\n );\n}\n\n#ab_widget_container_popin-simple_5d9918f7_741714 p > span:first-child{\n  font-weight: bold; \n  display: block;\n}\n\n\n#ab_widget_container_popin-simple_5d9918f7_741714 .bottomCTA a{\n\tmargin-bottom: 11px;\n  \tpadding: 11px 29px !important;\n    border: none !important;\n    font-weight: 900 !important;\n  \twidth: 100% !important;\n  \ttext-align: center !important;\n  \tbackground-color: #3f51b5 !important;\n}\n\n#ab_widget_container_popin-simple_5d9918f7_741714 .bottomCTA span{\n\tdisplay: block;\n    font-size: 12px;\n  \tcolor: #dedede !important;\n  \t-webkit-text-fill-color: #dedede !important;\n  \tfont-weight: bold;\n  \t\n  \t\n}"},{id:3443880,selector:"body .promoContainer a",type:"editStyleCSS",value:'{"background-color":"#4a0180!important"}'},{id:3468976,selector:"#ab_widget_container_popin-simple_5d9918f7_741714 .ab_widget_container_popin-simple_content button",type:"editAttributes",value:'[{"action":"edit","attributeName":"class","attributeValue":"ab_widget_container_popin-simple_close_button"},{"action":"edit","attributeName":"data-abtasty-actionnable","attributeValue":"true"},{"action":"edit","attributeName":"aria-label","attributeValue":"Close"}]'}],widgets:[{id:"5d9918f7-037c-4a18-aa2d-0b66d85935d6",version:"1.2",config:'{"layout":"popin","autoWidth":true,"popinPercentWidth":50,"popinPixelsWidth":576,"widthUnit":"vw","autoHeight":true,"popinPercentHeight":50,"popinPixelsHeight":315,"heightUnit":"vh","popinPosition":[{"x":1,"y":1}],"zindex":"9999","zindexCustom":1,"isTitle":false,"title":"Your title goes here","textContent":"<SPAN>DON\'T MISS THIS LIMITED-TIME OFFER</SPAN>\\n<strong><span>1</span> 5 months\\n    for only $1\\n</strong>\\n<span>Save on Unlimited Digital Access</span>\\n\\n<div class=\\"bottomCTA\\">\\n    <a href=\\"https://subscribe.newsday.com/Subscribe4?sitecode=Ncom&ofrgp_id=1345&returnUrl=https%3A%2F%2Fwww.newsday.com%2Fservices%2Fprofile-7.386%3Fview%3Ddcards%26clearUserState%3Dtrue\\">ACT NOW</a>\\n    <span>SALE ENDS SOON | CANCEL ANYTIME</span>\\n</div>","linkType":false,"buttonText":"Your call to action","redirectionUrl":"https://www.newsday.com","openInNewTab":false,"titleTextAlign":"center","titleTextColor":"rgba(0, 127, 145, 1)","titleFontName":"inherit","titleFontStyle":"font-style: normal !important; font-weight: normal;","titleFontSize":14,"textAlign":"left","textColor":"rgba(255, 255, 255, 1)","fontName":"inherit","fontStyle":"font-style: normal !important; font-weight: normal;","fontSize":14,"buttonsBorderWidth":1,"buttonsBorderColor":"rgba(87, 184, 199, 1)","buttonsBorderRadius":4,"buttonsBackgroundColor":"rgba(0, 127, 145, 1)","buttonsTextColor":"rgba(247, 247, 247, 1)","buttonsAlign":"center","buttonsFontName":"inherit","buttonsFontStyle":"font-style: normal !important; font-weight: normal;","buttonsFontSize":14,"containerMargin":[{"top":0,"left":0,"bottom":0,"right":0}],"containerPadding":[{"top":100,"right":60,"bottom":100,"left":60}],"backgroundColor":"rgba(247, 247, 247, 1)","isBackgroundImage":false,"backgroundImage":"https://widgets-images.abtasty.com/widgets-default-image.png","backgroundSize":"cover","backgroundPosition":"center","backgroundRepeat":false,"dropShadow":false,"dropShadowColor":"rgba(57, 57, 57, 0.25);","dropShadowBlur":10,"borderWidth":0,"borderColor":"rgba(0, 127, 145, 1)","borderRadius":4,"overlay":true,"overlayColor":"rgba(0, 0, 0, 0.6)","overlayClickable":true,"closeButton":true,"closeButtonPosition":"in","closeButtonSize":24,"closeButtonColor":"rgba(255, 255, 255, 1)","closeButtonBackgroundColor":"rgba(255, 255, 255, 0)","closeButtonBorderRadius":0,"closeButtonBorderWidth":0,"closeButtonBorderColor":"rgba(57, 57, 57, 1)","triggerEvent":"pageLoad","triggerEventClick":"body","triggerEventElementVisible":"body","triggerEventCustomScript":"/* In this example snippet, the widget will be triggered as soon as any scroll is detected.\\nCreate your own by resolving resolve() with true (which does trigger) or false (which doesn\'t trigger) */\\n\\nfunction launchIfScroll() {\\n\\treturn new Promise(resolve => {\\n\\t\\tdocument.addEventListener(\'scroll\', () => resolve(true), {once: true});\\n\\t});\\n}\\n\\nconst result = await launchIfScroll();\\nreturn resolve(result);","isOncePerPageTrigger":true,"triggerEventReengageDelay":10,"triggerEventDelay":2,"autoHide":true,"timeHide":2,"displayRecurrence":"everytime","displayRecurrence_day":5,"displayRecurrence_week":2,"displayRecurrence_month":1,"closingRecurrence":"session","closingRecurrence_day":5,"closingRecurrence_week":2,"closingRecurrence_month":1,"validationRecurrence":"everytime","validationRecurrence_day":5,"validationRecurrence_week":2,"validationRecurrence_month":1}',name:"@abtasty/popin-simple"}]},921666:{id:921666,name:"Mobile toaster",traffic:50,masterVariationId:0,modifications:[{id:3444095,selector:"",type:"addCSS",value:"BODY #ab_widget_container_promotional-banner_5ee9d456_741714 {\n\tdisplay: block;\n}\n\n@media (min-width:440px) {\nBODY #ab_widget_container_promotional-banner_5ee9d456_741714 {\n    display: none !important;\n}\n}\n\n.promotionalbanner_container_5ee9d456_741714{\n  padding: 50px 30px !important;\n\tposition: relative;\n  \tz-index: 2;\n  \t  \tbackground: rgb(79,0,129) !important;\n\tbackground: linear-gradient(90deg, rgba(79,0,129,1) 0%, rgba(153,0,0,1) 100%) !important;\n}\n#ab_widget_container_promotional-banner_5ee9d456_741714 .ab_widget_container_promotional-banner_content .ab_widget_container_promotional-banner_close_button{\n\tz-index: 3 !important;\n}\n\n#ab_widget_container_promotional-banner_5ee9d456_741714 p > span:first-child{\n\tdisplay: block;\n  \tfont-weight: bold;\n}\n\n#ab_widget_container_promotional-banner_5ee9d456_741714 p > img{\n\twidth: 150px;\n  \tdisplay: block;\n}\n\n#ab_widget_container_promotional-banner_5ee9d456_741714 p > strong{\n\tfont-size: 44px;\n}\n\n#ab_widget_container_promotional-banner_5ee9d456_741714 p > strong span:first-child{\n  \tposition: relative;\n  \tfont-size: inherit;\n  \n}\n\n#ab_widget_container_promotional-banner_5ee9d456_741714 p > strong span::after{\n\tcontent: '';\n    border-top: 3px solid #ff5d5d;\n    display: block;\n    position: absolute;\n    width: 47px;\n    top: 25px;\n    right: -11px;\n    transform: rotate( \n45deg\n );\n}\n#ab_widget_container_promotional-banner_5ee9d456_741714 .bottomCTA{\n\tdisplay: block !important;\n}\n\n\n#ab_widget_container_promotional-banner_5ee9d456_741714 .bottomCTA a{\n\tmargin-bottom: 11px;\n  \tpadding: 11px 29px !important;\n    border: none !important;\n    font-weight: 900 !important;\n  \twidth: 100% !important;\n  \ttext-align: center !important;\n}\n\n#ab_widget_container_promotional-banner_5ee9d456_741714 .bottomCTA span{\n\tdisplay: block;\n    font-size: 12px;\n  \tcolor: #dedede !important;\n  \t-webkit-text-fill-color: #dedede !important;\n  \tfont-weight: bold;\n  \t\n  \t\n}"},{id:3444096,selector:"body .promoContainer a",type:"editStyleCSS",value:'{"background-color":"#4a0180!important"}'},{id:3468977,selector:"#ab_widget_container_promotional-banner_5ee9d456_741714 .ab_widget_container_promotional-banner_content button",type:"editAttributes",value:'[{"action":"edit","attributeName":"class","attributeValue":"ab_widget_container_promotional-banner_close_button"},{"action":"edit","attributeName":"data-abtasty-actionnable","attributeValue":"true"},{"action":"edit","attributeName":"aria-label","attributeValue":"Close"}]'}],widgets:[{id:"5ee9d456-ff18-4d99-9caf-48bbd948041d",version:"1.2",config:'{"layout":"bannerBottom","elementReferrer":"body","referrerInsertType":"afterbegin","zindex":"9999","zindexCustom":1,"message":"<span>DON\'T MISS THIS LIMITED TIME OFFER</span>\\n    <strong><span>1</span> 5 months\\n        for only $1\\n    </strong>\\n    <span>Save on Unlimted Digital Access</span>\\n\\n    <div class=\\"bottomCTA\\">\\n        <a\\n            href=\\"https://subscribe.newsday.com/Subscribe4?sitecode=Ncom&ofrgp_id=1449&returnUrl=https%3A%2F%2Fwww.newsday.com%2Fservices%2Fprofile-7.386%3Fview%3Ddcards%26clearUserState%3Dtrue\\">ACT\\n            NOW</a>\\n        <span>SALE ENDS SOON | CANCEL ANYTIME</span>\\n    </div>","linkType":false,"buttonText":"SUBSCRIBE NOW","redirectionUrl":"https://www.newsday.com","openInNewTab":false,"textAlign":"left","textColor":"rgba(255, 255, 255, 1)","fontName":"inherit","fontStyle":"font-style: normal !important; font-weight: normal;","fontSize":14,"buttonsBorderWidth":0,"buttonsBorderColor":"rgba(87, 184, 199, 1)","buttonsBorderRadius":5,"buttonsBackgroundColor":"rgba(63, 81, 181, 1)","buttonsTextColor":"rgba(255, 255, 255, 1)","buttonsFontName":"inherit","buttonsFontStyle":"font-style: normal !important; font-weight: normal;","buttonsFontSize":18,"containerMargin":[{"top":0,"left":0,"bottom":0,"right":0}],"containerPadding":[{"top":50,"right":30,"bottom":50,"left":30}],"backgroundColor":"rgba(74, 0, 129, 1)","isBackgroundImage":false,"backgroundImage":"https://widgets-images.abtasty.com/widgets-default-image.png","backgroundSize":"cover","backgroundPosition":"center","backgroundRepeat":false,"dropShadow":false,"dropShadowColor":"rgba(57, 57, 57, 0.25);","dropShadowBlur":10,"borderWidth":0,"borderColor":"rgba(0, 127, 145, 1)","borderRadius":0,"closeButton":true,"closeButtonPosition":"in","closeButtonSize":20,"closeButtonColor":"rgba(255, 255, 255, 1)","closeButtonBackgroundColor":"rgba(255, 255, 255, 0)","closeButtonBorderRadius":0,"closeButtonBorderWidth":0,"closeButtonBorderColor":"rgba(57, 57, 57, 1)","triggerEvent":"pageLoad","triggerEventClick":"body","triggerEventElementVisible":"body","triggerEventCustomScript":"/* In this example snippet, the widget will be triggered as soon as any scroll is detected.\\nCreate your own by resolving resolve() with true (which does trigger) or false (which doesn\'t trigger) */\\n\\nfunction launchIfScroll() {\\n\\treturn new Promise(resolve => {\\n\\t\\tdocument.addEventListener(\'scroll\', () => resolve(true), {once: true});\\n\\t});\\n}\\n\\nconst result = await launchIfScroll();\\nreturn resolve(result);","isOncePerPageTrigger":true,"triggerEventReengageDelay":10,"triggerEventDelay":2,"autoHide":true,"timeHide":2,"displayRecurrence":"everytime","displayRecurrence_day":5,"displayRecurrence_week":2,"displayRecurrence_month":1,"closingRecurrence":"session","closingRecurrence_day":5,"closingRecurrence_week":2,"closingRecurrence_month":1,"validationRecurrence":"everytime","validationRecurrence_day":5,"validationRecurrence_week":2,"validationRecurrence_month":1}',name:"@abtasty/promotional-banner"}]}},audienceTrigger:{name:"not logged in (updated)",id:"3904f806-0a3e-4517-9207-fa35b3183490",targeting_groups:[{position:0,id:"a163da57-30c1-409d-b8e5-6a8c357c6f2b",targetings:[{id:"399a7b38-e042-42b7-855f-85d6e4c1c846",operator:"auto",position:0,targeting_type:40,mutationObserverEnabled:!1,conditions:[{id:"62002d92-f4fe-4625-8a6a-5b19a02187e4",value:'return new Promise((resolve, reject) => {\n     const fallback = setTimeout(() => {resolve(false);}, 8 * 1000);\n     window.addEventListener("nd_mg2_onLoggedIn", e => {\n              clearTimeout(fallback);\n              resolve(false);\n     });\n     window.addEventListener("nd_mg2_onNotAuthorized", e => {\n              clearTimeout(fallback);\n           resolve(true);\n     });\n});',isAsync:!1}]}]}],is_segment:!1},additionalType:""},743982:{id:743982,name:"newsletter toaster (LI)",traffic:100,type:"ab",sub_type:"ab",parentID:0,targetingMode:"fastest",dynamicTrafficModulation:50,dynamicTestedTraffic:100,priority:0,isAsync:!1,heatmap:!1,size:16,mutationObserverEnabled:!1,scopes:{urlScope:[{include:!1,condition:10,value:"/services"},{include:!0,condition:10,value:"com/long-island"},{include:!1,condition:10,value:"/suffolk"},{include:!1,condition:10,value:"/nassau"},{include:!1,condition:10,value:"ace-stage.newsday.com"},{include:!1,condition:10,value:"local.newsday.com"}]},actionTrackings:{mousedown:[{name:"Sign up button",selector:"#ab_widget_container_promotional-banner_6393f5e0_743982 .toasterInside form a"}]},variations:{924443:{id:924443,name:"Long Island Newsletter toaster",traffic:100,masterVariationId:0,modifications:[{id:3454300,selector:"",type:"addCSS",value:".fixed-bottom {position: fixed!important; bottom: 0!important;width:100%;z-index:5;margin:0;padding:0;border:0;}\n\n#ab_widget_container_promotional-banner_6393f5e0_743982 .toasterInside{\n\tdisplay: flex !important;\n  \twidth: 100%;\n  \tjustify-content: center;\n  \talign-items: center;\n  \n}\n\n#ab_widget_container_promotional-banner_6393f5e0_743982 .toasterInside > div:first-child{\n\ttext-align: left !important;\n  \tfont-size: 18px;\n  \tmargin-right: 50px;\n}\n\n#ab_widget_container_promotional-banner_6393f5e0_743982 .toasterInside > div:first-child strong{\n\tfont-size: 36px;\n  \tdisplay: block;\n  \tmargin-bottom: 7px !important;\n}\n\n#ab_widget_container_promotional-banner_6393f5e0_743982 .toasterInside form{\n\tdisplay: flex;\n  \tjustify-content: center;\n  \theight: fit-content !important;\n}\n\n#ab_widget_container_promotional-banner_6393f5e0_743982 .toasterInside form a {\n\tborder: none !important;\n  \tmargin: 0 !important;\n    border-top-left-radius: 0px !important;\n    border-bottom-left-radius: 0px !important;\n  \twidth: 130px !important;\n    display: flex !important;\n    justify-content: center !important;\n    flex-direction: column !important;\n  \tfont-size: 17px !important;\n  \tbackground-color: #8ccafe !important;\n  \tcolor: #023965 !important;\n  \t-webkit-text-fill-color: #023965 !important;\n  \tmax-width: unset !important;\n}\n\n#ab_widget_container_promotional-banner_6393f5e0_743982 .toasterInside form div input{\n\tborder: none;\n    border-top-left-radius: 6px;\n    border-bottom-left-radius: 6px;\n  \tborder-top-right-radius: 0px;\n  \tborder-bottom-right-radius: 0px;\n    color: black;\n    -webkit-text-fill-color: black;\n \twidth: 300px;\n    font-size: 17px;\n  \tpadding: 12px !important;\n}\n\n#ab_widget_container_promotional-banner_6393f5e0_743982 .ab_widget_container_promotional-banner_content .signupSuccess p{\n\ttext-align: center !important;\n  \tmax-width: unset !important;\n}\n\n#ab_widget_container_promotional-banner_6393f5e0_743982 .ab_widget_container_promotional-banner_content{\n\toverflow: hidden\n}\n\n#ab_widget_container_promotional-banner_6393f5e0_743982 .ab_widget_container_promotional-banner_content .moreNL{\n\tmax-width: unset !important;\n  \tmargin: 11px 0 0 0 !important;\n  \tdisplay: block;\n}\n\n#ab_widget_container_promotional-banner_6393f5e0_743982 .promotionalbanner_container_6393f5e0_743982{\n\tposition: relative;\n  \tz-index: 1;\n}\n#ab_widget_container_promotional-banner_6393f5e0_743982 .ab_widget_container_promotional-banner_close_button{\n\tz-index: 2;\n}\n#ab_widget_container_promotional-banner_6393f5e0_743982 .ab_widget_container_promotional-banner_content::after{\n\tcontent: '';\n    background-color: #003965;\n  \tborder: 5px solid #8ccbff;\n    position: absolute;\n    left: calc(50% + -33px);\n    margin-left: -500px;\n    width: 1100px;\n    height: 10000px;\n    vertical-align: middle;\n    top: 50%;\n    margin-top: -5000px;\n    transform: rotate(\n22.5deg\n);\n}\n\n\n@media (max-width:750px) {\nBODY .abtasty-banner-wrapper {\n    display: none!important;\n}\n}\n\n@media (max-width: 1250px) {\nBODY #ab_widget_container_promotional-banner_6393f5e0_743982 {\n    display: none;\n}\n}"},{id:3454301,selector:"#ab_widget_container_promotional-banner_b3f2d467_743982 .ab_widget_container_promotional-banner_content .MG2login.active",type:"customScriptNew",oldValue:'setTimeout(function () { \nvar loginLink = $(".MG2login");\nconsole.warn("bigtasty 6");\n}, 1500);'},{id:3454302,selector:"",type:"customScriptNew",oldValue:"const newsletter = {\n\temptyEmailMsg: 'Enter a valid email address!',\n\n\tmatherPostNewsletterEvent: (event, options) => {\n\t\t(window._matherq = window._matherq || []).push(['newsletterEvent', event, options]);\n\t},\n\n\tescapeHTML(str) { // prevent SQL injection measurement\n\t\tif (str !== undefined) {\n\t\t\tstr = str.replace(/</gi, '&lt;').replace(/>/gi, '&gt;').replace(/\"/g, '&quot;');\n\t\t}\n\t\treturn str;\n\t},\n\n\tsetCookie: (name, value, days) => {\n\t\tlet expires;\n\t\tif (days) {\n\t\t\tvar date = new Date();\n\t\t\tdate.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n\t\t\texpires = \"; expires=\" + date.toGMTString();\n\t\t} else {\n\t\t\texpires = \"\";\n\t\t}\n\t\tdocument.cookie = encodeURIComponent(name) + \"=\" + encodeURIComponent(value) + expires + \"; path=/\";\n\t}\n};\n\n$(() => {\n\n\tif (typeof nd_user !== \"undefined\" && typeof nd_user.info.get(\"email\") !== \"undefined\") {\n\t\tnewsletter.userContact = nd_user.info.get(\"email\");\n\t\t$('.newsletterSignupToaster #subscribeForm :input[name=\"userContact\"]').val(newsletter.userContact);\n\t\t$('.unsubContainer .moduleBody p span').html(newsletter.userContact);\n\t}\n      \n\t$('body').on('click', '.toasterInside form a.btn', function (e) {\n\t\te.preventDefault();\n\t\tlet $formWrapper = $(this).siblings('.formBorderModal'),\n\t\t\t$form = $(this).parents('form'),\n\t\t\tsailthruID = $formWrapper.find('input[name=\"sub\"]').val(); // for A/B Tasty\n\n\t\t$(this).removeClass(\"disable\");\n\t\t$formWrapper.find('.error').removeClass('error');\n\n\t\t/// if email address field is blank\n\t\tif ($formWrapper.find('input[name=\"userContact\"]').val() === '' || $formWrapper.find('input[name=\"userContact\"]') === newsletter.emptyEmailMsg) {\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').addClass('error');\n\t\t\treturn false;\n\t\t} else if ($formWrapper.find('input[name=\"userContact\"]').val().indexOf('@') < 0) {\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').addClass('error');\n\t\t\treturn false;\n\t\t}\n\n\t\tnewsletter.userContact = $formWrapper.find('input[name=\"userContact\"]').val();\n\n\t\t// SailThru id starts with \"nd\" or \"am\"\n\t\tif ($formWrapper.find('input[name=\"sub\"]').val().substr(0, 2).toLowerCase() === \"nd\" || $formWrapper.find('input[name=\"sub\"]').val().substr(0, 2).toLowerCase() === \"am\") {\n\t\t\tif ($form.attr('action') !== '') {\n\t\t\t\turl = $form.attr('action');\n\t\t\t} else {\n\t\t\t\tif (window.location.href.indexOf(':8080') > -1) {\n\t\t\t\t\turl = 'http://' + window.location.hostname + ':8080' + '/managenewsletters';\n\t\t\t\t} else {\n\t\t\t\t\turl = 'https://' + window.location.hostname + '/managenewsletters';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet respMsg;\n\t\t\tif ($formWrapper.parents('.toasterInside').data('confirm') && $formWrapper.parents('.toasterInside').data('confirm') !== '') {\n\t\t\t\trespMsg = $formWrapper.parents('.toasterInside').data('confirm');\n\t\t\t} else {\n\t\t\t\tconst thistarget = (window.location.href.indexOf('7.') > -1) ? '_blank' : \"\";\n\t\t\t\trespMsg = 'Sign up completed. <a class=\"moreNL\" href=\"/newsletters\" target=\"' + thistarget + '\">See more Newsletters</a>';\n\t\t\t}\n\n\t\t\t// build the input fields object\n\t\t\tconst postData = {};\n\t\t\t$.each($form.serializeArray(), function (i, field) {\n\t\t\t\tpostData[field.name] = field.value;\n\t\t\t});\n\t\t\tpostData.userContact = newsletter.escapeHTML(newsletter.userContact);\n\t\t\tpostData.list = $formWrapper.find('input[name=\"sub\"]').val();\n\t\t\tpostData.origin = $formWrapper.find('input[name=\"origin\"]').val();\n\t\t\tpostData.site = $formWrapper.find('input[name=\"site\"]').val();\n\t\t\tif (!!postData.origin) {} else {\n\t\t\t\tpostData.origin = \"newsday\";\n\t\t\t}\n\n\t\t\tif ($formWrapper.find('input[name=\"email\"]').val() !== '') {\n\t\t\t\tpostData.search_token = '';\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t$.ajax({\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\turl: url,\n\t\t\t\t\tdata: postData,\n\t\t\t\t\tdataType: \"json\",\n\t\t\t\t\tcache: false,\n\t\t\t\t\tsuccess: function (data) {\n\t\t\t\t\t\tif (!!data && data.response === \"{ok=true}\") { // Cheetahmail response \"OK\", SailThru response \"{ok=true}\"\n\t\t\t\t\t\t\t$form.siblings('.signupSuccess').html(\"<p>\" + respMsg + \"</p>\").show();\n\t\t\t\t\t\t\t$formWrapper.parent('form').remove();\n\n\t\t\t\t\t\t\tnewsletter.setCookie(\"LIFnlSignUpID\", sailthruID, 90); // for A/B Tasty to check if the user has already signed up\n\n\t\t\t\t\t\t\t/* only from newsday - there are other forms outside newsday not passing origin */\n\t\t\t\t\t\t\tif (postData.origin === \"newsday\") {\n\t\t\t\t\t\t\t\twindow.nlname = postData.list;\n\t\t\t\t\t\t\t\t_satellite.track(\"nlsuccess\");\n\t\t\t\t\t\t\t\tif (navigator.cookieEnabled && window.location.hostname.indexOf('.newsday.com') >= 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdocument.cookie = \"newsletterSignupEmail=\" + window.btoa(postData.userContact) + \";domain=.newsday.com;path=/\";\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (postData.site === \"connext\") {\n\t\t\t\t\t\t\t\tif (navigator.cookieEnabled && ndGlobal.site === \"newsday\") {\n\t\t\t\t\t\t\t\t\twindow.nlname = postData.list;\n\t\t\t\t\t\t\t\t\t_satellite.track(\"nlsuccess\");\n\t\t\t\t\t\t\t\t\tdate = new Date();\n\t\t\t\t\t\t\t\t\tdate.setTime(date.getTime() + (365 * 24 * 60 * 60 * 1000));\n\t\t\t\t\t\t\t\t\texpires = \"; expires=\" + date.toGMTString();\n\t\t\t\t\t\t\t\t\tdocument.cookie = \"c_ecapture=true;domain=.newsday.com;\" + expires + \";path=/\";\n\t\t\t\t\t\t\t\t\tdocument.cookie = \"c_newsletterSignupEmail=\" + window.btoa(postData.userContact) + \";domain=.newsday.com;path=/\";\n\n\t\t\t\t\t\t\t\t\t/* newsletter-data */\n\t\t\t\t\t\t\t\t\tvar newsletter_name = window.nlname;\n\t\t\t\t\t\t\t\t\tvar newsletter_user = postData.userContact;\n\t\t\t\t\t\t\t\t\tvar action_name = _satellite.getVar('mg2 action name');\n\t\t\t\t\t\t\t\t\tvar offers = [\n\t\t\t\t\t\t\t\t\t\t{ offerName: newsletter_name, offerId: newsletter_name, campaign: action_name }\n\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\tnewsletter.matherPostNewsletterEvent({ action: 'signup_completed', offers: offers }, { email: newsletter_user });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//if (_satellite.getVar('content type') !== \"front\") {Connext.Run();}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if ((!!data && data.response === \"Invalid email: \" + newsletter.userContact) || (!!data && data.response === \"err:email:illegal\")) {\n\t\t\t\t\t\t\t// invalid email address response from SailThru\n\t\t\t\t\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (err) {\n\t\t\t\tconsole.log(\"Error signing up. \" + err.message);\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.log('You need to set up the correct SailThru id.');\n\t\t}\n\t}).on('focus', '.toasterInside :input[name=\"userContact\"]', function () {\n\t\t$(this).removeClass('error').find('.error').removeClass('error');\n\t\tif ($(this).val() === newsletter.emptyEmailMsg) {\n\t\t\t$(this).val('');\n\t\t}\n\t}).on('keyup', '.toasterInside form :input[name=\"userContact\"]', function () {\n\t\tif ($(this).val().indexOf('@')) {\n\t\t\t$(this).parent('.formBorderModal').siblings('a.btn').removeClass(\"disable\");\n\t\t}\n\t}).on('keypress', '.toasterInside form :input[name=\"userContact\"]', function (e) {\n\t\t// return key hit\n\t\tif (e.which === 13) {\n\t\t\t$(this).parent('.formBorderModal').siblings('a.btn').click();\n\t\t\treturn false;\n\t\t}\n\t});\n\n});\n\n/*$(document).on(\"onNotAuthorized\", function() {\n    $(\".ab_widget_container_popin-image\").hide();\n});*/"}],widgets:[{id:"6393f5e0-aa26-4a26-96eb-8c4947a3431f",version:"1.1",config:'{"layout":"free","elementReferrer":"#toaster-wrap","referrerInsertType":"afterbegin","message":"<div class=\'toasterInside\'>\\n    <div><strong>Get the Morning Update.</strong>\\n        Start your morning with the news you care about. </div>\\n\\n    <form action=\\"\\" method=\\"POST\\">\\n        <div class=\\"formBorderModal\\">\\n            <input type=\\"text\\" class=\\"form-control email-enter\\" name=\\"userContact\\" value=\\"\\" placeholder=\\"Email address\\"\\n                required=\\"required\\">\\n            <input type=\\"hidden\\" name=\\"sub\\" value=\\"ND_edit_newsday_now_masterlist\\">\\n            <input name=\\"requestType\\" type=\\"hidden\\" value=\\"new_subscription\\" />\\n            <input name=\\"responseType\\" type=\\"hidden\\" value=\\"json\\" />\\n            <input name=\\"version\\" type=\\"hidden\\" value=\\"2\\" />\\n            <input name=\\"confirmationEmail\\" type=\\"hidden\\" value=\\"\\" />\\n            <input name=\\"email\\" type=\\"hidden\\" value=\\"\\" />\\n            <input name=\\"grc-response\\" type=\\"hidden\\" value=\\"verified\\" />\\n            <input name=\\"nsource\\" type=\\"hidden\\" value=\\"A\\" />\\n            <input name=\\"origin\\" type=\\"hidden\\" value=\\"sailthru\\" />\\n            <input name=\\"site\\" type=\\"hidden\\" value=\\"connext\\" />\\n        </div>\\n        <a class=\\"btn disable\\" href=\\"#\\">Sign up</a>\\n    </form>\\n    <div class=\\"signupSuccess\\"></div>\\n</div>","linkType":false,"buttonText":"Sign up","buttonUrl":"https://subscribe.newsday.com/Subscribe2?sitecode=Ncom&ofrgp_id=936&returnUrl=https%3A%2F%2Fwww.newsday.com%2Fservices%2Fprofile-7.386%3Fview%3Ddcards%26clearUserState%3Dtrue","bannerUrl":"https://www.newsday.com","openInNewTab":false,"textAlign":"center","textColor":"rgba(255, 255, 255, 1)","fontName":"inherit","fontStyle":"font-weight: bold !important;","fontSize":15,"buttonsBorderWidth":2,"buttonsBorderColor":"rgba(255, 255, 255, 1)","buttonsBorderRadius":4,"buttonsBackgroundColor":"rgba(103, 196, 222, 1)","buttonsTextColor":"rgba(25, 34, 93, 1)","containerMargin":[{"top":0,"left":0,"bottom":0,"right":0}],"containerPadding":[{"top":20,"right":60,"bottom":20,"left":60}],"backgroundColor":"rgba(0, 101, 173, 1)","isBackgroundImage":false,"backgroundImage":"https://assets.projects.newsday.com/projects-uploads/uploads/2021/02/toaster-winter-trees.png","backgroundSize":"auto","backgroundPosition":"bottom right","backgroundRepeat":false,"dropShadow":false,"dropShadowColor":"rgba(57, 57, 57, 0.25);","dropShadowBlur":10,"closeButton":true,"borderWidth":0,"borderColor":"rgba(222, 236, 239, 1)","borderRadius":0,"triggerEvent":"pageLoad","triggerEventClick":"body","triggerEventElementVisible":"body","triggerEventCustomScript":"/* In this example snippet, the widget will be triggered as soon as any scroll is detected.\\nCreate your own by resolving resolve() with true (which does trigger) or false (which doesn\'t trigger) */\\n\\nfunction launchIfScroll() {\\n\\treturn new Promise(resolve => {\\n\\t\\tdocument.addEventListener(\'scroll\', () => resolve(true), {once: true});\\n\\t});\\n}\\n\\nconst result = await launchIfScroll();\\nreturn resolve(result);","isOncePerPageTrigger":true,"triggerEventReengageDelay":10,"triggerEventDelay":2,"autoHide":true,"timeHide":2,"displayRecurrence":"everytime","displayRecurrence_day":5,"displayRecurrence_week":2,"displayRecurrence_month":1,"closingRecurrence":"week","closingRecurrence_day":5,"closingRecurrence_week":2,"closingRecurrence_month":1,"validationRecurrence":"session","validationRecurrence_day":5,"validationRecurrence_week":2,"validationRecurrence_month":1}',name:"@abtasty/promotional-banner"}]}},audienceTrigger:{name:"Audience of the account47583",id:"42d83207-3a5c-4d28-935c-82aa1a496dfb",targeting_groups:[{position:0,id:"b2ec077b-1483-4a22-a5f6-6accdb63acfe",targetings:[{id:"4cd9e1b8-9023-4ac8-9df2-b5a0afb8bb9b",operator:"auto",position:0,targeting_type:40,mutationObserverEnabled:!1,conditions:[{id:"4c0483d9-f595-4ecf-a6e9-72a5db784f69",value:'var showPopup = false;\nif (!document.cookie.match("LIFnlSignUpID=")) {\n    showPopup = true;\n    hj(\'trigger\', \'hotjar_record\');\n}\nreturn showPopup &&\n    (\n        window.location.pathname === "/long-island"\n        ||\n        new Promise((resolve, reject) => {\n            const fallback = setTimeout(() => { resolve(false); }, 8 * 1000);\n            window.addEventListener("nd_mg2_onLoggedIn", e => {\n                if (nd_user.getProductID() === \'NVID\' || nd_user.getProductID() === undefined) {\n                    clearTimeout(fallback);\n                    resolve(false);\n                } else {\n                    clearTimeout(fallback);\n                    resolve(true);\n                }\n            });\n            window.addEventListener("nd_mg2_onNotAuthorized", e => {\n                clearTimeout(fallback);\n                resolve(false);\n            });\n        })\n\n    );',isAsync:!1}]},{id:"3a9037d1-b51f-4c25-806c-5c6ad2fbf4e7",operator:"auto",position:1,targeting_type:51,mutationObserverEnabled:!1,conditions:[{id:"6bb5ca3e-018e-4abb-9c48-49cb5e629a4c",condition:10,value:"/nassau",count:2,include:!1},{id:"9bf13dea-72c3-410b-af30-3223bdf08776",condition:10,value:"/services",count:2,include:!1},{id:"d1068153-fbdb-4fa1-bc86-cff182da0c51",condition:10,value:"com/long-island",count:2,include:!0},{id:"e54f14e3-1361-4120-8838-8a2aed37bd71",condition:10,value:"/suffolk",count:2,include:!1}]}]}],is_segment:!1},additionalType:""},743983:{id:743983,name:"newsletter toaster (Nassau)",traffic:100,type:"ab",sub_type:"ab",parentID:0,targetingMode:"fastest",dynamicTrafficModulation:50,dynamicTestedTraffic:100,priority:0,isAsync:!1,heatmap:!1,size:16,mutationObserverEnabled:!1,scopes:{urlScope:[{include:!1,condition:10,value:"/services"},{include:!0,condition:10,value:"/long-island/nassau"},{include:!1,condition:10,value:"ace-stage.newsday.com"},{include:!1,condition:10,value:"local.newsday.com"}]},actionTrackings:{mousedown:[{name:"Sign up button",selector:"#ab_widget_container_promotional-banner_cf77db26_743983 .toasterInside form a"}]},variations:{924444:{id:924444,name:"Nassau newsletter toaster",traffic:100,masterVariationId:0,modifications:[{id:3454303,selector:"",type:"addCSS",value:".fixed-bottom {position: fixed!important; bottom: 0!important;width:100%;z-index:5;margin:0;padding:0;border:0;}\n\n#ab_widget_container_promotional-banner_cf77db26_743983 .toasterInside{\n\tdisplay: flex !important;\n  \twidth: 100%;\n  \tjustify-content: center;\n  \talign-items: center;\n  \n}\n\n#ab_widget_container_promotional-banner_cf77db26_743983 .toasterInside > div:first-child{\n\ttext-align: left !important;\n  \tfont-size: 18px;\n  \tmargin-right: 50px;\n}\n\n#ab_widget_container_promotional-banner_cf77db26_743983 .toasterInside > div:first-child strong{\n\tfont-size: 36px;\n  \tdisplay: block;\n  \tmargin-bottom: 7px !important;\n}\n\n#ab_widget_container_promotional-banner_cf77db26_743983 .toasterInside form{\n\tdisplay: flex;\n  \tjustify-content: center;\n  \theight: fit-content !important;\n}\n\n#ab_widget_container_promotional-banner_cf77db26_743983 .toasterInside form a {\n\tborder: none !important;\n  \tmargin: 0 !important;\n    border-top-left-radius: 0px !important;\n    border-bottom-left-radius: 0px !important;\n  \twidth: 130px !important;\n    display: flex !important;\n    justify-content: center !important;\n    flex-direction: column !important;\n  \tfont-size: 17px !important;\n  \tbackground-color: #8ccafe !important;\n  \tcolor: #023965 !important;\n  \t-webkit-text-fill-color: #023965 !important;\n  \tmax-width: unset !important;\n}\n\n#ab_widget_container_promotional-banner_cf77db26_743983 .toasterInside form div input{\n\tborder: none;\n    border-top-left-radius: 6px;\n    border-bottom-left-radius: 6px;\n  \tborder-top-right-radius: 0px;\n  \tborder-bottom-right-radius: 0px;\n    color: black;\n    -webkit-text-fill-color: black;\n \twidth: 300px;\n    font-size: 17px;\n  \tpadding: 12px !important;\n}\n\n#ab_widget_container_promotional-banner_cf77db26_743983 .ab_widget_container_promotional-banner_content .signupSuccess p{\n\ttext-align: center !important;\n  \tmax-width: unset !important;\n}\n\n#ab_widget_container_promotional-banner_cf77db26_743983 .ab_widget_container_promotional-banner_content{\n\toverflow: hidden\n}\n\n#ab_widget_container_promotional-banner_cf77db26_743983 .ab_widget_container_promotional-banner_content .moreNL{\n\tmax-width: unset !important;\n  \tmargin: 11px 0 0 0 !important;\n  \tdisplay: block;\n}\n\n#ab_widget_container_promotional-banner_cf77db26_743983 .promotionalbanner_container_cf77db26_743983{\n\tposition: relative;\n  \tz-index: 1;\n}\n#ab_widget_container_promotional-banner_cf77db26_743983 .ab_widget_container_promotional-banner_close_button{\n\tz-index: 2;\n}\n#ab_widget_container_promotional-banner_cf77db26_743983 .ab_widget_container_promotional-banner_content::after{\n\tcontent: '';\n    background-color: #003965;\n  \tborder: 5px solid #8ccbff;\n    position: absolute;\n    left: calc(50% + -33px);\n    margin-left: -500px;\n    width: 1100px;\n    height: 10000px;\n    vertical-align: middle;\n    top: 50%;\n    margin-top: -5000px;\n    transform: rotate(\n22.5deg\n);\n}\n\n\n@media (max-width:750px) {\nBODY .abtasty-banner-wrapper {\n    display: none!important;\n}\n}\n\n@media (max-width: 1250px) {\nBODY #ab_widget_container_promotional-banner_cf77db26_743983 {\n    display: none;\n}\n}"},{id:3454304,selector:"#ab_widget_container_promotional-banner_b3f2d467_743983 .ab_widget_container_promotional-banner_content .MG2login.active",type:"customScriptNew",oldValue:'setTimeout(function () { \nvar loginLink = $(".MG2login");\nconsole.warn("bigtasty 6");\n}, 1500);'},{id:3454305,selector:"",type:"customScriptNew",oldValue:"const newsletter = {\n\temptyEmailMsg: 'Enter a valid email address!',\n\n\tmatherPostNewsletterEvent: (event, options) => {\n\t\t(window._matherq = window._matherq || []).push(['newsletterEvent', event, options]);\n\t},\n\n\tescapeHTML(str) { // prevent SQL injection measurement\n\t\tif (str !== undefined) {\n\t\t\tstr = str.replace(/</gi, '&lt;').replace(/>/gi, '&gt;').replace(/\"/g, '&quot;');\n\t\t}\n\t\treturn str;\n\t},\n\n\tsetCookie: (name, value, days) => {\n\t\tlet expires;\n\t\tif (days) {\n\t\t\tvar date = new Date();\n\t\t\tdate.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n\t\t\texpires = \"; expires=\" + date.toGMTString();\n\t\t} else {\n\t\t\texpires = \"\";\n\t\t}\n\t\tdocument.cookie = encodeURIComponent(name) + \"=\" + encodeURIComponent(value) + expires + \"; path=/\";\n\t}\n};\n\n$(() => {\n\n\tif (typeof nd_user !== \"undefined\" && typeof nd_user.info.get(\"email\") !== \"undefined\") {\n\t\tnewsletter.userContact = nd_user.info.get(\"email\");\n\t\t$('.newsletterSignupToaster #subscribeForm :input[name=\"userContact\"]').val(newsletter.userContact);\n\t\t$('.unsubContainer .moduleBody p span').html(newsletter.userContact);\n\t}\n      \n\t$('body').on('click', '.toasterInside form a.btn', function (e) {\n\t\te.preventDefault();\n\t\tlet $formWrapper = $(this).siblings('.formBorderModal'),\n\t\t\t$form = $(this).parents('form'),\n\t\t\tsailthruID = $formWrapper.find('input[name=\"sub\"]').val(); // for A/B Tasty\n\n\t\t$(this).removeClass(\"disable\");\n\t\t$formWrapper.find('.error').removeClass('error');\n\n\t\t/// if email address field is blank\n\t\tif ($formWrapper.find('input[name=\"userContact\"]').val() === '' || $formWrapper.find('input[name=\"userContact\"]') === newsletter.emptyEmailMsg) {\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').addClass('error');\n\t\t\treturn false;\n\t\t} else if ($formWrapper.find('input[name=\"userContact\"]').val().indexOf('@') < 0) {\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').addClass('error');\n\t\t\treturn false;\n\t\t}\n\n\t\tnewsletter.userContact = $formWrapper.find('input[name=\"userContact\"]').val();\n\n\t\t// SailThru id starts with \"nd\" or \"am\"\n\t\tif ($formWrapper.find('input[name=\"sub\"]').val().substr(0, 2).toLowerCase() === \"nd\" || $formWrapper.find('input[name=\"sub\"]').val().substr(0, 2).toLowerCase() === \"am\") {\n\t\t\tif ($form.attr('action') !== '') {\n\t\t\t\turl = $form.attr('action');\n\t\t\t} else {\n\t\t\t\tif (window.location.href.indexOf(':8080') > -1) {\n\t\t\t\t\turl = 'http://' + window.location.hostname + ':8080' + '/managenewsletters';\n\t\t\t\t} else {\n\t\t\t\t\turl = 'https://' + window.location.hostname + '/managenewsletters';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet respMsg;\n\t\t\tif ($formWrapper.parents('.toasterInside').data('confirm') && $formWrapper.parents('.toasterInside').data('confirm') !== '') {\n\t\t\t\trespMsg = $formWrapper.parents('.toasterInside').data('confirm');\n\t\t\t} else {\n\t\t\t\tconst thistarget = (window.location.href.indexOf('7.') > -1) ? '_blank' : \"\";\n\t\t\t\trespMsg = 'Sign up completed. <a class=\"moreNL\" href=\"/newsletters\" target=\"' + thistarget + '\">See more Newsletters</a>';\n\t\t\t}\n\n\t\t\t// build the input fields object\n\t\t\tconst postData = {};\n\t\t\t$.each($form.serializeArray(), function (i, field) {\n\t\t\t\tpostData[field.name] = field.value;\n\t\t\t});\n\t\t\tpostData.userContact = newsletter.escapeHTML(newsletter.userContact);\n\t\t\tpostData.list = $formWrapper.find('input[name=\"sub\"]').val();\n\t\t\tpostData.origin = $formWrapper.find('input[name=\"origin\"]').val();\n\t\t\tpostData.site = $formWrapper.find('input[name=\"site\"]').val();\n\t\t\tif (!!postData.origin) {} else {\n\t\t\t\tpostData.origin = \"newsday\";\n\t\t\t}\n\n\t\t\tif ($formWrapper.find('input[name=\"email\"]').val() !== '') {\n\t\t\t\tpostData.search_token = '';\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t$.ajax({\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\turl: url,\n\t\t\t\t\tdata: postData,\n\t\t\t\t\tdataType: \"json\",\n\t\t\t\t\tcache: false,\n\t\t\t\t\tsuccess: function (data) {\n\t\t\t\t\t\tif (!!data && data.response === \"{ok=true}\") { // Cheetahmail response \"OK\", SailThru response \"{ok=true}\"\n\t\t\t\t\t\t\t$form.siblings('.signupSuccess').html(\"<p>\" + respMsg + \"</p>\").show();\n\t\t\t\t\t\t\t$formWrapper.parent('form').remove();\n\n\t\t\t\t\t\t\tnewsletter.setCookie(\"NASTnlSignUpID\", sailthruID, 90); // for A/B Tasty to check if the user has already signed up\n\n\t\t\t\t\t\t\t/* only from newsday - there are other forms outside newsday not passing origin */\n\t\t\t\t\t\t\tif (postData.origin === \"newsday\") {\n\t\t\t\t\t\t\t\twindow.nlname = postData.list;\n\t\t\t\t\t\t\t\t_satellite.track(\"nlsuccess\");\n\t\t\t\t\t\t\t\tif (navigator.cookieEnabled && window.location.hostname.indexOf('.newsday.com') >= 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdocument.cookie = \"newsletterSignupEmail=\" + window.btoa(postData.userContact) + \";domain=.newsday.com;path=/\";\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (postData.site === \"connext\") {\n\t\t\t\t\t\t\t\tif (navigator.cookieEnabled && ndGlobal.site === \"newsday\") {\n\t\t\t\t\t\t\t\t\twindow.nlname = postData.list;\n\t\t\t\t\t\t\t\t\t_satellite.track(\"nlsuccess\");\n\t\t\t\t\t\t\t\t\tdate = new Date();\n\t\t\t\t\t\t\t\t\tdate.setTime(date.getTime() + (365 * 24 * 60 * 60 * 1000));\n\t\t\t\t\t\t\t\t\texpires = \"; expires=\" + date.toGMTString();\n\t\t\t\t\t\t\t\t\tdocument.cookie = \"c_ecapture=true;domain=.newsday.com;\" + expires + \";path=/\";\n\t\t\t\t\t\t\t\t\tdocument.cookie = \"c_newsletterSignupEmail=\" + window.btoa(postData.userContact) + \";domain=.newsday.com;path=/\";\n\n\t\t\t\t\t\t\t\t\t/* newsletter-data */\n\t\t\t\t\t\t\t\t\tvar newsletter_name = window.nlname;\n\t\t\t\t\t\t\t\t\tvar newsletter_user = postData.userContact;\n\t\t\t\t\t\t\t\t\tvar action_name = _satellite.getVar('mg2 action name');\n\t\t\t\t\t\t\t\t\tvar offers = [\n\t\t\t\t\t\t\t\t\t\t{ offerName: newsletter_name, offerId: newsletter_name, campaign: action_name }\n\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\tnewsletter.matherPostNewsletterEvent({ action: 'signup_completed', offers: offers }, { email: newsletter_user });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//if (_satellite.getVar('content type') !== \"front\") {Connext.Run();}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if ((!!data && data.response === \"Invalid email: \" + newsletter.userContact) || (!!data && data.response === \"err:email:illegal\")) {\n\t\t\t\t\t\t\t// invalid email address response from SailThru\n\t\t\t\t\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (err) {\n\t\t\t\tconsole.log(\"Error signing up. \" + err.message);\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.log('You need to set up the correct SailThru id.');\n\t\t}\n\t}).on('focus', '.toasterInside :input[name=\"userContact\"]', function () {\n\t\t$(this).removeClass('error').find('.error').removeClass('error');\n\t\tif ($(this).val() === newsletter.emptyEmailMsg) {\n\t\t\t$(this).val('');\n\t\t}\n\t}).on('keyup', '.toasterInside form :input[name=\"userContact\"]', function () {\n\t\tif ($(this).val().indexOf('@')) {\n\t\t\t$(this).parent('.formBorderModal').siblings('a.btn').removeClass(\"disable\");\n\t\t}\n\t}).on('keypress', '.toasterInside form :input[name=\"userContact\"]', function (e) {\n\t\t// return key hit\n\t\tif (e.which === 13) {\n\t\t\t$(this).parent('.formBorderModal').siblings('a.btn').click();\n\t\t\treturn false;\n\t\t}\n\t});\n\n});\n\n/*$(document).on(\"onNotAuthorized\", function() {\n    $(\".ab_widget_container_popin-image\").hide();\n});*/"}],widgets:[{id:"cf77db26-1606-46c9-abf6-da597821b481",version:"1.1",config:'{"layout":"free","elementReferrer":"#toaster-wrap","referrerInsertType":"afterbegin","message":"<div class=\'toasterInside\'>\\n    <div><strong>Get Nassau News This Week.</strong>\\n        A weekly roundup of Nassau County news, crime and politics.</div>\\n\\n    <form action=\\"\\" method=\\"POST\\">\\n        <div class=\\"formBorderModal\\">\\n            <input type=\\"text\\" class=\\"form-control email-enter\\" name=\\"userContact\\" value=\\"\\" placeholder=\\"Email address\\"\\n                required=\\"required\\">\\n            <input type=\\"hidden\\" name=\\"sub\\" value=\\"nd_edit_nassau_newsletter\\">\\n            <input name=\\"requestType\\" type=\\"hidden\\" value=\\"new_subscription\\" />\\n            <input name=\\"responseType\\" type=\\"hidden\\" value=\\"json\\" />\\n            <input name=\\"version\\" type=\\"hidden\\" value=\\"2\\" />\\n            <input name=\\"confirmationEmail\\" type=\\"hidden\\" value=\\"\\" />\\n            <input name=\\"email\\" type=\\"hidden\\" value=\\"\\" />\\n            <input name=\\"grc-response\\" type=\\"hidden\\" value=\\"verified\\" />\\n            <input name=\\"nsource\\" type=\\"hidden\\" value=\\"A\\" />\\n            <input name=\\"origin\\" type=\\"hidden\\" value=\\"sailthru\\" />\\n            <input name=\\"site\\" type=\\"hidden\\" value=\\"connext\\" />\\n        </div>\\n        <a class=\\"btn disable\\" href=\\"#\\">Sign up</a>\\n    </form>\\n    <div class=\\"signupSuccess\\"></div>\\n</div>","linkType":false,"buttonText":"Sign up","buttonUrl":"https://subscribe.newsday.com/Subscribe2?sitecode=Ncom&ofrgp_id=936&returnUrl=https%3A%2F%2Fwww.newsday.com%2Fservices%2Fprofile-7.386%3Fview%3Ddcards%26clearUserState%3Dtrue","bannerUrl":"https://www.newsday.com","openInNewTab":false,"textAlign":"center","textColor":"rgba(255, 255, 255, 1)","fontName":"inherit","fontStyle":"font-weight: bold !important;","fontSize":15,"buttonsBorderWidth":2,"buttonsBorderColor":"rgba(255, 255, 255, 1)","buttonsBorderRadius":4,"buttonsBackgroundColor":"rgba(103, 196, 222, 1)","buttonsTextColor":"rgba(25, 34, 93, 1)","containerMargin":[{"top":0,"left":0,"bottom":0,"right":0}],"containerPadding":[{"top":20,"right":60,"bottom":20,"left":60}],"backgroundColor":"rgba(0, 101, 173, 1)","isBackgroundImage":false,"backgroundImage":"https://assets.projects.newsday.com/projects-uploads/uploads/2021/02/toaster-winter-trees.png","backgroundSize":"auto","backgroundPosition":"bottom right","backgroundRepeat":false,"dropShadow":false,"dropShadowColor":"rgba(57, 57, 57, 0.25);","dropShadowBlur":10,"closeButton":true,"borderWidth":0,"borderColor":"rgba(222, 236, 239, 1)","borderRadius":0,"triggerEvent":"pageLoad","triggerEventClick":"body","triggerEventElementVisible":"body","triggerEventCustomScript":"/* In this example snippet, the widget will be triggered as soon as any scroll is detected.\\nCreate your own by resolving resolve() with true (which does trigger) or false (which doesn\'t trigger) */\\n\\nfunction launchIfScroll() {\\n\\treturn new Promise(resolve => {\\n\\t\\tdocument.addEventListener(\'scroll\', () => resolve(true), {once: true});\\n\\t});\\n}\\n\\nconst result = await launchIfScroll();\\nreturn resolve(result);","isOncePerPageTrigger":true,"triggerEventReengageDelay":10,"triggerEventDelay":2,"autoHide":true,"timeHide":2,"displayRecurrence":"everytime","displayRecurrence_day":5,"displayRecurrence_week":2,"displayRecurrence_month":1,"closingRecurrence":"week","closingRecurrence_day":5,"closingRecurrence_week":2,"closingRecurrence_month":1,"validationRecurrence":"session","validationRecurrence_day":5,"validationRecurrence_week":2,"validationRecurrence_month":1}',name:"@abtasty/promotional-banner"}]}},audienceTrigger:{name:"Audience of the account47583",id:"defa0606-2a41-4582-ac3a-096ec7ddd971",targeting_groups:[{position:0,id:"b826c73d-5d2a-4800-91f6-c5cc17f15487",targetings:[{id:"6f8b56ef-de63-4810-9f84-737696eb50a0",operator:"auto",position:0,targeting_type:40,mutationObserverEnabled:!1,conditions:[{id:"b3b2c195-f889-426c-9123-1850584d13dd",value:'var showPopup = false;\nif (!document.cookie.match("NASTnlSignUpID=")) {\n    showPopup = true;\n    hj(\'trigger\', \'hotjar_record\');\n}\nreturn showPopup &&\n    (\n        window.location.pathname === "/long-island/nassau"\n        ||\n        new Promise((resolve, reject) => {\n            const fallback = setTimeout(() => { resolve(false); }, 8 * 1000);\n            window.addEventListener("nd_mg2_onLoggedIn", e => {\n                if (nd_user.getProductID() === \'NVID\' || nd_user.getProductID() === undefined) {\n                    clearTimeout(fallback);\n                    resolve(false);\n                } else {\n                    clearTimeout(fallback);\n                    resolve(true);\n                }\n            });\n            window.addEventListener("nd_mg2_onNotAuthorized", e => {\n                clearTimeout(fallback);\n                resolve(false);\n            });\n        })\n\n    );',isAsync:!1}]},{id:"aafadc73-82cf-4fa1-b2d1-4e7991b84446",operator:"auto",position:1,targeting_type:51,mutationObserverEnabled:!1,conditions:[{id:"09b7a74b-102d-44d7-a94a-cb7ed71c5266",condition:10,value:"/long-island/nassau",count:2,include:!0},{id:"1947009f-6f6c-4286-b47d-1a9ef0f0cee1",condition:10,value:"/services",count:2,include:!1}]}]}],is_segment:!1},additionalType:""},743986:{id:743986,name:"newsletter toaster (Suffolk)",traffic:100,type:"ab",sub_type:"ab",parentID:0,targetingMode:"fastest",dynamicTrafficModulation:50,dynamicTestedTraffic:100,priority:0,isAsync:!1,heatmap:!1,size:16,mutationObserverEnabled:!1,scopes:{urlScope:[{include:!1,condition:10,value:"/services"},{include:!0,condition:10,value:"/suffolk"},{include:!1,condition:10,value:"projects.newsday"},{include:!1,condition:10,value:"ace-stage.newsday.com"}]},actionTrackings:{mousedown:[{name:"Sign up button",selector:"#ab_widget_container_promotional-banner_8024b33f_743986 .toasterInside form a"}]},variations:{924447:{id:924447,name:"Suffolk newsletter toaster",traffic:100,masterVariationId:0,modifications:[{id:3454308,selector:"",type:"addCSS",value:".fixed-bottom {position: fixed!important; bottom: 0!important;width:100%;z-index:5;margin:0;padding:0;border:0;}\n\n#ab_widget_container_promotional-banner_8024b33f_743986 .toasterInside{\n\tdisplay: flex !important;\n  \twidth: 100%;\n  \tjustify-content: center;\n  \talign-items: center;\n  \n}\n\n#ab_widget_container_promotional-banner_8024b33f_743986 .toasterInside > div:first-child{\n\ttext-align: left !important;\n  \tfont-size: 18px;\n  \tmargin-right: 50px;\n}\n\n#ab_widget_container_promotional-banner_8024b33f_743986 .toasterInside > div:first-child strong{\n\tfont-size: 36px;\n  \tdisplay: block;\n  \tmargin-bottom: 7px !important;\n}\n\n#ab_widget_container_promotional-banner_8024b33f_743986 .toasterInside form{\n\tdisplay: flex;\n  \tjustify-content: center;\n  \theight: fit-content !important;\n}\n\n#ab_widget_container_promotional-banner_8024b33f_743986 .toasterInside form a {\n\tborder: none !important;\n  \tmargin: 0 !important;\n    border-top-left-radius: 0px !important;\n    border-bottom-left-radius: 0px !important;\n  \twidth: 130px !important;\n    display: flex !important;\n    justify-content: center !important;\n    flex-direction: column !important;\n  \tfont-size: 17px !important;\n  \tbackground-color: #8ccafe !important;\n  \tcolor: #023965 !important;\n  \t-webkit-text-fill-color: #023965 !important;\n  \tmax-width: unset !important;\n}\n\n#ab_widget_container_promotional-banner_8024b33f_743986 .toasterInside form div input{\n\tborder: none;\n    border-top-left-radius: 6px;\n    border-bottom-left-radius: 6px;\n  \tborder-top-right-radius: 0px;\n  \tborder-bottom-right-radius: 0px;\n    color: black;\n    -webkit-text-fill-color: black;\n \twidth: 300px;\n    font-size: 17px;\n  \tpadding: 12px !important;\n}\n\n#ab_widget_container_promotional-banner_8024b33f_743986 .ab_widget_container_promotional-banner_content .signupSuccess p{\n\ttext-align: center !important;\n  \tmax-width: unset !important;\n}\n\n#ab_widget_container_promotional-banner_8024b33f_743986 .ab_widget_container_promotional-banner_content{\n\toverflow: hidden\n}\n\n#ab_widget_container_promotional-banner_8024b33f_743986 .ab_widget_container_promotional-banner_content .moreNL{\n\tmax-width: unset !important;\n  \tmargin: 11px 0 0 0 !important;\n  \tdisplay: block;\n}\n\n#ab_widget_container_promotional-banner_8024b33f_743986 .promotionalbanner_container_8024b33f_743986{\n\tposition: relative;\n  \tz-index: 1;\n}\n#ab_widget_container_promotional-banner_8024b33f_743986 .ab_widget_container_promotional-banner_close_button{\n\tz-index: 2;\n}\n#ab_widget_container_promotional-banner_8024b33f_743986 .ab_widget_container_promotional-banner_content::after{\n\tcontent: '';\n    background-color: #003965;\n  \tborder: 5px solid #8ccbff;\n    position: absolute;\n    left: calc(50% + -33px);\n    margin-left: -500px;\n    width: 1100px;\n    height: 10000px;\n    vertical-align: middle;\n    top: 50%;\n    margin-top: -5000px;\n    transform: rotate(\n22.5deg\n);\n}\n\n\n@media (max-width:750px) {\nBODY .abtasty-banner-wrapper {\n    display: none!important;\n}\n}\n\n@media (max-width: 1250px) {\nBODY #ab_widget_container_promotional-banner_8024b33f_743986 {\n    display: none;\n}\n}"},{id:3454309,selector:"#ab_widget_container_promotional-banner_b3f2d467_743986 .ab_widget_container_promotional-banner_content .MG2login.active",type:"customScriptNew",oldValue:'setTimeout(function () { \nvar loginLink = $(".MG2login");\nconsole.warn("bigtasty 6");\n}, 1500);'},{id:3454310,selector:"",type:"customScriptNew",oldValue:"const newsletter = {\n\temptyEmailMsg: 'Enter a valid email address!',\n\n\tmatherPostNewsletterEvent: (event, options) => {\n\t\t(window._matherq = window._matherq || []).push(['newsletterEvent', event, options]);\n\t},\n\n\tescapeHTML(str) { // prevent SQL injection measurement\n\t\tif (str !== undefined) {\n\t\t\tstr = str.replace(/</gi, '&lt;').replace(/>/gi, '&gt;').replace(/\"/g, '&quot;');\n\t\t}\n\t\treturn str;\n\t},\n\n\tsetCookie: (name, value, days) => {\n\t\tlet expires;\n\t\tif (days) {\n\t\t\tvar date = new Date();\n\t\t\tdate.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n\t\t\texpires = \"; expires=\" + date.toGMTString();\n\t\t} else {\n\t\t\texpires = \"\";\n\t\t}\n\t\tdocument.cookie = encodeURIComponent(name) + \"=\" + encodeURIComponent(value) + expires + \"; path=/\";\n\t}\n};\n\n$(() => {\n\n\tif (typeof nd_user !== \"undefined\" && typeof nd_user.info.get(\"email\") !== \"undefined\") {\n\t\tnewsletter.userContact = nd_user.info.get(\"email\");\n\t\t$('.newsletterSignupToaster #subscribeForm :input[name=\"userContact\"]').val(newsletter.userContact);\n\t\t$('.unsubContainer .moduleBody p span').html(newsletter.userContact);\n\t}\n      \n\t$('body').on('click', '.toasterInside form a.btn', function (e) {\n\t\te.preventDefault();\n\t\tlet $formWrapper = $(this).siblings('.formBorderModal'),\n\t\t\t$form = $(this).parents('form'),\n\t\t\tsailthruID = $formWrapper.find('input[name=\"sub\"]').val(); // for A/B Tasty\n\n\t\t$(this).removeClass(\"disable\");\n\t\t$formWrapper.find('.error').removeClass('error');\n\n\t\t/// if email address field is blank\n\t\tif ($formWrapper.find('input[name=\"userContact\"]').val() === '' || $formWrapper.find('input[name=\"userContact\"]') === newsletter.emptyEmailMsg) {\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').addClass('error');\n\t\t\treturn false;\n\t\t} else if ($formWrapper.find('input[name=\"userContact\"]').val().indexOf('@') < 0) {\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').addClass('error');\n\t\t\treturn false;\n\t\t}\n\n\t\tnewsletter.userContact = $formWrapper.find('input[name=\"userContact\"]').val();\n\n\t\t// SailThru id starts with \"nd\" or \"am\"\n\t\tif ($formWrapper.find('input[name=\"sub\"]').val().substr(0, 2).toLowerCase() === \"nd\" || $formWrapper.find('input[name=\"sub\"]').val().substr(0, 2).toLowerCase() === \"am\") {\n\t\t\tif ($form.attr('action') !== '') {\n\t\t\t\turl = $form.attr('action');\n\t\t\t} else {\n\t\t\t\tif (window.location.href.indexOf(':8080') > -1) {\n\t\t\t\t\turl = 'http://' + window.location.hostname + ':8080' + '/managenewsletters';\n\t\t\t\t} else {\n\t\t\t\t\turl = 'https://' + window.location.hostname + '/managenewsletters';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet respMsg;\n\t\t\tif ($formWrapper.parents('.toasterInside').data('confirm') && $formWrapper.parents('.toasterInside').data('confirm') !== '') {\n\t\t\t\trespMsg = $formWrapper.parents('.toasterInside').data('confirm');\n\t\t\t} else {\n\t\t\t\tconst thistarget = (window.location.href.indexOf('7.') > -1) ? '_blank' : \"\";\n\t\t\t\trespMsg = 'Sign up completed. <a class=\"moreNL\" href=\"/newsletters\" target=\"' + thistarget + '\">See more Newsletters</a>';\n\t\t\t}\n\n\t\t\t// build the input fields object\n\t\t\tconst postData = {};\n\t\t\t$.each($form.serializeArray(), function (i, field) {\n\t\t\t\tpostData[field.name] = field.value;\n\t\t\t});\n\t\t\tpostData.userContact = newsletter.escapeHTML(newsletter.userContact);\n\t\t\tpostData.list = $formWrapper.find('input[name=\"sub\"]').val();\n\t\t\tpostData.origin = $formWrapper.find('input[name=\"origin\"]').val();\n\t\t\tpostData.site = $formWrapper.find('input[name=\"site\"]').val();\n\t\t\tif (!!postData.origin) {} else {\n\t\t\t\tpostData.origin = \"newsday\";\n\t\t\t}\n\n\t\t\tif ($formWrapper.find('input[name=\"email\"]').val() !== '') {\n\t\t\t\tpostData.search_token = '';\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t$.ajax({\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\turl: url,\n\t\t\t\t\tdata: postData,\n\t\t\t\t\tdataType: \"json\",\n\t\t\t\t\tcache: false,\n\t\t\t\t\tsuccess: function (data) {\n\t\t\t\t\t\tif (!!data && data.response === \"{ok=true}\") { // Cheetahmail response \"OK\", SailThru response \"{ok=true}\"\n\t\t\t\t\t\t\t$form.siblings('.signupSuccess').html(\"<p>\" + respMsg + \"</p>\").show();\n\t\t\t\t\t\t\t$formWrapper.parent('form').remove();\n\n\t\t\t\t\t\t\tnewsletter.setCookie(\"SUFnlSignUpID\", sailthruID, 90); // for A/B Tasty to check if the user has already signed up\n\n\t\t\t\t\t\t\t/* only from newsday - there are other forms outside newsday not passing origin */\n\t\t\t\t\t\t\tif (postData.origin === \"newsday\") {\n\t\t\t\t\t\t\t\twindow.nlname = postData.list;\n\t\t\t\t\t\t\t\t_satellite.track(\"nlsuccess\");\n\t\t\t\t\t\t\t\tif (navigator.cookieEnabled && window.location.hostname.indexOf('.newsday.com') >= 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdocument.cookie = \"newsletterSignupEmail=\" + window.btoa(postData.userContact) + \";domain=.newsday.com;path=/\";\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (postData.site === \"connext\") {\n\t\t\t\t\t\t\t\tif (navigator.cookieEnabled && ndGlobal.site === \"newsday\") {\n\t\t\t\t\t\t\t\t\twindow.nlname = postData.list;\n\t\t\t\t\t\t\t\t\t_satellite.track(\"nlsuccess\");\n\t\t\t\t\t\t\t\t\tdate = new Date();\n\t\t\t\t\t\t\t\t\tdate.setTime(date.getTime() + (365 * 24 * 60 * 60 * 1000));\n\t\t\t\t\t\t\t\t\texpires = \"; expires=\" + date.toGMTString();\n\t\t\t\t\t\t\t\t\tdocument.cookie = \"c_ecapture=true;domain=.newsday.com;\" + expires + \";path=/\";\n\t\t\t\t\t\t\t\t\tdocument.cookie = \"c_newsletterSignupEmail=\" + window.btoa(postData.userContact) + \";domain=.newsday.com;path=/\";\n\n\t\t\t\t\t\t\t\t\t/* newsletter-data */\n\t\t\t\t\t\t\t\t\tvar newsletter_name = window.nlname;\n\t\t\t\t\t\t\t\t\tvar newsletter_user = postData.userContact;\n\t\t\t\t\t\t\t\t\tvar action_name = _satellite.getVar('mg2 action name');\n\t\t\t\t\t\t\t\t\tvar offers = [\n\t\t\t\t\t\t\t\t\t\t{ offerName: newsletter_name, offerId: newsletter_name, campaign: action_name }\n\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\tnewsletter.matherPostNewsletterEvent({ action: 'signup_completed', offers: offers }, { email: newsletter_user });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//if (_satellite.getVar('content type') !== \"front\") {Connext.Run();}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if ((!!data && data.response === \"Invalid email: \" + newsletter.userContact) || (!!data && data.response === \"err:email:illegal\")) {\n\t\t\t\t\t\t\t// invalid email address response from SailThru\n\t\t\t\t\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (err) {\n\t\t\t\tconsole.log(\"Error signing up. \" + err.message);\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.log('You need to set up the correct SailThru id.');\n\t\t}\n\t}).on('focus', '.toasterInside :input[name=\"userContact\"]', function () {\n\t\t$(this).removeClass('error').find('.error').removeClass('error');\n\t\tif ($(this).val() === newsletter.emptyEmailMsg) {\n\t\t\t$(this).val('');\n\t\t}\n\t}).on('keyup', '.toasterInside form :input[name=\"userContact\"]', function () {\n\t\tif ($(this).val().indexOf('@')) {\n\t\t\t$(this).parent('.formBorderModal').siblings('a.btn').removeClass(\"disable\");\n\t\t}\n\t}).on('keypress', '.toasterInside form :input[name=\"userContact\"]', function (e) {\n\t\t// return key hit\n\t\tif (e.which === 13) {\n\t\t\t$(this).parent('.formBorderModal').siblings('a.btn').click();\n\t\t\treturn false;\n\t\t}\n\t});\n\n});\n\n/*$(document).on(\"onNotAuthorized\", function() {\n    $(\".ab_widget_container_popin-image\").hide();\n});*/"}],widgets:[{id:"8024b33f-0953-4570-bc56-583b688c906a",version:"1.1",config:'{"layout":"free","elementReferrer":"#toaster-wrap","referrerInsertType":"afterbegin","message":"<div class=\'toasterInside\'>\\n    <div><strong>Get Suffolk News This Week.</strong>\\n       A weekly roundup of Suffolk County news, crime and politics.</div>\\n\\n    <form action=\\"\\" method=\\"POST\\">\\n        <div class=\\"formBorderModal\\">\\n            <input type=\\"text\\" class=\\"form-control email-enter\\" name=\\"userContact\\" value=\\"\\" placeholder=\\"Email address\\"\\n                required=\\"required\\">\\n            <input type=\\"hidden\\" name=\\"sub\\" value=\\"nd_edit_suffolk_newsletter\\">\\n            <input name=\\"requestType\\" type=\\"hidden\\" value=\\"new_subscription\\" />\\n            <input name=\\"responseType\\" type=\\"hidden\\" value=\\"json\\" />\\n            <input name=\\"version\\" type=\\"hidden\\" value=\\"2\\" />\\n            <input name=\\"confirmationEmail\\" type=\\"hidden\\" value=\\"\\" />\\n            <input name=\\"email\\" type=\\"hidden\\" value=\\"\\" />\\n            <input name=\\"grc-response\\" type=\\"hidden\\" value=\\"verified\\" />\\n            <input name=\\"nsource\\" type=\\"hidden\\" value=\\"A\\" />\\n            <input name=\\"origin\\" type=\\"hidden\\" value=\\"sailthru\\" />\\n            <input name=\\"site\\" type=\\"hidden\\" value=\\"connext\\" />\\n        </div>\\n        <a class=\\"btn disable\\" href=\\"#\\">Sign up</a>\\n    </form>\\n    <div class=\\"signupSuccess\\"></div>\\n</div>","linkType":false,"buttonText":"Sign up","buttonUrl":"https://subscribe.newsday.com/Subscribe2?sitecode=Ncom&ofrgp_id=936&returnUrl=https%3A%2F%2Fwww.newsday.com%2Fservices%2Fprofile-7.386%3Fview%3Ddcards%26clearUserState%3Dtrue","bannerUrl":"https://www.newsday.com","openInNewTab":false,"textAlign":"center","textColor":"rgba(255, 255, 255, 1)","fontName":"inherit","fontStyle":"font-weight: bold !important;","fontSize":15,"buttonsBorderWidth":2,"buttonsBorderColor":"rgba(255, 255, 255, 1)","buttonsBorderRadius":4,"buttonsBackgroundColor":"rgba(103, 196, 222, 1)","buttonsTextColor":"rgba(25, 34, 93, 1)","containerMargin":[{"top":0,"left":0,"bottom":0,"right":0}],"containerPadding":[{"top":20,"right":60,"bottom":20,"left":60}],"backgroundColor":"rgba(0, 101, 173, 1)","isBackgroundImage":false,"backgroundImage":"https://assets.projects.newsday.com/projects-uploads/uploads/2021/02/toaster-winter-trees.png","backgroundSize":"auto","backgroundPosition":"bottom right","backgroundRepeat":false,"dropShadow":false,"dropShadowColor":"rgba(57, 57, 57, 0.25);","dropShadowBlur":10,"closeButton":true,"borderWidth":0,"borderColor":"rgba(222, 236, 239, 1)","borderRadius":0,"triggerEvent":"pageLoad","triggerEventClick":"body","triggerEventElementVisible":"body","triggerEventCustomScript":"/* In this example snippet, the widget will be triggered as soon as any scroll is detected.\\nCreate your own by resolving resolve() with true (which does trigger) or false (which doesn\'t trigger) */\\n\\nfunction launchIfScroll() {\\n\\treturn new Promise(resolve => {\\n\\t\\tdocument.addEventListener(\'scroll\', () => resolve(true), {once: true});\\n\\t});\\n}\\n\\nconst result = await launchIfScroll();\\nreturn resolve(result);","isOncePerPageTrigger":true,"triggerEventReengageDelay":10,"triggerEventDelay":2,"autoHide":true,"timeHide":2,"displayRecurrence":"everytime","displayRecurrence_day":5,"displayRecurrence_week":2,"displayRecurrence_month":1,"closingRecurrence":"week","closingRecurrence_day":5,"closingRecurrence_week":2,"closingRecurrence_month":1,"validationRecurrence":"session","validationRecurrence_day":5,"validationRecurrence_week":2,"validationRecurrence_month":1}',name:"@abtasty/promotional-banner"}]}},audienceTrigger:{name:"Audience of the account47583",id:"94c5cd8f-329a-4664-93c9-597cf988f230",targeting_groups:[{position:0,id:"fe670679-fb7b-4950-a1b4-08a416708814",targetings:[{id:"35aec569-3fa0-4caa-991e-836caefc235f",operator:"auto",position:0,targeting_type:40,mutationObserverEnabled:!1,conditions:[{id:"2469c34e-a953-4a17-994b-4505d4c706ff",value:'var showPopup = false;\nif (!document.cookie.match("SUFnlSignUpID=")) {\n    showPopup = true;\n    hj(\'trigger\', \'hotjar_record\');\n}\nreturn showPopup &&\n    (\n        window.location.pathname === "/long-island/suffolk"\n        ||\n        new Promise((resolve, reject) => {\n            const fallback = setTimeout(() => { resolve(false); }, 8 * 1000);\n            window.addEventListener("nd_mg2_onLoggedIn", e => {\n                if (nd_user.getProductID() === \'NVID\' || nd_user.getProductID() === undefined) {\n                    clearTimeout(fallback);\n                    resolve(false);\n                } else {\n                    clearTimeout(fallback);\n                    resolve(true);\n                }\n            });\n            window.addEventListener("nd_mg2_onNotAuthorized", e => {\n                clearTimeout(fallback);\n                resolve(false);\n            });\n        })\n\n    );',isAsync:!1}]},{id:"d1b7050c-2392-4814-b877-dc7d3b377be7",operator:"auto",position:1,targeting_type:51,mutationObserverEnabled:!1,conditions:[{id:"1a385b50-8cce-424c-9daf-f760bb1f1788",condition:10,value:"/suffolk",count:2,include:!0},{id:"bc52f645-f402-4c2e-8e9f-433e7ff8c31d",condition:10,value:"/services",count:2,include:!1}]}]}],is_segment:!1},additionalType:""},754324:{id:754324,name:"SUB - NL split",traffic:67,type:"ab",sub_type:"ab",parentID:0,globalCode:"window.addEventListener('nd_user_data_populated', (e) => {\nvar toasterHide = document.createElement('style');\n  toasterHide.innerHTML = `\n  #ab_widget_container_popin-simple_81f395d3_754324,#ab_widget_container_popin-image_4da2a7d8_754324 {\n  display: none !important;\n  }\n  `;\n  document.head.appendChild(toasterHide);\n});",targetingMode:"fastest",dynamicTrafficModulation:50,dynamicTestedTraffic:100,priority:0,isAsync:!0,heatmap:!1,size:16,mutationObserverEnabled:!1,scopes:{urlScope:[{include:!1,condition:10,value:"/lifestyle/restaurants"},{include:!1,condition:10,value:"/sports"},{include:!1,condition:10,value:"/sports/high-school"},{include:!1,condition:10,value:"projects.newsday.com"},{include:!1,condition:10,value:"subscribe.newsday.com"},{include:!1,condition:10,value:"productions.newsday.com"},{include:!1,condition:10,value:"/services"},{include:!1,condition:10,value:"facesoflongisland.newsday.com"},{include:!1,condition:10,value:"test.newsday"},{include:!1,condition:10,value:"ace-stage.newsday.com"}]},actionTrackings:{mousedown:[{name:"Subscribe Button",selector:"#ab_widget_container_popin-simple_81f395d3_754324 .popin_text_container div a"},{name:"NL sign up button",selector:"#ab_widget_container_popin-image_4da2a7d8_754324 form a"},{name:"Desktop sub",selector:"#masthead .logStatus div a"}]},audienceTrigger:{name:"Audience of the account47583",id:"47038bd7-7dd3-43f3-950a-bf5a297f34a4",targeting_groups:[{position:0,id:"5c68c21c-a7f8-4837-b48a-478181c2718d",targetings:[{id:"43dc9d44-b2dc-41fe-8f76-c45df63b5917",operator:"auto",position:0,targeting_type:51,mutationObserverEnabled:!1,conditions:[{id:"06813142-59b3-4ff7-8762-40da7cc838e8",condition:10,value:"/services",count:2,include:!1},{id:"28710622-bf18-4a40-bc6e-0bce79b0d663",condition:10,value:"/lifestyle/restaurants",count:2,include:!1},{id:"31dde9cc-7032-42fa-80dd-7249d9310a5a",condition:10,value:"/sports/high-school",count:2,include:!1},{id:"454ee42b-5f28-4467-877c-67121dba0ad4",condition:10,value:"productions.newsday.com",count:2,include:!1},{id:"5dc63c8e-4574-4f87-912c-43e12d9ec404",condition:10,value:"/sports",count:2,include:!1},{id:"dda43d78-a315-4f71-9f84-c2ef7343ff25",condition:10,value:"projects.newsday.com",count:2,include:!1},{id:"f9ac3bc7-0be7-4d7a-ae70-2241373c66fa",condition:10,value:"subscribe.newsday.com",count:2,include:!1},{id:"ffe82f23-2214-4ff7-8793-5d3b2320255d",condition:10,value:"local.newsday.com",count:2,include:!1}]},{id:"44e234f6-27b0-468f-9662-1bfd8aa6e34a",operator:"auto",position:1,targeting_type:40,mutationObserverEnabled:!1,conditions:[{id:"e49c3c0f-21e7-4a59-98ef-bf09c346f242",value:'if (document.cookie.match("FMnlSignUpID=")) {\n    var FMmodalHide = document.createElement(\'style\');\n    FMmodalHide.innerHTML = `\n    #ab_widget_container_popin-image_4da2a7d8_754324 {\n    display: none !important;\n    }\n    `;\n    document.head.appendChild(FMmodalHide);\n}\n\nif(ndGlobal.pageType === \'front\'){\n    return new Promise((resolve, reject) => {\n        const fallback = setTimeout(() => { resolve(false); }, 8 * 1000);\n        window.addEventListener("nd_mg2_onLoggedIn", e => {\n            clearTimeout(fallback);\n            resolve(false);\n        });\n        window.addEventListener("nd_mg2_onNotAuthorized", e => {\n            clearTimeout(fallback);\n            resolve(true);\n          \n        });\n    });\n}',isAsync:!1}]}]}],is_segment:!1},campaignHash:"afa96aa7d9dceda9a27f683f0714ff0d",asyncVariationInfoById:{937545:{id:937545,traffic:34,name:"SUB exit intent"},937546:{id:937546,traffic:33,name:"NL exit intent"}},additionalType:""},755454:{id:755454,name:"checkout exit intent (shop page - punched up) ",traffic:100,type:"ab",sub_type:"ab",parentID:0,globalCode:'var observer = new MutationObserver(function() {\n    if (document.contains(document.querySelector(".ab_widget_container_popin-simple"))) {\n        document.querySelector(".ab_widget_container_popin-simple button").innerHTML = \'No Thanks\'\n        observer.disconnect();\n    }\n});\n\nobserver.observe(document,{attributes: false, childList: true, characterData: false, subtree:true});',targetingMode:"fastest",dynamicTrafficModulation:50,dynamicTestedTraffic:100,priority:0,isAsync:!1,heatmap:!1,size:7,mutationObserverEnabled:!1,scopes:{urlScope:[{include:!0,condition:1,value:"https://subscribe.newsday.com/"},{include:!0,condition:1,value:"https://subscribe.newsday.com/?DOrange=SB01"},{include:!0,condition:10,value:"projects.newsday.com/services/subscribe-offers/"}]},actionTrackings:{mousedown:[{name:"Subscribe Button",selector:"#ab_widget_container_popin-simple_7dcc1960_755454 .popin_text_container div a"}]},variations:{938934:{id:938934,name:"Dont miss out 2",traffic:100,masterVariationId:0,modifications:[{id:3496012,selector:"",type:"addCSS",value:"#ab_widget_container_popin-simple_7dcc1960_755454{\n    -webkit-font-smoothing: antialiased;\n}\n\n#ab_widget_container_popin-simple_7dcc1960_755454 .ab_widget_container_popin-simple_content{\n\tcolor: #fff;\n    background: rgb(70,0,129) !important;\nbackground: linear-gradient(90deg, rgba(70,0,129,1) 0%, rgba(153,0,0,1) 100%) !important;\n}\n\n#ab_widget_container_popin-simple_7dcc1960_755454 .ab_widget_container_popin-simple_content h2{\n\tmargin-bottom: 66px !important;\n  \tposition: relative;\n  \tfont-weight: 900 !important;\n    letter-spacing: -.05em;\n}\n\n#ab_widget_container_popin-simple_7dcc1960_755454 .ab_widget_container_popin-simple_content h2::before{\n\tcontent: '';\n \tposition: absolute;\n    width: 100px;\n    border-top: 3px solid #D70045;\n    bottom: -11px;\n    margin: 0 auto;\n    left: 0;\n    right: 0;\n}\n\n\n#ab_widget_container_popin-simple_7dcc1960_755454 .ab_widget_container_popin-simple_content span{\n  \tfont-weight: bold;\n    margin-top: 5px;\n    display: block;\n  \tfont-weight: normal;\n}\n\n#ab_widget_container_popin-simple_7dcc1960_755454 .ab_widget_container_popin-simple_content .popin_simple_text .bestDeal{\n    font-size: 24px;\n  \tfont-weight: 900 !important;\n}\n\n#ab_widget_container_popin-simple_7dcc1960_755454 .ab_widget_container_popin-simple_content span span{\n\tdisplay: block;\n    font-size: 80px;\n    margin-bottom: 11px;\n  \tfont-weight: 900 !important;\n}\n#ab_widget_container_popin-simple_7dcc1960_755454 .ab_widget_container_popin-simple_content a{\n  \twidth: 330px !important;\n\tpadding: 13px 66px 18px 66px !important;\n}\n\n.popin_text_container .modalClose{\n  \t-webkit-text-fill-color: unset !important;\n\tbackground:none !important;\n  \tborder: none;\n  \tcolor: #515151 !important;\n  \tfont-size: 18px !important;\n  \ttext-decoration: underline;\n  \tmargin-top: 11px;\n}\n\n#ab_widget_container_popin-simple_7dcc1960_755454 .ab_widget_container_popin-simple_content .ab_widget_container_popin-simple_close_button{\n\tbottom: 47px;\n    top: unset !important;\n    left: 0;\n    right: 0 !important;\n    margin: 0 auto !important;\n    text-decoration: underline;\n    font-size: 18px !important;\n  \tline-height: unset !important;\n  \twidth: 100px !important;\n}\n\n@media screen and (min-width: 600px){\n  #ab_widget_container_popin-simple_7dcc1960_755454 .ab_widget_container_popin-simple_content{\n  \tmin-width: 580px;\n  }\n}"}],widgets:[{id:"7dcc1960-6032-4c17-a6f7-ab76dc4fa610",version:"1.2",config:'{"layout":"popin","autoWidth":true,"popinPercentWidth":50,"popinPixelsWidth":615,"widthUnit":"px","autoHeight":true,"popinPercentHeight":50,"popinPixelsHeight":274,"heightUnit":"vh","popinPosition":[{"x":1,"y":1}],"zindex":"9999","zindexCustom":1,"isTitle":true,"title":"Don\'t miss out!","textContent":"<span class=\\"bestDeal\\">GET OUR BEST DEAL FOR DIGITAL</span>\\n<span><span>$1</span> for 5 months</span>","linkType":"button","buttonText":"GET THIS OFFER","redirectionUrl":"https://subscribe.newsday.com/Subscribe4?sitecode=Ncom&ofrgp_id=1511&returnUrl=https%3A%2F%2Fwww.newsday.com%2Fservices%2Fprofile-7.386%3Fview%3Ddcards%26clearUserState%3Dtrue","openInNewTab":false,"titleTextAlign":"center","titleTextColor":"rgba(255, 255, 255, 1)","titleFontName":"inherit","titleFontStyle":"font-weight: bold !important;","titleFontSize":44,"textAlign":"center","textColor":"rgba(255, 255, 255, 1)","fontName":"inherit","fontStyle":"font-style: normal !important; font-weight: normal;","fontSize":21,"buttonsBorderWidth":0,"buttonsBorderColor":"rgba(87, 184, 199, 1)","buttonsBorderRadius":4,"buttonsBackgroundColor":"rgba(63, 81, 181, 1)","buttonsTextColor":"rgba(255, 255, 255, 1)","buttonsAlign":"center","buttonsFontName":"inherit","buttonsFontStyle":"font-weight: bold !important;","buttonsFontSize":24,"containerMargin":[{"top":0,"left":0,"bottom":0,"right":0}],"containerPadding":[{"top":50,"right":100,"bottom":85,"left":100}],"backgroundColor":"rgba(247, 247, 247, 1)","isBackgroundImage":false,"backgroundImage":"https://widgets-images.abtasty.com/widgets-default-image.png","backgroundSize":"cover","backgroundPosition":"center","backgroundRepeat":false,"dropShadow":false,"dropShadowColor":"rgba(57, 57, 57, 0.25);","dropShadowBlur":10,"borderWidth":0,"borderColor":"rgba(0, 127, 145, 1)","borderRadius":12,"overlay":true,"overlayColor":"rgba(0, 0, 0, 0.6)","overlayClickable":true,"closeButton":true,"closeButtonPosition":"in","closeButtonSize":16,"closeButtonColor":"rgba(119, 119, 119, 1)","closeButtonBackgroundColor":"rgba(255, 255, 255, 0)","closeButtonBorderRadius":0,"closeButtonBorderWidth":0,"closeButtonBorderColor":"rgba(57, 57, 57, 1)","triggerEvent":"exitIntent","triggerEventClick":"body","triggerEventElementVisible":"body","triggerEventCustomScript":"/* In this example snippet, the widget will be triggered as soon as any scroll is detected.\\nCreate your own by resolving resolve() with true (which does trigger) or false (which doesn\'t trigger) */\\n\\nfunction launchIfScroll() {\\n\\treturn new Promise(resolve => {\\n\\t\\tdocument.addEventListener(\'scroll\', () => resolve(true), {once: true});\\n\\t});\\n}\\n\\nconst result = await launchIfScroll();\\nreturn resolve(result);","isOncePerPageTrigger":true,"triggerEventReengageDelay":10,"triggerEventDelay":0,"autoHide":true,"timeHide":2,"displayRecurrence":"everytime","displayRecurrence_day":5,"displayRecurrence_week":2,"displayRecurrence_month":1,"closingRecurrence":"session","closingRecurrence_day":5,"closingRecurrence_week":2,"closingRecurrence_month":1,"validationRecurrence":"session","validationRecurrence_day":5,"validationRecurrence_week":2,"validationRecurrence_month":1}',name:"@abtasty/popin-simple"}]}},additionalType:"patch"},755455:{id:755455,name:"checkout exit intent (check out page - punched up)",traffic:100,type:"ab",sub_type:"ab",parentID:0,globalCode:'var observer = new MutationObserver(function() {\n    if (document.contains(document.querySelector(".ab_widget_container_popin-simple"))) {\n        document.querySelector(".ab_widget_container_popin-simple button").innerHTML = \'No Thanks\'\n        observer.disconnect();\n    }\n});\n\nobserver.observe(document,{attributes: false, childList: true, characterData: false, subtree:true});',targetingMode:"fastest",dynamicTrafficModulation:50,dynamicTestedTraffic:100,priority:0,isAsync:!1,heatmap:!1,size:7,mutationObserverEnabled:!1,scopes:{urlScope:[{include:!0,condition:10,value:"subscribe.newsday.com"}]},actionTrackings:{mousedown:[{name:"Subscribe Button",selector:"#ab_widget_container_popin-simple_35a396d0_755455 .popin_text_container div a"}]},variations:{938935:{id:938935,name:"Dont miss out 2",traffic:100,masterVariationId:0,modifications:[{id:3496013,selector:"",type:"addCSS",value:"#ab_widget_container_popin-simple_35a396d0_755455{\n    -webkit-font-smoothing: antialiased;\n}\n\n#ab_widget_container_popin-simple_35a396d0_755455 .ab_widget_container_popin-simple_content{\n\tcolor: #fff;\n    background: rgb(70,0,129) !important;\nbackground: linear-gradient(90deg, rgba(70,0,129,1) 0%, rgba(153,0,0,1) 100%) !important;\n}\n\n#ab_widget_container_popin-simple_35a396d0_755455 .ab_widget_container_popin-simple_content h2{\n\tmargin-bottom: 66px !important;\n  \tposition: relative;\n  \tfont-weight: 900 !important;\n    letter-spacing: -.05em;\n}\n\n#ab_widget_container_popin-simple_35a396d0_755455 .ab_widget_container_popin-simple_content h2::before{\n\tcontent: '';\n \tposition: absolute;\n    width: 100px;\n    border-top: 3px solid #D70045;\n    bottom: -11px;\n    margin: 0 auto;\n    left: 0;\n    right: 0;\n}\n\n\n#ab_widget_container_popin-simple_35a396d0_755455 .ab_widget_container_popin-simple_content span{\n  \tfont-weight: bold;\n    margin-top: 5px;\n    display: block;\n  \tfont-weight: normal;\n}\n\n#ab_widget_container_popin-simple_35a396d0_755455 .ab_widget_container_popin-simple_content .popin_simple_text .bestDeal{\n    font-size: 24px;\n  \tfont-weight: 900 !important;\n}\n\n#ab_widget_container_popin-simple_35a396d0_755455 .ab_widget_container_popin-simple_content span span{\n\tdisplay: block;\n    font-size: 80px;\n    margin-bottom: 11px;\n  \tfont-weight: 900 !important;\n}\n#ab_widget_container_popin-simple_35a396d0_755455 .ab_widget_container_popin-simple_content a{\n  \twidth: 330px !important;\n\tpadding: 13px 66px 18px 66px !important;\n}\n\n.popin_text_container .modalClose{\n  \t-webkit-text-fill-color: unset !important;\n\tbackground:none !important;\n  \tborder: none;\n  \tcolor: #515151 !important;\n  \tfont-size: 18px !important;\n  \ttext-decoration: underline;\n  \tmargin-top: 11px;\n}\n\n#ab_widget_container_popin-simple_35a396d0_755455 .ab_widget_container_popin-simple_content .ab_widget_container_popin-simple_close_button{\n\tbottom: 47px;\n    top: unset !important;\n    left: 0;\n    right: 0 !important;\n    margin: 0 auto !important;\n    text-decoration: underline;\n    font-size: 18px !important;\n  \tline-height: unset !important;\n  \twidth: 100px !important;\n}\n\n@media screen and (min-width: 600px){\n  #ab_widget_container_popin-simple_35a396d0_755455 .ab_widget_container_popin-simple_content{\n  \tmin-width: 580px;\n  }\n}"}],widgets:[{id:"35a396d0-3022-446a-bd57-15f2956f0330",version:"1.2",config:'{"layout":"popin","autoWidth":true,"popinPercentWidth":50,"popinPixelsWidth":615,"widthUnit":"px","autoHeight":true,"popinPercentHeight":50,"popinPixelsHeight":274,"heightUnit":"vh","popinPosition":[{"x":1,"y":1}],"zindex":"9999","zindexCustom":1,"isTitle":true,"title":"Don\'t miss out!","textContent":"<span class=\\"bestDeal\\">GET OUR BEST DEAL FOR DIGITAL</span>\\n<span><span>$1</span> for 5 months</span>","linkType":"button","buttonText":"GET THIS OFFER","redirectionUrl":"https://subscribe.newsday.com/Subscribe4?sitecode=Ncom&ofrgp_id=1510&returnUrl=https%3A%2F%2Fwww.newsday.com%2Fservices%2Fprofile-7.386%3Fview%3Ddcards%26clearUserState%3Dtrue","openInNewTab":false,"titleTextAlign":"center","titleTextColor":"rgba(255, 255, 255, 1)","titleFontName":"inherit","titleFontStyle":"font-weight: bold !important;","titleFontSize":44,"textAlign":"center","textColor":"rgba(255, 255, 255, 1)","fontName":"inherit","fontStyle":"font-style: normal !important; font-weight: normal;","fontSize":21,"buttonsBorderWidth":0,"buttonsBorderColor":"rgba(87, 184, 199, 1)","buttonsBorderRadius":4,"buttonsBackgroundColor":"rgba(63, 81, 181, 1)","buttonsTextColor":"rgba(255, 255, 255, 1)","buttonsAlign":"center","buttonsFontName":"inherit","buttonsFontStyle":"font-weight: bold !important;","buttonsFontSize":24,"containerMargin":[{"top":0,"left":0,"bottom":0,"right":0}],"containerPadding":[{"top":50,"right":100,"bottom":85,"left":100}],"backgroundColor":"rgba(247, 247, 247, 1)","isBackgroundImage":false,"backgroundImage":"https://widgets-images.abtasty.com/widgets-default-image.png","backgroundSize":"cover","backgroundPosition":"center","backgroundRepeat":false,"dropShadow":false,"dropShadowColor":"rgba(57, 57, 57, 0.25);","dropShadowBlur":10,"borderWidth":0,"borderColor":"rgba(0, 127, 145, 1)","borderRadius":12,"overlay":true,"overlayColor":"rgba(0, 0, 0, 0.6)","overlayClickable":true,"closeButton":true,"closeButtonPosition":"in","closeButtonSize":16,"closeButtonColor":"rgba(119, 119, 119, 1)","closeButtonBackgroundColor":"rgba(255, 255, 255, 0)","closeButtonBorderRadius":0,"closeButtonBorderWidth":0,"closeButtonBorderColor":"rgba(57, 57, 57, 1)","triggerEvent":"exitIntent","triggerEventClick":"body","triggerEventElementVisible":"body","triggerEventCustomScript":"/* In this example snippet, the widget will be triggered as soon as any scroll is detected.\\nCreate your own by resolving resolve() with true (which does trigger) or false (which doesn\'t trigger) */\\n\\nfunction launchIfScroll() {\\n\\treturn new Promise(resolve => {\\n\\t\\tdocument.addEventListener(\'scroll\', () => resolve(true), {once: true});\\n\\t});\\n}\\n\\nconst result = await launchIfScroll();\\nreturn resolve(result);","isOncePerPageTrigger":true,"triggerEventReengageDelay":10,"triggerEventDelay":0,"autoHide":true,"timeHide":2,"displayRecurrence":"everytime","displayRecurrence_day":5,"displayRecurrence_week":2,"displayRecurrence_month":1,"closingRecurrence":"session","closingRecurrence_day":5,"closingRecurrence_week":2,"closingRecurrence_month":1,"validationRecurrence":"session","validationRecurrence_day":5,"validationRecurrence_week":2,"validationRecurrence_month":1}',name:"@abtasty/popin-simple"}]}},audienceTrigger:{name:"Audience of the account47583",id:"7f39a905-0cb1-44ae-9ec9-f6c78ea10214",targeting_groups:[{position:0,id:"01236236-a06a-43df-8062-cef990800552",targetings:[{id:"8d987c20-c46b-49af-b9d9-c81ed1a6c6f7",operator:"auto",position:0,targeting_type:40,mutationObserverEnabled:!1,conditions:[{id:"f130c9ed-742f-446b-9625-800e9dd5aefd",value:"return window.location.hostname === 'subscribe.newsday.com' && window.location.href.toString().includes('id=1523')",isAsync:!1}]}]}],is_segment:!1},additionalType:""},764624:{id:764624,name:"Page 1 (inherited from duplication)",traffic:100,type:"subsegment",parentID:764625,targetingMode:"fastest",dynamicTrafficModulation:50,dynamicTestedTraffic:100,priority:0,isAsync:!0,heatmap:!1,size:1,mutationObserverEnabled:!1,scopes:{urlScope:[{include:!0,condition:10,value:"DOrange=SB01"},{include:!0,condition:40,value:"https://subscribe.newsday.com"}]},siblings:[764626],campaignHash:"79decc55476949d6cde6b4ae084f571b",asyncVariationInfoById:{950443:{id:950443,traffic:100,name:"redirect to toggle shop page"}},additionalType:"redirection"},764625:{id:764625,name:"Subscribe to Toggle Offer",type:"mastersegment",sub_type:"mpp",parentID:0,priority:0,children:[764624,764626],variations:{950444:{id:950444,name:"Variation 1"}}},764626:{id:764626,name:"Page 2 (new)",traffic:100,type:"subsegment",parentID:764625,targetingMode:"fastest",dynamicTrafficModulation:50,dynamicTestedTraffic:100,priority:0,isAsync:!0,heatmap:!1,size:1,mutationObserverEnabled:!1,scopes:{urlScope:[{include:!0,condition:40,value:"https://subscribe.newsday.com/"}]},siblings:[764624],campaignHash:"f0c37badb0ad2d07dcc144f075b18152",asyncVariationInfoById:{950445:{id:950445,traffic:100,name:"Variation 1"}},additionalType:"redirection"},780667:{id:780667,name:"Article Related Style",traffic:50,type:"ab",sub_type:"ab",parentID:0,targetingMode:"waituntil",dynamicTrafficModulation:50,dynamicTestedTraffic:100,priority:0,isAsync:!0,heatmap:!1,size:1,mutationObserverEnabled:!1,scopes:{urlScope:[{include:!0,condition:10,value:"-1."}],selectorScope:[{include:!0,condition:43,value:"#recommendedStories"},{include:!0,condition:43,value:"#topStories-side"}]},actionTrackings:{mousedown:[{name:"Recommended Story",selector:"#recommendedStories li a"},{name:"Top Stories Story",selector:"#topStories-side li"}]},campaignHash:"623b6117d9f022ec525f3212b2dabdbb",asyncVariationInfoById:{970519:{id:970519,traffic:50,name:"ACE Headline"}},additionalType:""},803484:{id:803484,name:"React Onboarding - Simple - Original - (personalization)",traffic:100,type:"subsegment",parentID:803485,targetingMode:"waituntil",dynamicTrafficModulation:50,dynamicTestedTraffic:100,priority:0,isAsync:!1,heatmap:!1,size:1,mutationObserverEnabled:!1,scopes:{urlScope:[{include:!0,condition:40,value:"https://stage.projects.newsday.com/long-island/onboarding/"},{include:!0,condition:40,value:"https://projects.newsday.com/long-island/onboarding/"}],ipScope:[{include:!0,to:0,range:!1,from:"2685600401"},{include:!0,to:0,range:!1,from:"1153827530"},{include:!0,to:0,range:!1,from:"1814647045"},{include:!0,to:0,range:!1,from:"1237800937"}]},actionTrackings:{mousedown:[{name:"Next Button",selector:".button-group .btn.next"},{name:"App Download - Text Me",selector:"BODY .linkTextingWidget .linkTextingInner BUTTON"},{name:"App Download - Next",selector:'[name="ob-app"].card .button-group .btn.next'},{name:"App Download - Skip",selector:'[name="ob-app"].card .button-group .btn.skip'},{name:"Topics - Next",selector:'[name="ob-topics"].card .button-group .btn.next'},{name:"Topics - Interest Links",selector:".onboarding .topics a"},{name:"Newsletters - Next",selector:'[name="ob-newsletters"].card .button-group .btn.next'},{name:"Newsletters - Skip",selector:'[name="ob-newsletters"].card .button-group .btn.skip'},{name:"Today's Paper - Link",selector:'[name="ob-eedition"].card .paper a'},{name:"Today's Paper - Next",selector:'[name="ob-eedition"].card .button-group .btn.next'},{name:"Topics - Back",selector:'[name="ob-topics"].card .back'},{name:"Newsletters - Toggle",selector:'[name="ob-newsletters"].card .switch'},{name:"Newsletters - See More",selector:'[name="ob-newsletters"].card a.nl-showmore'},{name:"Newsletters - Back",selector:'[name="ob-newsletters"].card .back'},{name:"End - Continue",selector:".btn.return-home"},{name:"App Download - iOS Apple Store",selector:".app-download .linktext .badge-app-store"},{name:"App Download - Android Google Play",selector:".app-download .linktext  .badge-google-play"},{name:"Newsday Live - Event Link",selector:".onboarding .event"},{name:"Newsday Live - Next",selector:'[name="ob-promos"].card .button-group .btn.next'},{name:"Newsday Live - Back",selector:'[name="ob-promos"].card .btn.back'},{name:"End - Article Link",selector:".onboarding .return-article"},{name:"Topics - Skip",selector:'[name="ob-topics"].card .button-group .btn.skip'}]},variations:{998058:{id:998058,name:"Simple - Original",traffic:100,masterVariationId:0,modifications:[{id:3666899,selector:"",type:"customScriptNew",oldValue:"window.order = ['welcome', 'appV1', 'topics', 'newsletter', 'eedition', 'optins', 'final'];\nwindow.varName=\"simple\";\nwindow.abTastyListener();"},{id:3666900,selector:"",type:"addCSS",value:""}],widgets:[{id:"8dbe7cb9-2b43-4da9-a21e-528ee0986ec6",version:"2.1",config:'{"selector":"BODY MAIN ARTICLE DIV.card:nth-child(2)"}',name:"@abtasty/virtual-click"}]}},audienceSegment:{name:"Users without deals flow cookie",id:"dde47768-ad32-4de9-921c-13abf16300eb",targeting_groups:[{position:0,id:"d4ec677d-5b7d-4878-b8a7-f32103dd1c4f",targetings:[{id:"359b4549-2e69-4495-9e2c-eba945e44d9e",operator:"or",position:0,targeting_type:20,mutationObserverEnabled:!1,conditions:[{id:"2cfa8a3c-c7c0-46fe-b128-b85b0a1d8caa",name:"c_deals_onboard",value:null,include:!1}]}]}],is_segment:!0},additionalType:""},803485:{id:803485,name:"React Onboarding single version",type:"mastersegment",sub_type:"sp",parentID:0,priority:0,children:[803484],variations:{998059:{id:998059,name:"Variation 1"}}},808721:{id:808721,name:"winter sale toaster - control split ",traffic:100,type:"ab",sub_type:"ab",parentID:0,globalCode:"window.addEventListener('nd_user_data_populated', (e) => {\nvar toasterHide = document.createElement('style');\n  toasterHide.innerHTML = `\n  .ab_widget_container_promotional-banner {\n  display: none !important;\n  }\n  `;\n  document.head.appendChild(toasterHide);\n});",targetingMode:"fastest",dynamicTrafficModulation:50,dynamicTestedTraffic:100,priority:0,isAsync:!0,heatmap:!1,size:8,mutationObserverEnabled:!1,scopes:{urlScope:[{include:!0,condition:10,value:"newsday.com"},{include:!1,condition:10,value:"/services"},{include:!1,condition:10,value:"subscribe.newsday.com"},{include:!1,condition:10,value:"projects.newsday.com"},{include:!1,condition:10,value:"productions.newsday.com"},{include:!1,condition:10,value:"facesoflongisland.newsday.com"},{include:!1,condition:10,value:"ace-stage.newsday.com"},{include:!1,condition:10,value:"local.newsday.com"}]},actionTrackings:{mousedown:[{name:"Sub button",selector:".ab_widget_container_promotional-banner_content div a"}]},audienceTrigger:{name:"Audience of the account47583",id:"c1b3e90d-a2bd-41db-bb01-21159f46b1de",targeting_groups:[{position:0,id:"f3fd241d-1423-4933-9274-12bb691f0b53",targetings:[{id:"f42c7ebf-d7aa-484f-abf9-d3cfe68b29a8",operator:"auto",position:0,targeting_type:40,mutationObserverEnabled:!1,conditions:[{id:"fc1d95ac-f7a1-41d5-a392-b1a392c124c3",value:"let allowPromoToaster = true;\n\nlet feedMeToasterClose;\n\nlet businessToasterClose;\n\nlet suffolkToasterClose;\n\nlet liToasterClose;\n\nlet nassauToasterClose;\n\nif(localStorage.getItem('ABTastyWidgets') && JSON.parse(localStorage.getItem('ABTastyWidgets'))[\"promotional-banner_14308875_709175\"]){\n    feedMeToasterClose = JSON.parse(localStorage.getItem('ABTastyWidgets'))[\"promotional-banner_14308875_709175\"]\n}\n\nif(localStorage.getItem('ABTastyWidgets') && JSON.parse(localStorage.getItem('ABTastyWidgets'))['promotional-banner_0aa7feb2_707575']){\n    businessToasterClose = JSON.parse(localStorage.getItem('ABTastyWidgets'))['promotional-banner_0aa7feb2_707575']\n}\n\nif(localStorage.getItem('ABTastyWidgets') && JSON.parse(localStorage.getItem('ABTastyWidgets'))['promotional-banner_8024b33f_743986']){\n    suffolkToasterClose = JSON.parse(localStorage.getItem('ABTastyWidgets'))['promotional-banner_8024b33f_743986']\n}\n\nif(localStorage.getItem('ABTastyWidgets') && JSON.parse(localStorage.getItem('ABTastyWidgets'))['promotional-banner_cf77db26_743983']){\n    nassauToasterClose = JSON.parse(localStorage.getItem('ABTastyWidgets'))['promotional-banner_cf77db26_743983']\n}\n\nif(localStorage.getItem('ABTastyWidgets') && JSON.parse(localStorage.getItem('ABTastyWidgets'))['promotional-banner_6393f5e0_743982']){\n    liToasterClose = JSON.parse(localStorage.getItem('ABTastyWidgets'))['promotional-banner_6393f5e0_743982']\n}\n\nif (window.location.pathname.includes(\"/lifestyle/restaurants\")) {\n    if (feedMeToasterClose === undefined){\n        if (!document.cookie.match(\"FMTnlSignUpID=\")) {\n            allowPromoToaster = false\n        }\n    }else if(feedMeToasterClose.type !== 'closing' || feedMeToasterClose.stamp < Date.now()){\n        allowPromoToaster = false\n    }\n}\nif (window.location.pathname.includes(\"/business\")) {\n    if (businessToasterClose === undefined){\n        if (!document.cookie.match(\"BTnlSignUpID=\")) {\n            allowPromoToaster = false\n        }\n    }else if(businessToasterClose.type !== 'closing' || businessToasterClose.stamp < Date.now()){\n        allowPromoToaster = false\n    }\n}\nif (window.location.pathname.includes(\"/long-island/suffolk\")) {\n    if (suffolkToasterClose === undefined){\n        if (!document.cookie.match(\"SUFTnlSignUpID=\")) {\n            allowPromoToaster = false\n        }\n    }else if(suffolkToasterClose.type !== 'closing' || suffolkToasterClose.stamp < Date.now()){\n        allowPromoToaster = false\n    }\n}\nif (window.location.pathname.includes(\"/long-island/nassau\")) {\n    if (nassauToasterClose === undefined){\n        if (!document.cookie.match(\"NASTnlSignUpID=\")) {\n            allowPromoToaster = false\n        }\n    }else if(nassauToasterClose.type !== 'closing' || nassauToasterClose.stamp < Date.now()){\n        allowPromoToaster = false\n    }\n}\nif (window.location.pathname.includes(\"/long-island\") && !window.location.pathname.includes(\"/long-island/nassau\") && !window.location.pathname.includes(\"/long-island/suffolk\")) {\n    if (liToasterClose === undefined){\n        if (!document.cookie.match(\"LIFnlSignUpID=\")) {\n            allowPromoToaster = false\n        }\n    }else if(liToasterClose.type !== 'closing' || liToasterClose.stamp < Date.now()){\n        allowPromoToaster = false\n    }\n}\n\nreturn new Promise((resolve, reject) => {\n    const fallback = setTimeout(() => { resolve(false); }, 8 * 1000);\n    window.addEventListener(\"nd_mg2_onLoggedIn\", e => {\n        clearTimeout(fallback);\n        resolve(false);\n    });\n    window.addEventListener(\"nd_mg2_onNotAuthorized\", e => {\n        clearTimeout(fallback);\n        resolve(allowPromoToaster);\n    });\n});",isAsync:!1}]}]}],is_segment:!1},campaignHash:"e89a7779f747d5325f99a712af622bd2",asyncVariationInfoById:{1004515:{id:1004515,traffic:50,name:"control toaster"},1004516:{id:1004516,traffic:50,name:"Holiday toaster"}},additionalType:""},811376:{id:811376,name:"HS sports exit intent (ACE)",traffic:100,type:"ab",sub_type:"ab",parentID:0,globalCode:"const newsletter = {\n\temptyEmailMsg: 'Enter a valid email address!',\n\n\tmatherPostNewsletterEvent: (event, options) => {\n\t\t(window._matherq = window._matherq || []).push(['newsletterEvent', event, options]);\n\t},\n\n\tescapeHTML(str) { // prevent SQL injection measurement\n\t\tif (str !== undefined) {\n\t\t\tstr = str.replace(/</gi, '&lt;').replace(/>/gi, '&gt;').replace(/\"/g, '&quot;');\n\t\t}\n\t\treturn str;\n\t},\n\n\tsetCookie: (name, value, days) => {\n\t\tlet expires;\n\t\tif (days) {\n\t\t\tvar date = new Date();\n\t\t\tdate.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n\t\t\texpires = \"; expires=\" + date.toGMTString();\n\t\t} else {\n\t\t\texpires = \"\";\n\t\t}\n\t\tdocument.cookie = encodeURIComponent(name) + \"=\" + encodeURIComponent(value) + expires + \"; path=/\";\n\t}\n};\n\n$(() => {\n\n\tif (typeof polopoly !== \"undefined\" && polopoly.util.querystringValue('email')) {\n\t\tnewsletter.userContact = escape(polopoly.util.querystringValue('email'));\n\t\t$('.newsletterSignupModal #subscribeForm :input[name=\"userContact\"]').val(newsletter.userContact);\n\t\t$('.unsubContainer .moduleBody p span').html(newsletter.userContact);\n\t}\n\n\t$('body').on('click', '.newsletterSignupModal form a.btn', function (e) {\n\t\te.preventDefault();\n\t\tlet $formWrapper = $(this).siblings('.formBorderModal'),\n\t\t\t$form = $(this).parents('form'),\n\t\t\tsailthruID = $formWrapper.find('input[name=\"sub\"]').val(); // for A/B Tasty\n\n\t\t$(this).removeClass(\"disable\");\n\t\t$formWrapper.find('.error').removeClass('error');\n\n\t\t/// if email address field is blank\n\t\tif ($formWrapper.find('input[name=\"userContact\"]').val() === '' || $formWrapper.find('input[name=\"userContact\"]') === newsletter.emptyEmailMsg) {\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').addClass('error');\n\t\t\treturn false;\n\t\t} else if ($formWrapper.find('input[name=\"userContact\"]').val().indexOf('@') < 0) {\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t$formWrapper.find('input[name=\"userContact\"]').addClass('error');\n\t\t\treturn false;\n\t\t}\n\n\t\tnewsletter.userContact = $formWrapper.find('input[name=\"userContact\"]').val();\n\n\t\t// SailThru id starts with \"nd\" or \"am\"\n\t\tif ($formWrapper.find('input[name=\"sub\"]').val().substr(0, 2).toLowerCase() === \"nd\" || $formWrapper.find('input[name=\"sub\"]').val().substr(0, 2).toLowerCase() === \"am\") {\n\t\t\tif ($form.attr('action') !== '') {\n\t\t\t\turl = $form.attr('action');\n\t\t\t} else {\n\t\t\t\tif (window.location.href.indexOf(':8080') > -1) {\n\t\t\t\t\turl = 'http://' + window.location.hostname + ':8080' + '/managenewsletters';\n\t\t\t\t} else {\n\t\t\t\t\turl = 'https://' + window.location.hostname + '/managenewsletters';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet respMsg;\n\t\t\tif ($formWrapper.parents('.newsletterSignupModal').data('confirm') && $formWrapper.parents('.newsletterSignupModal').data('confirm') !== '') {\n\t\t\t\trespMsg = $formWrapper.parents('.newsletterSignupModal').data('confirm');\n\t\t\t} else {\n\t\t\t\tconst thistarget = (window.location.href.indexOf('7.') > -1) ? '_blank' : \"\";\n\t\t\t\trespMsg = 'Sign up completed. <a href=\"/newsletters\" target=\"' + thistarget + '\">See more Newsletters</a>.';\n\t\t\t}\n\n\t\t\t// build the input fields object\n\t\t\tconst postData = {};\n\t\t\t$.each($form.serializeArray(), function (i, field) {\n\t\t\t\tpostData[field.name] = field.value;\n\t\t\t});\n\t\t\tpostData.userContact = newsletter.escapeHTML(newsletter.userContact);\n\t\t\tpostData.list = $formWrapper.find('input[name=\"sub\"]').val();\n\t\t\tpostData.origin = $formWrapper.find('input[name=\"origin\"]').val();\n\t\t\tpostData.site = $formWrapper.find('input[name=\"site\"]').val();\n\t\t\tif (!!postData.origin) {} else {\n\t\t\t\tpostData.origin = \"newsday\";\n\t\t\t}\n\n\t\t\tif ($formWrapper.find('input[name=\"email\"]').val() !== '') {\n\t\t\t\tpostData.search_token = '';\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t$.ajax({\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\turl: url,\n\t\t\t\t\tdata: postData,\n\t\t\t\t\tdataType: \"json\",\n\t\t\t\t\tcache: false,\n\t\t\t\t\tsuccess: function (data) {\n\t\t\t\t\t\tif (!!data && data.response === \"{ok=true}\") { // Cheetahmail response \"OK\", SailThru response \"{ok=true}\"\n\t\t\t\t\t\t\t$form.siblings('.signupSuccess').html(\"<p>\" + respMsg + \"</p>\").show();\n\t\t\t\t\t\t\t$formWrapper.parent('form').remove();\n\n\t\t\t\t\t\t\tnewsletter.setCookie(\"HSSnlSignUpID\", sailthruID, 90); // for A/B Tasty to check if the user has already signed up\n\n\t\t\t\t\t\t\t/* only from newsday - there are other forms outside newsday not passing origin */\n\t\t\t\t\t\t\tif (postData.origin === \"newsday\") {\n\t\t\t\t\t\t\t\twindow.nlname = postData.list;\n\t\t\t\t\t\t\t\t_satellite.track(\"nlsuccess\");\n\t\t\t\t\t\t\t\tif (navigator.cookieEnabled && window.location.hostname.indexOf('.newsday.com') >= 0) {\n\t\t\t\t\t\t\t\t\tdocument.cookie = \"newsletterSignupEmail=\" + polopoly.base64.stringEncode(postData.userContact) + \";domain=.newsday.com;path=/\";\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (postData.site === \"connext\") {\n\t\t\t\t\t\t\t\tif (navigator.cookieEnabled && ndGlobal.site === \"newsday\") {\n\t\t\t\t\t\t\t\t\twindow.nlname = postData.list;\n\t\t\t\t\t\t\t\t\t_satellite.track(\"nlsuccess\");\n\t\t\t\t\t\t\t\t\tdate = new Date();\n\t\t\t\t\t\t\t\t\tdate.setTime(date.getTime() + (365 * 24 * 60 * 60 * 1000));\n\t\t\t\t\t\t\t\t\texpires = \"; expires=\" + date.toGMTString();\n\t\t\t\t\t\t\t\t\tdocument.cookie = \"c_ecapture=true;domain=.newsday.com;\" + expires + \";path=/\";\n\t\t\t\t\t\t\t\t\tdocument.cookie = \"c_newsletterSignupEmail=\" + polopoly.base64.stringEncode(postData.userContact) + \";domain=.newsday.com;path=/\";\n\n\t\t\t\t\t\t\t\t\t/* newsletter-data */\n\t\t\t\t\t\t\t\t\tvar newsletter_name = window.nlname;\n\t\t\t\t\t\t\t\t\tvar newsletter_user = postData.userContact;\n\t\t\t\t\t\t\t\t\tvar action_name = _satellite.getVar('mg2 action name');\n\t\t\t\t\t\t\t\t\tvar offers = [\n\t\t\t\t\t\t\t\t\t\t{ offerName: newsletter_name, offerId: newsletter_name, campaign: action_name }\n\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\tnewsletter.matherPostNewsletterEvent({ action: 'signup_completed', offers: offers }, { email: newsletter_user });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//if (_satellite.getVar('content type') !== \"front\") {Connext.Run();}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if ((!!data && data.response === \"Invalid email: \" + newsletter.userContact) || (!!data && data.response === \"err:email:illegal\")) {\n\t\t\t\t\t\t\t// invalid email address response from SailThru\n\t\t\t\t\t\t\t$formWrapper.find('input[name=\"userContact\"]').val(newsletter.emptyEmailMsg);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (err) {\n\t\t\t\tconsole.log(\"Error signing up. \" + err.message);\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.log('You need to set up the correct SailThru id.');\n\t\t}\n\t}).on('focus', '.newsletterSignupModal :input[name=\"userContact\"]', function () {\n\t\t$(this).removeClass('error').find('.error').removeClass('error');\n\t\tif ($(this).val() === newsletter.emptyEmailMsg) {\n\t\t\t$(this).val('');\n\t\t}\n\t}).on('keyup', '.newsletterSignupModal form :input[name=\"userContact\"]', function () {\n\t\tif ($(this).val().indexOf('@')) {\n\t\t\t$(this).parent('.formBorderModal').siblings('a.btn').removeClass(\"disable\");\n\t\t}\n\t}).on('keypress', '.newsletterSignupModal form :input[name=\"userContact\"]', function (e) {\n\t\t// return key hit\n\t\tif (e.which === 13) {\n\t\t\t$(this).parent('.formBorderModal').siblings('a.btn').click();\n\t\t\treturn false;\n\t\t}\n\t});\n\n});\n\n/*$(document).on(\"onNotAuthorized\", function() {\n    $(\".ab_widget_container_popin-image\").hide();\n});*/",targetingMode:"waituntil",dynamicTrafficModulation:50,dynamicTestedTraffic:100,priority:0,isAsync:!1,heatmap:!1,size:8,mutationObserverEnabled:!1,scopes:{urlScope:[{include:!0,condition:10,value:"/sports/high-school"},{include:!1,condition:10,value:"projects.newsday"},{include:!0,condition:10,value:"ace-stage.newsday.com"}],ipScope:[{include:!0,to:0,range:!1,from:"1237800937"}]},widgets:[{id:"0912d592-6bb7-4736-b0b5-bb25542269b2",version:"3.1",config:'{"actiontracking":[{"name":"More than 5 seconds","from":5}]}',name:"@abtasty/time-spent-on-page"}],actionTrackings:{mousedown:[{name:"Email Input",selector:"#nl-modal form div .form-control.email-enter"},{name:"Sign Up",selector:"#nl-modal form a.btn"}]},variations:{1007906:{id:1007906,name:"HS Sports Modal w/Img",traffic:100,masterVariationId:0,modifications:[{id:3696833,selector:"#ab_widget_container_popin-image_d077e564_811376 .popinimage_container_d077e564_811376 .popin_text_container h2",type:"editStyleCSS",value:'{"font-weight":"900!important","margin-top":"12px!important","margin-bottom":"32px!important","margin":"12px 0px 32px 0px!important","font-size":"22px!important","padding-right":"0!important","padding-left":"0!important","padding":"0!important","width":"auto!important","min-width":"none!important","height":"0px!important","min-height":"none!important","padding-top":"0!important","padding-bottom":"0!important"}'},{id:3696834,selector:"",type:"addCSS",value:".modal-open .ab_widget_container_popin-image {display:none!importantimportant;}\nh2.popin_img_title {\n    letter-spacing: -0.03em;\n}\n\n#nl-modal {\nwhite-space: initial;\npadding:0 22px 22px;\n}\n\n#nl-modal form {\n    margin: 0;\n}\n\n#nl-modal .btn {\n    width: 100%;\n    margin:12px 0;\n}\n\ninput.form-control.email-enter {\n    border-radius: 6px;\n    padding: 12px;\n}\n\n.privacy-link {\n    background: none!important;\n    border: none!important;\n    color: #0076be!important;\n    font-weight:normal!important;\n    font-size: 12px!important;\n    text-decoration:underline;\n    fill: #0076be!important;\n    -webkit-text-fill-color: #0076be!important;\n    \n}\n\n#nl-modal p.disclaimer {\n    font-size: 12px!important;\n   \n}\n\n#nl-modal .signupSuccess {\n    margin-bottom: 22px;\n}\n\n#nl-modal input.error{\n    border-color: #ebccd1;\n    background: #f2dede;\n}\n\n\n@media (max-width:400px) {\n    body #ab_widget_container_popin-image_d077e564_811376 .ab_widget_container_popin-image_content {\n    max-width: none!important;\n    width: 98%;\n}\n#nl-modal .signupSuccess a {margin-top:6px;}\n}"},{id:3696835,selector:"#ab_widget_container_popin-image_d077e564_811376 .ab_widget_container_popin-image_content .popinimage_container_d077e564_811376 .popin_text_container",type:"editStyleCSS",value:'{"width":"100%!important","min-width":"none!important","height":"67%!important","min-height":"none!important","padding-right":"12px!important","padding-left":"12px!important","padding":"0px 12px 0px 12px!important"}'}],widgets:[{id:"d077e564-2439-45ba-b76a-43369f8c3774",version:"1.2",config:'{"layout":"popin","contentLayout":"top","textImageRatio":50,"autoWidth":false,"popinPercentWidth":40,"popinPixelsWidth":400,"widthUnit":"px","autoHeight":true,"popinPercentHeight":50,"popinPixelsHeight":344,"heightUnit":"vh","popinPosition":[{"x":1,"y":1}],"zindex":"9999","zindexCustom":1,"image":"https://editor-assets.abtasty.com/47583/60898c5b78f821619627099.jpg","isTitle":true,"title":"Get the HS Sports Newsletter","textContent":"Get scores, photos, and our picks for players of the week. \\n\\n<div id=\\"nl-modal\\" class=\\"newsletterSignupModal\\" data-confirm=\\"\\">\\n  <form id=\\"subscribeForm\\" action=\\"\\" method=\\"POST\\">\\n      <div class=\\"formBorderModal\\">\\n      <input type=\\"text\\" class=\\"form-control email-enter\\" name=\\"userContact\\" value=\\"\\" placeholder=\\"Email address\\" required=\\"required\\">\\n      <input type=\\"hidden\\" name=\\"sub\\" value=\\"ND_edit_high_school_sports_masterlist\\">\\n      <input name=\\"requestType\\" type=\\"hidden\\" value=\\"new_subscription\\" />\\n      <input name=\\"responseType\\" type=\\"hidden\\" value=\\"json\\" />\\n      <input name=\\"version\\" type=\\"hidden\\" value=\\"2\\" />\\n      <input name=\\"confirmationEmail\\" type=\\"hidden\\" value=\\"\\" />\\n      <input name=\\"email\\" type=\\"hidden\\" value=\\"\\" />\\n      <input name=\\"grc-response\\" type=\\"hidden\\" value=\\"verified\\" />\\n      <input name=\\"nsource\\" type=\\"hidden\\" value=\\"A\\" />\\n      <input name=\\"origin\\" type=\\"hidden\\" value=\\"sailthru\\" />\\n      <input name=\\"site\\" type=\\"hidden\\" value=\\"connext\\" />\\n      </div>\\n    <a class=\\"btn disable\\" href=\\"#\\">Sign up</a>\\n  </form>\\n  <div class=\\"signupSuccess\\"></div>\\n  <p class=\\"disclaimer\\">By signing up, you agree to our <a class=\\"privacy-link\\" href=\\"https://www.newsday.com/privacy\\" target=\\"blank\\">privacy policy</a></p>\\n</div>","linkType":false,"buttonText":"SIGN UP","redirectionUrl":"https://stage.newsday.com","openInNewTab":false,"titleTextAlign":"center","titleTextColor":"rgba(0, 0, 0, 1)","titleFontName":"inherit","titleFontStyle":"font-weight: bold !important;","titleFontSize":24,"textAlign":"center","textColor":"rgba(57, 57, 57, 1)","fontName":"inherit","fontStyle":"font-style: normal !important; font-weight: normal;","fontSize":16,"buttonsBorderWidth":8,"buttonsBorderColor":"rgba(39, 97, 158, 1)","buttonsBorderRadius":6,"buttonsBackgroundColor":"rgba(39, 97, 158, 1)","buttonsTextColor":"rgba(247, 247, 247, 1)","buttonsAlign":"fill","buttonsFontName":"inherit","buttonsFontStyle":"font-weight: bold !important;","buttonsFontSize":16,"containerMargin":[{"top":0,"left":0,"bottom":0,"right":0}],"containerPadding":[{"top":0,"right":0,"bottom":22,"left":0}],"backgroundColor":"rgba(247, 247, 247, 1)","isBackgroundImage":false,"backgroundImage":"https://widgets-images.abtasty.com/widgets-default-image.png","backgroundSize":"cover","backgroundPosition":"center","backgroundRepeat":false,"dropShadow":true,"dropShadowColor":"rgba(57, 57, 57, 0.25);","dropShadowBlur":10,"borderWidth":2,"borderColor":"rgba(255, 255, 255, 1)","borderRadius":0,"overlay":true,"overlayColor":"rgba(0, 0, 0, 0.6)","overlayClickable":true,"closeButton":true,"closeButtonPosition":"in","closeButtonSize":26,"closeButtonColor":"rgba(255, 255, 255, 1)","closeButtonBackgroundColor":"rgba(0, 0, 0, 1)","closeButtonBorderRadius":50,"closeButtonBorderWidth":8,"closeButtonBorderColor":"rgba(0, 0, 0, 1)","triggerEvent":"exitIntent","triggerEventClick":"body","triggerEventElementVisible":"body","triggerEventCustomScript":"/* In this example snippet, the widget will be triggered as soon as any scroll is detected.\\nCreate your own by resolving resolve() with true (which does trigger) or false (which doesn\'t trigger) */\\n\\nfunction launchIfScroll() {\\n\\treturn new Promise(resolve => {\\n\\t\\tdocument.addEventListener(\'scroll\', () => resolve(true), {once: true});\\n\\t});\\n}\\n\\nconst result = await launchIfScroll();\\nreturn resolve(result);","isOncePerPageTrigger":true,"triggerEventReengageDelay":10,"triggerEventDelay":0,"autoHide":true,"timeHide":2,"displayRecurrence":"session","displayRecurrence_day":5,"displayRecurrence_week":2,"displayRecurrence_month":1,"closingRecurrence":"week","closingRecurrence_day":5,"closingRecurrence_week":3,"closingRecurrence_month":1,"validationRecurrence":"everytime","validationRecurrence_day":5,"validationRecurrence_week":2,"validationRecurrence_month":1}',name:"@abtasty/popin-image"}]}},additionalType:"patch"},global:{needIPFetch:[],needGeolocFetch:[534697,713090,803484,803485,811376],needAdBlockDetection:[],needUAParserFetch:[],needDCInfosFetch:[],needModificationEngine:!0,needEngagementLevelFetch:[],needDynamicAlloc:[]}},widgets:{"@abtasty/time-spent-on-page":{3.1:{code:'!function(){"use strict";const e=()=>Object.prototype.hasOwnProperty.call(window,"ABTastyEditor"),t=()=>{const e=!!document.getElementById("ABTastyPreviewBar"),t=location.href.includes("ab_project=preview");return e||t},r=()=>t()||!!window.ABTasty.getTestsOnPage()[TEST_ID],n="abtasty_resetActionTracking",s="remove",i="rebuild",c=()=>{const e=(()=>{const{type:e}=DATA;return`${PACKAGE.replace("@abtasty/","")}${e?`_${e}`:""}`})();return`${e.charAt(0).toUpperCase()}${e.slice(1)}`.split("-").join(" ")},a=r=>{if((()=>{if(e()||t())return!1;const r=ABTasty.getTestsOnPage()[TEST_ID];return!!r&&Object.keys(r.targetings.qaParameters).length>0})()){const e=c();window.console.log(`%c${e} - QA Mode for campaign ${TEST_ID}\\n${r}`,"background-color: rgba(0, 127, 145, 1); color: rgba(247, 247, 247, 1)")}};class o{constructor(e,t,r){this.recurrence=e,this.isWidgetApplied=t,this.callback=r,this.observer=new MutationObserver(this.observerHandler.bind(this)),this.eventListenerParams=[n,this.eventHandler.bind(this),{passive:!0}],this.elementsWaiters=[]}recurrenceIsDone(){return!this.recurrence||this.recurrence.isOver()}decisionHandler(e){const t=r(),{type:n}=this.recurrence?this.recurrence.getCurrentRecurrence():{type:!1},c=()=>e&&"display"===n||this.recurrenceIsDone();return!this.isWidgetApplied()&&t&&c()?(this.clearWatcher(),this.callback(i,e)):(!this.isWidgetApplied()||t&&c())&&(this.isWidgetApplied()||t)||(this.clearWatcher(),this.callback(s,e),this.watch()),this}eventHandler(){let e=r();return[250,500].forEach((t=>setTimeout((()=>500===t&&r()===e?this:(e=r(),this.decisionHandler(!1))),t))),this}observerHandler(e){const t=e.some((({removedNodes:e})=>e&&e.length)),r=e.some((({addedNodes:e})=>e&&e.length));return t||r?(this.decisionHandler(!0),this):this}watch(){if(e())return this;this.clearWatcher(),document.addEventListener(...this.eventListenerParams);const t=((e,t,r)=>{let n=0,s=0;try{document.querySelector(e)}catch(t){const n=`Selector «${e}» not valid.`;return a(n),"function"==typeof r&&r(n)}function i(){clearInterval(s),clearTimeout(n)}return n=setTimeout((()=>{i();const t=`Can\'t find element «${e}».`;return a(t),"function"==typeof r&&r(t)}),1e4),s=setInterval((()=>{const r=document.querySelector(e);return null!==r?(i(),"function"==typeof t&&t(r)):r}),200),{clear:i}})("body",(e=>{const r=[e,{childList:!0,subtree:!0}];this.observer.observe(...r),this.elementsWaiters=this.elementsWaiters.filter((e=>e!==t))}));return this.elementsWaiters.push(t),this}clearWatcher(){return document.removeEventListener(...this.eventListenerParams),this.elementsWaiters.length&&(this.elementsWaiters.forEach((e=>e.clear())),this.elementsWaiters=[]),this.observer.disconnect(),this}}var u,l=[],h=!1,d=[n,function(){return f()},{passive:!0}],m=function(e,t){var r=setTimeout((function(){return function(e){ABTastyEvent(e,null,TEST_ID),a(\'"\'.concat(e,\'" sent to test \').concat(TEST_ID,"."))}(e)}),t);l.push(r)},p=function(){var e;h=!0,(e=document).addEventListener.apply(e,d),DATA.actiontracking.forEach((function(e){var t=e.name,r=e.from,n=1e3*parseInt(r,10);m(t,n)}))},v=function(){var e;h=!1,(e=document).removeEventListener.apply(e,d),l.forEach((function(e){return clearTimeout(e)})),l=[]},f=function(){v(),p(),g()},T=function(e,t){switch(e){case s:v();break;case i:t?g():f()}},b=function(){return h},g=function(){(u=u||new o(!1,b,T)).watch()};p(),a("Widget launch"),e()||g()}();\n'}},"@abtasty/popin-image":{1.2:{code:'!function(){"use strict";const e=()=>Object.prototype.hasOwnProperty.call(window,"ABTastyEditor"),t=()=>{let e;return window.ABTasty||window.ABTASTY_S?(window.ABTASTY_S&&window.ABTASTY_S.USER&&window.ABTASTY_S.USER.accountIdentifier&&window.ABTASTY_S.USER.accountIdentifier.length?e=window.ABTASTY_S.USER.accountIdentifier:window.ABTasty&&window.ABTasty.getAccountSettings&&"function"==typeof window.ABTasty.getAccountSettings?e=window.ABTasty.getAccountSettings().identifier:window.ABTasty&&window.ABTasty.accountSettings&&(e=window.ABTasty.accountSettings.identifier),e):e},n=()=>{const e=!!document.getElementById("ABTastyPreviewBar"),t=location.href.includes("ab_project=preview");return e||t},i=()=>!e()&&(n()||!!window.ABTasty.getTestsOnPage()[TEST_ID]),s=()=>window.ABTasty&&!0===window.ABTasty.consentReady,r="remove",o="rebuild",a="https://api-social-proof.abtasty.com/clients/",c=()=>{const{type:e}=DATA;return`${PACKAGE.replace("@abtasty/","")}${e?`_${e}`:""}`},l=()=>{const e=c();return`${e.charAt(0).toUpperCase()}${e.slice(1)}`.split("-").join(" ")},h=()=>`${PLUGIN_ID.split("-")[0]}_${TEST_ID}`,d=t=>{if((()=>{if(e()||n())return!1;const t=ABTasty.getTestsOnPage()[TEST_ID];return!!t&&Object.keys(t.targetings.qaParameters).length>0})()){const e=l();window.console.log(`%c${e} - QA Mode for campaign ${TEST_ID}\\n${t}`,"background-color: rgba(0, 127, 145, 1); color: rgba(247, 247, 247, 1)")}},u=e=>{const t={promise:null,resolve:null,reject:null,name:e};return t.promise=new Promise((e,n)=>{t.resolve=e,t.reject=n}),t},g=(e,t)=>{const n=()=>{try{return document.querySelector(e)}catch(e){return null}};let i=n();const s=[document.body||document.documentElement,{childList:!0,subtree:!0,attributes:!0}],r=()=>a.disconnect(),o=()=>a.observe(...s),a=new MutationObserver(()=>(i=n(),i&&!r()&&t(i)));return i?setTimeout(()=>t(i),0):o(),{selector:e,clear:r,observe:o}};function m(e,t){return t(e)||!e.parentElement?e:m(e.parentElement,t)}const p=t=>{e()||(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation())};class v{constructor(){this.targets=[],this.existingTargets=[],this.inViewportTargets=[],this.visibilityObserver=this.startVisibilityObserver(),this.mutationObserver=this.startMutationObserver(),this.mouseOverEvent=this.mouseOverHandler()}intersectionHandler(e){e.forEach(e=>{e.isIntersecting?(this.existingTargets.forEach(t=>{t.element.isSameNode(e.target)&&(this.inViewportTargets.push(t),this.mouseOverEvent.start())}),this.checkElements()):this.inViewportTargets=this.inViewportTargets.filter(t=>!t.element.isSameNode(e.target)||(this.mouseOverEvent.clear(),!1))})}startVisibilityObserver(){return new IntersectionObserver(this.intersectionHandler.bind(this),{root:null,rootMargin:"0px",threshold:0})}startMutationObserver(){const e=this.mutationObserver||new MutationObserver(this.checkElements.bind(this));return document.body&&e.observe(document.body,{attributes:!0,childList:!0,subtree:!0}),e}onMouseOver({target:e,path:t}){const n=this.inViewportTargets.find(({element:n,selector:i})=>{if(n.isSameNode(e))return!0;const s=[...e.querySelectorAll(i)];if(s.length&&s.includes(n))return!0;if(t.includes(n))return!0;const r=[...e.parentElement.children],o=r.findIndex(t=>t.isSameNode(e)),a=r.filter((e,t)=>t>o);if(a.length){if(a.includes(n))return!0;if(a.some(e=>[...e.querySelectorAll(i)].includes(n)))return!0}return!1});if(n&&this.isElementVisible(n.element)){const{selector:e,element:t,uniqueId:i}=n,s=this.targets.find(t=>t.selector===e&&t.uniqueId===i);s&&s.resolve(t),this.clear(e,i)}}mouseOverHandler(){const e=["mouseover",e=>setTimeout(()=>this.onMouseOver(e),50),!0];return{start:()=>document.addEventListener(...e),clear:()=>document.removeEventListener(...e)}}isElementVisible(e){return this.isElementTopmost(e)&&this.isElementOpaque(e)}isElementOpaque(e){return"HTML"===m(e,e=>"0"===window.getComputedStyle(e).opacity).nodeName}isElementTopmost(e){const t=e.getBoundingClientRect(),n=[[t.left,t.top],[t.right,t.top],[t.left,t.bottom],[t.right,t.bottom],[t.left+t.width/2,t.top],[t.left+t.width/2,t.bottom],[t.left,t.height/2],[t.right,t.height/2],[t.left+t.left/2,t.height/2]];let i=!1,s=0;for(;!i&&s<n.length;){const t=document.elementFromPoint(...n[s]);i=e===t||e.contains(t),s+=1}return i}checkElements(){this.targets.forEach(({selector:e,uniqueId:t})=>{const n=document.querySelector(e);n&&!this.existingTargets.find(n=>n.element.matches(e)&&n.uniqueId===t)&&(this.existingTargets.push({element:n,selector:e,uniqueId:t}),this.visibilityObserver.observe(n))}),this.existingTargets=this.existingTargets.filter(({selector:e,element:t})=>!!document.querySelector(e)||(t&&this.visibilityObserver.unobserve(t),!1)),this.inViewportTargets=this.inViewportTargets.filter(({selector:e,element:t,uniqueId:n})=>{if(t.matches(e)&&this.isElementVisible(t)){const i=this.targets.find(t=>t.selector===e&&t.uniqueId===n);return i&&i.resolve(t),this.clear(e,n),!1}return!0})}watch(e,t,n){this.targets.push({selector:e,resolve:t,uniqueId:n});const i=()=>{this.startMutationObserver(),this.checkElements()};document.body?i():g("body",i)}clear(e,t){[this.targets,this.existingTargets,this.inViewportTargets]=[this.targets,this.existingTargets,this.inViewportTargets].map(n=>n.filter(({selector:n,uniqueId:i})=>n!==e&&i!==t));const n=document.querySelector(e);n&&this.visibilityObserver.unobserve(n),0===this.targets.length&&this.mutationObserver.disconnect(),0===this.inViewportTargets.length&&this.mouseOverEvent.clear()}}class y{constructor({triggerEvent:e,triggerSelector:t,triggerDelay:n}){this.event=e,this.selector=t&&t.length?t:"body",this.delay=1e3*n,this.elementsSelectors=[],this.eventsListeners=[],this.timeouts=[],this.intervals=[],this.observers=[],this.promises=[],this.visibilityObservers=[],this.elementsWaiters=[]}async onElementVisible({promise:e,resolve:t}){const n=u(`${this.event}DomReady`);this.promises.push(n);const i=await this.onPageLoad(n),s=await async function(){let e;return e=await("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype||new Promise((e,t)=>{const n=window.document.getElementsByTagName("script")[0],i=window.document.createElement("script");i.src="https://polyfill.io/v3/polyfill.min.js?flags=gated&features=IntersectionObserver",n.parentNode.insertBefore(i,n),i.onload=e,i.onerror=t})),e}(),r=new v;if(this.visibilityObservers.push(r),s&&i){const e=h();r.watch(this.selector,t,e)}return e}onPageLoad({promise:e,resolve:t}){const n=()=>"complete"===document.readyState;if(!n()){const i=["readystatechange",({isTrusted:e})=>e&&n()&&t(!0),{passive:!0}];return this.eventsListeners.push(i),document.addEventListener(...i),e}return t(!0),e}onClick({promise:e,resolve:t}){const n=document.createElement("style");n.type="text/css",n.id=`Click_${h()}`,n.innerHTML=`${this.selector} {\\n\\t\\t\\tcursor: pointer !important;\\n\\t\\t\\tpointer-events: all !important;\\n\\t\\t}`,document.head.appendChild(n),this.elementsSelectors.push(`#${n.id}`);const i=e=>[...document.querySelectorAll(this.selector)].some(t=>t.isSameNode(e)||!!e.closest(this.selector)),s=["click",({isTrusted:e,target:n})=>e&&i(n)&&t(!0),{passive:!0,capture:!0}];return this.eventsListeners.push(s),document.addEventListener(...s),e}onExitIntent({promise:e,resolve:t}){const n=["mouseleave",({isTrusted:e,clientY:n})=>{e&&n<=0&&t(!0)},{passive:!0}],i=g("body",e=>{e.addEventListener(...n),this.eventsListeners.push([e,...n]),this.elementsWaiters=this.elementsWaiters.filter(e=>e!==i)});return this.elementsWaiters.push(i),e}onReengage({promise:e,resolve:t}){const n=this.delay;let i=n;const s=[({isTrusted:e})=>{e&&(i=n)},{passive:!0}];["click","mousemove","scroll","keypress"].forEach(e=>{document.addEventListener(e,...s),this.eventsListeners.push([e,...s])});const r=setInterval(()=>{i<=0?t(!0):i-=100},100);return this.intervals.push(r),e}onCustomTrigger({promise:e,resolve:t}){const{triggerEventCustomScript:n}=DATA;return new Function(`return new Promise(async resolve => {${n}})`)().then(e=>e&&t(!0)),e}getSocialProofPurchases({promise:e,resolve:n}){const i=window.ABTastyProductKey,s=t(),{viewInterval:r,triggerSocialProofMinPurchases:o,spNoTrim:c}=DATA;return i||(d("Not able to find ABTastyProductKey, impossible to call the API."),n(!1)),i&&s?fetch(`${a}${s}/metrics/i?key=${i}${c?"&noTrim=true":""}`).then(e=>e.ok&&e.json()).then(e=>(e=>{if(void 0===r||void 0===o)return!1;const t=void 0!==e[r]&&e[r]>=o;return t||d(`Widget will not be shown, product has been purchased ${e[r]} times while ${o} are required`),t})(e)&&n(`${e[r]}`)).catch(()=>d("Failed to fetch datas from server.")):n(!1),e}getSocialProofPageViews({promise:e,resolve:n}){const{viewInterval:i,triggerSocialProofMinPageViews:s,spNoTrim:r}=DATA,o=encodeURIComponent(r?window.location.href.replace(window.location.origin,""):`${window.location.pathname}`),c=t();return o&&c?fetch(`${a}${c}/metrics/pv?key=${o}${r?"&noTrim=true":""}`).then(e=>e.ok&&e.json()).then(e=>(e=>{if(void 0===i||void 0===s)return!1;const t=void 0!==e[i]&&e[i]>=s;return t||d(`Widget will not be shown, page has been seen ${e[i]} times while ${s} are required`),t})(e)&&n(`${e[i]}`)).catch(()=>d("Failed to fetch datas from server.")):n(!1),e}onConsent({promise:e,resolve:t}){if(!s()){const n=["abtasty_consentValid",()=>t(!0)];return this.eventsListeners.push(n),window.addEventListener(...n),e}return t(!0),e}clear(){if(this.elementsSelectors.length&&(this.elementsSelectors.forEach(e=>{document.querySelector(e)&&document.querySelector(e).remove()}),this.elementsSelectors=[]),this.eventsListeners.length&&(this.eventsListeners.forEach(e=>{const[t,...n]="string"==typeof e[0]?[document,...e]:e;t&&n.length>1&&t.removeEventListener(...n)}),this.eventsListeners=[]),this.timeouts.length&&(this.timeouts.forEach(e=>clearTimeout(e)),this.timeouts=[]),this.intervals.length&&(this.intervals.forEach(e=>clearInterval(e)),this.intervals=[]),this.observers.length&&(this.observers.forEach(e=>e.disconnect()),this.observers=[]),this.visibilityObservers.length){const e=h();this.visibilityObservers.forEach(t=>t.clear(this.selector,e)),this.visibilityObservers=[]}return this.promises.length&&(this.promises.forEach(e=>e.resolve(!1)),this.promises=[]),this.elementsWaiters.length&&(this.elementsWaiters.forEach(e=>e.clear()),this.elementsWaiters=[]),this}async isTriggered(){this.clear();const e=u(this.event);this.promises.push(e);const t={consent:()=>this.onConsent(e),direct:()=>!0,pageLoad:()=>this.onPageLoad(e),click:()=>this.onClick(e),exitIntent:()=>this.onExitIntent(e),reengage:()=>this.onReengage(e),elementVisible:()=>this.onElementVisible(e),script:()=>this.onCustomTrigger(e),socialProofPurchases:()=>this.getSocialProofPurchases(e),socialProofPageViews:()=>this.getSocialProofPageViews(e)},n=!Object.prototype.hasOwnProperty.call(t,this.event)||await t[this.event]();return this.clear(),"reengage"!==this.event&&this.delay?n&&await(async()=>{const e=u(`${this.event}Delay`);return this.promises.push(e),setTimeout(()=>{e.resolve(!0),this.clear()},this.delay),e.promise})():n}}const f="closing",b="validation",w="ABTastyWidgets",$="ABTastyWidgetsTemporary";class T{constructor({displayRecurrence:e,closingRecurrence:t,validationRecurrence:n},i){this.displayRecurrence=parseFloat(e),this.closingRecurrence=parseFloat(t),this.validationRecurrence=parseFloat(n),this.onSetCallback=i,this.widgetName=c(),this.uniqueId=h(),this.recurrenceKey=`${this.widgetName}_${this.uniqueId}`,this.isListeningStorageEvent=this.listenStorageEvent(),this.pendingRecurrence=!1,this.pendingRecurrenceValue={}}onStorage({key:e}){const t=localStorage.getItem($),n=sessionStorage.getItem(w);"ABTastyData"===e&&!t&&n&&localStorage.setItem($,n)}listenStorageEvent(){return this.isListeningStorageEvent||window.addEventListener("storage",this.onStorage.bind(this)),!0}getGivenRecurrenceStorageParsed(e){try{const t=e.getItem(w);return JSON.parse(t)}catch(t){return e.removeItem(w),!1}}getSessionRecurrenceStorageParsed(){return this.getGivenRecurrenceStorageParsed(window.sessionStorage)}getLocalRecurrenceStorageParsed(){return this.getGivenRecurrenceStorageParsed(window.localStorage)}removeGivenStorage(e,t){const{[this.recurrenceKey]:n,...i}=t;return Object.entries(i).length?(e.setItem(w,JSON.stringify(i)),i):(e.removeItem(w),!1)}removeSessionRecurrenceStorage(){const e=this.getSessionRecurrenceStorageParsed();return!!e&&this.removeGivenStorage(window.sessionStorage,e)}removeLocalRecurrenceStorage(){const e=this.getLocalRecurrenceStorageParsed();return!!e&&this.removeGivenStorage(window.localStorage,e)}getSessionRecurrence(){const e=this.getSessionRecurrenceStorageParsed();return!!e&&e[this.recurrenceKey]}getLocalRecurrence(){const e=this.getLocalRecurrenceStorageParsed();return!!e&&e[this.recurrenceKey]}getCurrentRecurrence(){if(this.pendingRecurrence)return this.pendingRecurrenceValue;const e=this.getSessionRecurrence(),t=this.getLocalRecurrence();return e||t||{type:!1}}isOver(){const e=localStorage.getItem($),t=!(!e||!e.includes(this.recurrenceKey))||this.getSessionRecurrence();e&&(sessionStorage.setItem(w,e),localStorage.removeItem($));const n=this.getLocalRecurrence(),i=(n?parseFloat(n.stamp):0)<(new Date).getTime();return i&&this.removeLocalRecurrenceStorage(),!this.pendingRecurrence&&i&&!this.getLocalRecurrence()&&!t}setRecurrence(e,t){0!==e&&(window.removeEventListener("storage",this.onStorage.bind(this)),this.isListeningStorageEvent=!1);const i=this.getTypeOfStorage(e);if(n()||!i&&"object"!=typeof i)return!1;const{storageString:r,storageMethod:o}=i,a=this.getStamp(e),c={type:t,stamp:a},{type:l}=this.getCurrentRecurrence(),h=async()=>{if(!s()){this.pendingRecurrence=!0,this.pendingRecurrenceValue=c;const e=new y({triggerEvent:"consent"});await e.isTriggered(),this.pendingRecurrence=!1,this.pendingRecurrenceValue={}}const e=this.getSessionRecurrence(),t=this.getLocalRecurrence();let n;"session"===r?e?n=this.removeSessionRecurrenceStorage():(this.removeLocalRecurrenceStorage(),n=this.getSessionRecurrenceStorageParsed()):"local"===r&&(t?n=this.removeLocalRecurrenceStorage():(this.removeSessionRecurrenceStorage(),n=this.getLocalRecurrenceStorageParsed()));const i=n?{[this.recurrenceKey]:c,...n}:{[this.recurrenceKey]:c};o.setItem(w,JSON.stringify(i)),this.onSetCallback&&"function"==typeof this.onSetCallback&&this.onSetCallback()};if(!o)return!1;if(l&&t!==b)if(t===f&&l!==b)h();else{if("display"!==t||l===b||l===f)return!1;h()}else h();return a}setDisplayRecurrence(){this.setRecurrence(this.displayRecurrence,"display")}setClosingRecurrence(){this.setRecurrence(this.closingRecurrence,"closing")}setValidationRecurrence(){this.setRecurrence(this.validationRecurrence,"validation")}getStamp(e){return(new Date).getTime()+864e5*e}getTypeOfStorage(e){return!(isNaN(e)||e<0||0!==e&&!e)&&(e>0?{storageString:"local",storageMethod:window.localStorage}:0===e&&{storageString:"session",storageMethod:window.sessionStorage})}}class C{constructor(e,t,n){this.recurrence=e,this.isWidgetApplied=t,this.callback=n,this.observer=new MutationObserver(this.observerHandler.bind(this)),this.eventListenerParams=["abtasty_resetActionTracking",this.eventHandler.bind(this),{passive:!0}],this.elementsWaiters=[]}recurrenceIsDone(){return!this.recurrence||this.recurrence.isOver()}decisionHandler(e){const t=i(),{type:n}=this.recurrence?this.recurrence.getCurrentRecurrence():{type:!1};let s;const a=this.isWidgetApplied(),c=(()=>{const t=this.recurrenceIsDone();return e&&"display"===n||t})();return!a&&t&&c?s=o:(a&&(!t||!c)||!a&&!t)&&(s=r),"string"==typeof s&&(this.clearWatcher(),this.callback(s,e),this.watch()),this}eventHandler(){let e=i();return[250,500].forEach(t=>{setTimeout(()=>{const n=i();return 500===t&&n===e?this:(e=n,this.decisionHandler(!1))},t)}),this}observerHandler(e){return e.some(e=>["removedNodes","addedNodes"].some(t=>e[t]&&e[t].length))?this.decisionHandler(!0):this}watch(){if(e())return this;this.clearWatcher(),document.addEventListener(...this.eventListenerParams);const t=()=>{const e=[document.body,{childList:!0,subtree:!0}];this.observer.observe(...e)};return document.body?t():(()=>{const e=g("body",()=>{t(),this.elementsWaiters=this.elementsWaiters.filter(t=>t!==e)});this.elementsWaiters.push(e)})(),this}clearWatcher(){return document.removeEventListener(...this.eventListenerParams),this.elementsWaiters.length&&(this.elementsWaiters.forEach(e=>e.clear()),this.elementsWaiters=[]),this.observer.disconnect(),this}}const S=/.+\\/([^.]+)\\.(otf|ttf)$/,E=["top: 0;","top: 50%;","bottom: 0;"],A=["left: 0;","left: 50%;","right: 0;"],x=e=>1===e?"-50%":0,I=()=>{if(Array.isArray(DATA.popinPosition)){const{popinPosition:[{x:e,y:t}]}=DATA,n=`translate(${x(t)}, ${x(e)});`;return`${E[e]}${A[t]}transform: ${n}`}return"left: 50%;top: 50%;transform: translate(-50%, -50%);"},_=()=>"autoWidth"in DATA&&!0===DATA.autoWidth,P=()=>{if(_())return"width: auto;height: auto;";const{popinPercentWidth:e,popinPixelsWidth:t,widthUnit:n,autoHeight:i,popinPercentHeight:s,popinPixelsHeight:r,heightUnit:o}=DATA;return`width: ${"px"===n?t:e}${n};height: ${i?"auto":`${"px"===o?r:s}${o}`};`};function R(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var N,k,B;k=new(function(){function t(e){var n=e.parentContainer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.parentContainer=n,this.className="popinimage_container_".concat(n.uniqueId),this.imageSource=t.getImageSrc(),this.contentElement=this.getContentElement(),this.styleElement=this.getStyleElement()}var n,i,s;return n=t,s=[{key:"getImageSrc",value:function(){return DATA.image||"".concat("https://widgets-images.abtasty.com/","image-placeholder.png")}}],(i=[{key:"remove",value:function(){var e=this,t=DATA.animationDuration;setTimeout(function(){return e.parentContainer.remove()},1.05*(void 0===t?1e3:t))}},{key:"addCloseEvent",value:function(t){var n=this;t&&t.addEventListener("click",function(t){p(t),e()||n.parentContainer.recurrence.setClosingRecurrence(),n.parentContainer.hide(),n.remove()},{capture:!0,passive:!1})}},{key:"addRedirectionEvent",value:function(t){var n=this;!e()&&t&&t.addEventListener("click",function(){var t=DATA,i=t.autoHide,s=t.timeHide;i&&setTimeout(function(){n.parentContainer.hide(),n.remove()},1e3*s),e()||n.parentContainer.recurrence.setValidationRecurrence()},{capture:!0,passive:!0})}},{key:"getButton",value:function(){var e=DATA,t=e.linkType,n=e.buttonText,i=e.redirectionUrl,s=e.openInNewTab,r=document.createElement("a");return r.className="popin_link",r.innerHTML="<span>".concat(n,"</span>"),"button"===t?(r.href=i,r.target=s?"_blank":"_self",this.addRedirectionEvent(r)):(r.href="#",r.dataset.abtastyActionnable="true",this.addCloseEvent(r)),r}},{key:"setImageOnlyContent",value:function(e,t){var n=DATA,i=n.linkType,s=n.buttonText,r=document.createElement("div");if(r.className="popin_img_container",r.innerHTML=\'<img class="popin_img_img" src="\'.concat(this.imageSource,\'">\'),e.appendChild(r),e.classList.add(t),[i,s].every(function(e){return"string"==typeof e})&&i.includes("button")&&s.length){var o=this.getButton(),a=document.createElement("div");a.className="buttons_container",a.appendChild(o),e.appendChild(a)}return e}},{key:"setImageAndTextContent",value:function(e,t){var n=DATA,i=n.isTitle,s=n.title,r=n.textContent,o=n.linkType,a=n.buttonText,c=document.createElement("div");c.className="popin_img_container",c.innerHTML=\'<img class="popin_img_img" src="\'.concat(this.imageSource,\'">\');var l=document.createElement("div");if(l.className="popin_text_container",l.innerHTML="".concat(i?\'<h2 class="popin_img_title">\'.concat(s,"</h2>"):"",\'<p class="popin_img_text">\').concat(r,"</p>"),e.classList.add(t),["leftImage","topImage"].some(function(e){return e===t})&&e.appendChild(c),e.appendChild(l),["rightImage","bottomImage"].some(function(e){return e===t})&&e.appendChild(c),[o,a].every(function(e){return"string"==typeof e})&&o.includes("button")&&a.length){var h=this.getButton(),d=document.createElement("div");d.className="buttons_container",d.appendChild(h),l.appendChild(d)}return e}},{key:"insertIn",value:function(e,t){return document.head.insertAdjacentElement("beforeend",this.styleElement),e.insertAdjacentElement(t,this.contentElement),e}},{key:"getContentElement",value:function(){var e=this,t=DATA,n=t.contentLayout,i=t.linkType,s=t.redirectionUrl,r=t.openInNewTab,o=document.createElement(i&&i.includes("widget")?"a":"div");return o.className=this.className,"widget"===i?(o.href=s,o.target=r?"_blank":"_self",this.addRedirectionEvent(o)):"widgetClose"===i&&(o.href="#",o.dataset.abtastyActionnable="true",this.addCloseEvent(o)),{imageOnly:function(){return e.setImageOnlyContent(o,"onlyImage")},left:function(){return e.setImageAndTextContent(o,"leftImage")},right:function(){return e.setImageAndTextContent(o,"rightImage")},top:function(){return e.setImageAndTextContent(o,"topImage")},bottom:function(){return e.setImageAndTextContent(o,"bottomImage")}}[n](),o}},{key:"getStyleElement",value:function(){var t=document.createElement("style");t.type="text/css",e()&&t.setAttribute("abtasty-script-added","true");var n=DATA,i=n.textImageRatio,s=n.borderRadius,r=n.borderWidth,o=n.containerPadding,a=n.contentLayout,c=n.autoHeight,l=n.popinPercentHeight,h=n.popinPixelsHeight,d=n.heightUnit,u=n.linkType,g=n.buttonsAlign,m="#".concat(this.parentContainer.widgetContainerId," .").concat(this.parentContainer.contentClassName),p=o[0],v=parseInt(s-r,10),y=v-p.top>0?v-p.top:0,f=v-p.bottom>0?v-p.bottom:0,b=void 0!==g&&"fill"!==g?"text-align: ".concat(g,";"):"",w="px"===d?h:l,$=["".concat(m," .popin_img_container {"),"max-height: calc(".concat(w).concat(d," - ").concat(p.top+p.bottom+r,"px);"),"}"].join(""),T=["".concat(m," .onlyImage .popin_img_container {"),"border-radius: ".concat(y,"px ").concat(y,"px ").concat(f,"px ").concat(f,"px;"),"}"].join(""),C=["".concat(m," .leftImage .popin_img_container {"),"width: calc(".concat(i,"% - 2.5%);"),"}","".concat(m," .leftImage .popin_text_container {"),"width: calc(100% - ".concat(i,"% - 2.5%);"),"position: relative;","margin: 0 2.5%;","}","".concat(m," .leftImage .popin_img_container {"),"border-radius: ".concat(y,"px 0 0 ").concat(f,"px;"),"}"].join(""),S=["".concat(m," .rightImage .popin_img_container {"),"width: calc(".concat(i,"% - 2.5%);"),"}","".concat(m," .rightImage .popin_text_container {"),"width: calc(100% - ".concat(i,"% - 2.5%);"),"position: relative;","margin: 0 2.5%;","}","".concat(m," .rightImage .popin_img_container {"),"border-radius: 0 ".concat(y,"px ").concat(f,"px 0;"),"}"].join(""),E=["".concat(m," .topImage .popin_img_container {"),"border-radius: ".concat(y,"px ").concat(y,"px 0 0;"),"margin-bottom: 15px","}"].join(""),A=["".concat(m," .bottomImage .popin_img_container {"),"border-radius: 0 0 ".concat(f,"px ").concat(f,"px;"),"margin-top: 15px;","}"].join(""),x=["".concat(m," .buttons_container {"),"display: inline-block;","width: 100%;",b,"}","".concat(m," .popin_link {"),"margin: 25px 0 0 0;","padding: 10px 22px;","max-width: 100%;","width: ".concat("fill"===g?"100%":"auto",";"),"text-align: center;","}"].join(""),I=["".concat(m," .popin_img_container {"),"line-height: 0;","overflow: hidden;","width: 100%;","max-width: 100%;","}","".concat(m," .popin_img_title {"),"margin: 0 0 25px 0;","display: inline-block;","width: 100%;","}","".concat(m," .popin_img_container img {"),"display: inline-block;","width: 100%;","}","".concat(m," .popin_text_container {"),"line-height: 1;","white-space: pre-line;","}","".concat(m," .popin_text_container p {"),"margin: 0;","}","".concat(m," .popin_img_container,"),"".concat(m," .popin_text_container {"),"display: inline-block;","vertical-align: middle;","}"];return(0,{imageOnly:function(){return I.push(T)},top:function(){return I.push(E)},bottom:function(){return I.push(A)},left:function(){return I.push(C)},right:function(){return I.push(S)}}[a])(),c||I.push($),u&&u.includes("button")&&I.push(x),t.textContent=I.join(""),t}}])&&R(n.prototype,i),s&&R(n,s),t}())({parentContainer:N=new class extends class{constructor(){this.children=void 0,this.uniqueId=h(),this.widgetName=c(),this.prettyName=l(),this.recurrenceParams=(()=>{const{displayRecurrence:t,closingRecurrence:n,validationRecurrence:i}=DATA;if(e()||!t&&!n&&!i)return!1;const s={everytime:()=>-1,session:()=>0,once:()=>395,day:e=>DATA[`${e}_day`],week:e=>7*DATA[`${e}_week`],month:e=>30.5*DATA[`${e}_month`]},r={};return t&&(r.displayRecurrence=s[t]("displayRecurrence")),n&&(r.closingRecurrence=s[n]("closingRecurrence")),i&&(r.validationRecurrence=s[i]("validationRecurrence")),r})(),this.triggerParams=(()=>{let{triggerEvent:t}=DATA;const{triggerEventClick:n,triggerEventReengageDelay:i,socialProofContentType:s,triggerEventElementVisible:r,triggerEventDelay:o}=DATA;if(e()||!t&&!s)return!1;const a={click:()=>n,elementVisible:()=>r},c=Object.prototype.hasOwnProperty.call(a,t)?a[t]():"body",l="reengage"===t?i:o;return s&&(t=1===s?"socialProofPurchases":"socialProofPageViews"),{triggerEvent:t,triggerSelector:c,triggerDelay:l}})(),this.recurrence=!!this.recurrenceParams&&new T(this.recurrenceParams,this.clearGivenClearables.bind(this)),this.trigger=!!this.triggerParams&&new y(this.triggerParams),this.pageWatcher=new C(this.recurrence,this.isWidgetApplied.bind(this),this.onPageChange.bind(this)),this.hasOncePerPageTrigger=(()=>{const{isOncePerPageTrigger:e,triggerEvent:t}=DATA;return!t||!(!e||!["click","script"].includes(t))||["pageLoad","direct","reengage","socialProofPurchases","socialProofPageViews","elementVisible"].some(e=>e===t)})(),this.basicClassName=`ab_widget_container_${this.widgetName}`,this.widgetContainerId=`${this.basicClassName}_${this.uniqueId}`,this.contentClassName=`${this.basicClassName}_content`,this.overlayClassName=`${this.basicClassName}_overlay`,this.closeButtonClassName=`${this.basicClassName}_close_button`,this.hideClassName=`ab_hide_${this.uniqueId}`,this.domElement=this.getDom(),this.hasBeenShown=!1,this.closedByUser=!1,this.eventsListeners=[],this.timeouts=[],this.intervals=[],this.observers=[],this.promises=[],this.elementsWaiters=[]}clearGivenClearables(){this.eventsListeners.length&&(this.eventsListeners.forEach(e=>document.removeEventListener(...e)),this.eventsListeners=[]),this.timeouts.length&&(this.timeouts.forEach(e=>clearTimeout(e)),this.timeouts=[]),this.intervals.length&&(this.intervals.forEach(e=>clearInterval(e)),this.intervals=[]),this.observers.length&&(this.observers.forEach(e=>e.disconnect()),this.observers=[]),this.promises.length&&(this.promises.forEach(e=>e.resolve(!1)),this.promises=[]),this.elementsWaiters.length&&(this.elementsWaiters.forEach(e=>e.clear()),this.elementsWaiters=[])}isWidgetApplied(){return this.domElement&&this.domElement.isConnected}removeOldDomElement(){const e=document.getElementById(this.widgetContainerId);return e&&e.remove(),this}async insert(){if(this.isWidgetApplied())return!1;const e=new Promise(e=>{const t=g("head",t=>{this.elementsWaiters=this.elementsWaiters.filter(({selector:e})=>"head"!==e),e(t.appendChild(this.styleElement))});this.elementsWaiters.push(t)}),t=new Promise(e=>{const{elementReferrer:t="body",referrerInsertType:n="beforeend"}="free"===DATA.layout?DATA:{},i=g(t,i=>{this.elementsWaiters=this.elementsWaiters.filter(e=>e.selector!==t),this.removeOldDomElement(),e(i.insertAdjacentElement(n,this.domElement))});this.elementsWaiters.push(i)});return Promise.all([t,e]).then(()=>this)}remove(){return this.pageWatcher.clearWatcher(),[this.domElement,this.styleElement].forEach(e=>e&&e.isConnected&&e.remove()),this.hasOncePerPageTrigger?this.pageWatcher.watch():e()||this.init().then(({response:e})=>e?this.show():this),this}show(){return e()||this.hasBeenShown&&this.hasOncePerPageTrigger||window.ABTastyEvent(`${this.prettyName} displayed`,null,TEST_ID),this.closedByUser=!1,this.domElement.classList.remove(this.hideClassName),this.recurrence&&this.recurrence.setDisplayRecurrence(),this.hasBeenShown=!0,this.pageWatcher.watch(),this}hide(){return!e()&&this.hasBeenShown&&window.ABTastyEvent(`${this.prettyName} closed`,null,TEST_ID),this.closedByUser=!0,this.domElement.classList.add(this.hideClassName),this}async init(t){const n=e(),s=i(),r=this.trigger&&this.trigger.promises.length,o=!this.recurrence||this.recurrence.isOver();if(!n&&!s||r||!o)return!1;this.pageWatcher.watch();const a=n||!this.trigger||this.trigger&&await this.trigger.isTriggered();return!!a&&(await this.insert(),this.addCloseEvent(),n||t||this.hasBeenShown||void 0===this.children||"function"!=typeof this.children.refreshContent||this.children.refreshContent(a),{container:this,response:a})}onPageChange(e,t){const n=()=>this.init().then(({response:e})=>e&&this.show());t||(this.hasBeenShown=!1);const i=this.isWidgetApplied(),s={[r]:()=>{i?this.remove():(this.trigger&&this.trigger.clear(),this.pageWatcher.watch())},[o]:()=>{this.hasBeenShown?this.closedByUser?this.pageWatcher.watch():i||this.insert().then(e=>e.show()).catch(this.pageWatcher.watch):n()}};"function"==typeof s[e]&&s[e]()}addCloseEvent(...t){const{closeButton:n,overlay:i,overlayClickable:s,layout:r}=DATA,o=[];if(void 0!==i&&!0!==i||!0!==s||"popin"!==r||o.push(`.${this.overlayClassName}`),void 0!==n&&n&&o.push(`.${this.closeButtonClassName}`),!o.length)return this;const a=this.domElement.querySelectorAll(o.join(", "));return a.length?(t.push(...a),t.forEach(t=>{e()&&(t.dataset.abtastyActionnable="true"),t.addEventListener("click",e=>{p(e),this.recurrence&&this.recurrence.setClosingRecurrence(),this.hide(),setTimeout(()=>this.remove(),1e3)},{once:!0,capture:!0})}),this):this}getDom(){const{closeButton:e,layout:t,overlay:n=!0}=DATA,i=document.createElement("div");return i.className=`${this.basicClassName} ${this.hideClassName}`,i.id=this.widgetContainerId,i.innerHTML=`\\n\\t\\t\\t${"popin"===t&&!0===n?`<div class="${this.overlayClassName}"></div>`:""}\\n\\t\\t\\t<div class="${this.contentClassName}">\\n\\t\\t\\t${e?`<button class="${this.closeButtonClassName}"><svg viewBox="0 0 16 16">\\n\\t<defs><path id="prefix__a" d="M12 4.991L11.009 4 8 7.009 4.991 4 4 4.991 7.009 8 4 11.009 4.991 12 8 8.991 11.009 12 12 11.009 8.991 8z"></path></defs>\\n\\t<g><use xlink:href="#prefix__a"></use></g>\\n</svg></button>`:""}\\n\\t\\t\\t</div>`,i}loadFont(e,t){if(!e||"inherit"===e)return;const n=document.createElement("style"),i=t.match(S)?t.match(S)[1]:"";n.innerHTML=`@font-face { font-family: \'${e}_${i}\';  src: url(\'${t}\');}`,document.head.appendChild(n)}getStyleTag(t="",n=DATA){const{noStyles:i,layout:s}=n,{backgroundColor:r,isBackgroundImage:o,backgroundImage:a,backgroundSize:c,backgroundPosition:l,backgroundRepeat:h,borderColor:d,borderRadius:u,borderWidth:g,textColor:m,textAlign:p,fontName:v,fontStyle:y,fontSize:f,isTitle:b,titleTextAlign:w,titleTextColor:$,titleFontName:T,titleFontStyle:C,titleFontSize:E,overlay:A,overlayColor:x,dropShadow:I,dropShadowColor:_,dropShadowBlur:P,containerMargin:R,containerPadding:N,closeButton:k,closeButtonPosition:B,closeButtonSize:L,closeButtonBorderRadius:O,closeButtonBorderWidth:D,closeButtonBorderColor:W,closeButtonColor:j,closeButtonBackgroundColor:V,buttonsBorderWidth:q,buttonsBorderColor:H,buttonsBorderRadius:M,buttonsBackgroundColor:F,buttonsTextColor:z,buttonsFontName:U,buttonsFontStyle:G,buttonsFontSize:K}=i?{}:n,Y=document.createElement("style");Y.type="text/css",e()&&Y.setAttribute("abtasty-script-added","true"),this.loadFont(v,y),this.loadFont(T,C),this.loadFont(U,G);const J=`background: ${["string"==typeof r?r:"rgba(255, 255, 255, 1)",o&&"string"==typeof a&&a.length?`url(${a})`:"",o&&"string"==typeof l&&"100% 100%"!==c?l:"0 0",o&&"string"==typeof c?`/ ${c}`:"/ auto",o&&h&&!["cover","100% 100%"].includes(c)?"repeat":"no-repeat"].join(" ").trim()};`,Q="number"==typeof g&&g>0,X=`border: ${[Q?`${g}px`:"unset",Q?"solid":"",Q&&"string"==typeof d&&d.length?d:""].join(" ").trim()};`,Z=void 0!==u?`border-radius: ${u}px;`:"",ee=void 0!==m?`color: ${m}; fill: ${m}; -webkit-text-fill-color: ${m};`:"",te=void 0!==p?`text-align: ${p};`:"",ne=v&&"inherit"!==v?`font-family:${v}_${y.match(S)?y.match(S)[1]:""};`:y||"",ie=f?`font-size: ${f}px;`:"",se=void 0!==I&&I?`box-shadow: 0 5px ${P}px 0 ${_};`:"",re=R instanceof Array&&1===R.length&&R[0],oe=re?`margin: ${re.top}px ${re.right}px ${re.bottom}px ${re.left}px;`:"",ae=re?`margin: calc(${re.top}px * 0.5) calc(${re.right}px * 0.5) calc(${re.bottom}px * 0.5) calc(${re.left}px * 0.5);`:"",ce=N instanceof Array&&1===N.length&&N[0],le=ce?`padding: ${ce.top}px ${ce.right}px ${ce.bottom}px ${ce.left}px;`:"",he=ce?`padding: calc(${ce.top}px * 0.5) calc(${ce.right}px * 0.5) calc(${ce.bottom}px * 0.5) calc(${ce.left}px * 0.5);`:"",de=void 0!==q&&q?`border-width: ${q}px; border-style: solid;`:"",ue=[H,q].every(e=>void 0!==e)&&q?`border-color: ${H};`:"",ge=void 0!==M?`border-radius: ${M}px;`:"",me=void 0!==F?`background-color: ${F};`:"",pe=void 0!==z?`color: ${z}; fill: ${z}; -webkit-text-fill-color: ${z};`:"",ve=U&&"inherit"!==U?`font-family:${U}_${G.match(S)?G.match(S)[1]:""};`:G||"",ye=K?`font-size: ${K}px;`:"",fe="popin"!==s||void 0!==A&&!0!==A?"":[`#${this.widgetContainerId} .${this.overlayClassName} {`,`background-color: ${void 0!==x?x:"rgba(0, 0, 0, 0.6)"};`,"}"].join(""),be="number"==typeof L?L:16,we=be/2,$e=i||void 0!==k&&k?[`#${this.widgetContainerId} .${this.contentClassName} .${this.closeButtonClassName} {`,"position: absolute;",("out"===B?`bottom: calc(100% + ${we}px)`:`top: ${we}px`)+";",`right: ${we}px;`,"width: auto;","height: auto;","background: none;","border: none;","cursor: pointer;","outline: none;","padding: 0;","margin: 0;","line-height: 0;","z-index: 9;","number"==typeof O?`border-radius: ${O}px;`:"","number"==typeof D&&D>0?`border: ${D}px solid ${void 0!==W?W:"rgba(57, 57, 57, 1)"};`:"","string"==typeof V?`background-color: ${V};`:"","}",`#${this.widgetContainerId} .${this.contentClassName} .${this.closeButtonClassName} svg {`,"pointer-events: none;",`width: ${be}px;`,`height: ${be}px;`,"string"==typeof j?`fill: ${j};`:"","}"].join(""):"",Te=b&&"string"==typeof $?[`#${this.widgetContainerId} .${this.contentClassName} > * h1, `,`#${this.widgetContainerId} .${this.contentClassName} > * h2, `,`#${this.widgetContainerId} .${this.contentClassName} > * h3, `,`#${this.widgetContainerId} .${this.contentClassName} > * h4, `,`#${this.widgetContainerId} .${this.contentClassName} > * h5, `,`#${this.widgetContainerId} .${this.contentClassName} > * h6 {`,`color: ${$}; fill: ${$}; -webkit-text-fill-color: ${$};`,void 0!==w?`text-align: ${w};`:"",T&&"inherit"!==T?`font-family:${T}_${C.match(S)?C.match(S)[1]:""};`:C||"",E?`font-size: ${E}px;`:"","}"].join(""):"";return Y.textContent=[`.${this.hideClassName} {`,"opacity: 0 !important;","pointer-events: none;","}",`#${this.widgetContainerId} .${this.contentClassName} {`,J,Z,X,ee,te,se,oe,ne,ie,"}",`#${this.widgetContainerId} .${this.contentClassName} p {`,ee,te,ne,ie,"}",`#${this.widgetContainerId} .${this.contentClassName} > * {`,"display: block;","line-height: 1;","text-indent: unset;",le,ne,ie,"}",`#${this.widgetContainerId} .${this.contentClassName} > * a, `,`#${this.widgetContainerId} .${this.contentClassName} > * button {`,"box-sizing: border-box;","display: inline-block;",de,ue,ge,me,pe,ve,ye,"}",`#${this.widgetContainerId} .${this.contentClassName} > * a *, `,`#${this.widgetContainerId} .${this.contentClassName} > * button * {`,pe,ve,ye,"}","@media screen and (max-width: 579px) {",`#${this.widgetContainerId} .${this.contentClassName} {`,ae,"}",`#${this.widgetContainerId} .${this.contentClassName} > * {`,he,"}","}",fe,$e,Te,`${t}`].join(""),Y}}{constructor(){super(),this.stringStyles=this.getStyles(),this.styleElement=this.getStyleTag(this.stringStyles)}getStyles(){const{zindex:e,zindexCustom:t,overlay:n}=DATA;return[`#${this.widgetContainerId} {`,"position: fixed;","top: 0;","left: 0;","width: 100%;","height: 100%;",`z-index: ${"custom"===e?t:e};`,"opacity: 1;","transition: opacity 0.25s ease;","background: none;","pointer-events: "+(!1===n?"none":"all"),"}",`#${this.widgetContainerId} .${this.overlayClassName} {`,"position: absolute;","z-index: -1;","top: 0;","left: 0;","width: 100%;","height: 100%;","}",`#${this.widgetContainerId} .${this.contentClassName} {`,"position: absolute;",I(),P(),"pointer-events: all","}",`${_()?"":[`#${this.widgetContainerId} .${this.contentClassName} > div {`,"height: 100%;","overflow: auto;","box-sizing: border-box;","}"].join("")}`,"@media screen and (max-width: 579px) {",`#${this.widgetContainerId} .${this.contentClassName} {`,"max-width: 94vw;","}","}"].join("")}}}),B=N.domElement.querySelector(".".concat(N.contentClassName)),N.children=k,k.insertIn(B,"beforeend"),N.init().then(function(e){e.response&&N.show()})}();\n'}},"@abtasty/promotional-banner":{1.1:{code:'!function(){"use strict";const e=()=>Object.prototype.hasOwnProperty.call(window,"ABTastyEditor"),t=()=>{let e;return window.ABTasty||window.ABTASTY_S?(window.ABTASTY_S&&window.ABTASTY_S.USER&&window.ABTASTY_S.USER.accountIdentifier&&window.ABTASTY_S.USER.accountIdentifier.length?e=window.ABTASTY_S.USER.accountIdentifier:window.ABTasty&&window.ABTasty.getAccountSettings&&"function"==typeof window.ABTasty.getAccountSettings?e=window.ABTasty.getAccountSettings().identifier:window.ABTasty&&window.ABTasty.accountSettings&&(e=window.ABTasty.accountSettings.identifier),e):e},s=()=>{const e=!!document.getElementById("ABTastyPreviewBar"),t=location.href.includes("ab_project=preview");return e||t},i=()=>s()||!!window.ABTasty.getTestsOnPage()[TEST_ID],n=()=>["consentReady","cnilReady"].some((e=>window.ABTasty&&Object.prototype.hasOwnProperty.call(window.ABTasty,e)&&!0===window.ABTasty[e])),r="remove",o="rebuild",a="https://social-proof-api.abtasty.com/clients/",c=()=>{const{type:e}=DATA;return`${PACKAGE.replace("@abtasty/","")}${e?`_${e}`:""}`},l=()=>{const e=c();return`${e.charAt(0).toUpperCase()}${e.slice(1)}`.split("-").join(" ")},h=()=>`${PLUGIN_ID.split("-")[0]}_${TEST_ID}`,d=t=>{if((()=>{if(e()||s())return!1;const t=ABTasty.getTestsOnPage()[TEST_ID];return!!t&&Object.keys(t.targetings.qaParameters).length>0})()){const e=l();window.console.log(`%c${e} - QA Mode for campaign ${TEST_ID}\\n${t}`,"background-color: rgba(0, 127, 145, 1); color: rgba(247, 247, 247, 1)")}},u=e=>{const t={promise:null,resolve:null,reject:null,name:e};return t.promise=new Promise(((e,s)=>{t.resolve=e,t.reject=s})),t},g=(e,t,s)=>{let i=0,n=0;try{document.querySelector(e)}catch(t){const i=`Selector «${e}» not valid.`;return d(i),"function"==typeof s&&s(i)}function r(){clearInterval(n),clearTimeout(i)}return i=setTimeout((()=>{r();const t=`Can\'t find element «${e}».`;return d(t),"function"==typeof s&&s(t)}),1e4),n=setInterval((()=>{const s=document.querySelector(e);return null!==s?(r(),"function"==typeof t&&t(s)):s}),200),{clear:r}};function m(e,t){return t(e)||!e.parentElement?e:m(e.parentElement,t)}function p(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype||(e="https://polyfill.io/v3/polyfill.min.js?flags=gated&features=IntersectionObserver",new Promise(((t,s)=>{const i=window.document.getElementsByTagName("script")[0],n=window.document.createElement("script");n.src=e,i.parentNode.insertBefore(n,i),n.onload=t,n.onerror=s})));var e}class v{constructor(){this.targets=[],this.existingTargets=[],this.inViewportTargets=[],this.visibilityObserver=this.startVisibilityObserver(),this.mutationObserver=this.startMutationObserver(),this.mouseOverEvent=this.mouseOverHandler()}intersectionHandler(e){e.forEach((e=>{e.isIntersecting?(this.existingTargets.forEach((t=>{t.element.isSameNode(e.target)&&(this.inViewportTargets.push(t),this.mouseOverEvent.start())})),this.checkElements()):this.inViewportTargets=this.inViewportTargets.filter((t=>!t.element.isSameNode(e.target)||(this.mouseOverEvent.clear(),!1)))}))}startVisibilityObserver(){return new IntersectionObserver(this.intersectionHandler.bind(this),{root:null,rootMargin:"0px",threshold:0})}startMutationObserver(){const e=this.mutationObserver||new MutationObserver(this.checkElements.bind(this));return document.body&&e.observe(document.body,{attributes:!0,childList:!0,subtree:!0}),e}onMouseOver({target:e,path:t}){const s=this.inViewportTargets.find((({element:s,selector:i})=>{if(s.isSameNode(e))return!0;const n=[...e.querySelectorAll(i)];if(n.length){if(n.includes(s))return!0}if(t.includes(s))return!0;const r=[...e.parentElement.children],o=r.findIndex((t=>t.isSameNode(e))),a=r.filter(((e,t)=>t>o));if(a.length){if(a.includes(s))return!0;if(a.some((e=>[...e.querySelectorAll(i)].includes(s))))return!0}return!1}));if(s&&this.isElementVisible(s.element)){const{selector:e,element:t,uniqueId:i}=s,n=this.targets.find((t=>t.selector===e&&t.uniqueId===i));n&&n.resolve(t),this.clear(e,i)}}mouseOverHandler(){const e=["mouseover",e=>setTimeout((()=>this.onMouseOver(e)),50),!0];return{start:()=>document.addEventListener(...e),clear:()=>document.removeEventListener(...e)}}isElementVisible(e){return this.isElementTopmost(e)&&this.isElementOpaque(e)}isElementOpaque(e){return"HTML"===m(e,(e=>"0"===window.getComputedStyle(e).opacity)).nodeName}isElementTopmost(e){const t=e.getBoundingClientRect(),s=[[t.left,t.top],[t.right,t.top],[t.left,t.bottom],[t.right,t.bottom],[t.left+t.width/2,t.top],[t.left+t.width/2,t.bottom],[t.left,t.height/2],[t.right,t.height/2],[t.left+t.left/2,t.height/2]];let i=!1,n=0;for(;!i&&n<s.length;){const t=document.elementFromPoint(...s[n]);i=e===t||e.contains(t),n+=1}return i}checkElements(){this.targets.forEach((({selector:e,uniqueId:t})=>{const s=document.querySelector(e);s&&!this.existingTargets.find((s=>s.element.matches(e)&&s.uniqueId===t))&&(this.existingTargets.push({element:s,selector:e,uniqueId:t}),this.visibilityObserver.observe(s))})),this.existingTargets=this.existingTargets.filter((({selector:e,element:t})=>!!document.querySelector(e)||(t&&this.visibilityObserver.unobserve(t),!1))),this.inViewportTargets=this.inViewportTargets.filter((({selector:e,element:t,uniqueId:s})=>{if(t.matches(e)&&this.isElementVisible(t)){const i=this.targets.find((t=>t.selector===e&&t.uniqueId===s));return i&&i.resolve(t),this.clear(e,s),!1}return!0}))}watch(e,t,s){this.targets.push({selector:e,resolve:t,uniqueId:s});const i=()=>{this.startMutationObserver(),this.checkElements()};document.body?i():g("body",i)}clear(e,t){[this.targets,this.existingTargets,this.inViewportTargets]=[this.targets,this.existingTargets,this.inViewportTargets].map((s=>s.filter((({selector:s,uniqueId:i})=>s!==e&&i!==t))));const s=document.querySelector(e);s&&this.visibilityObserver.unobserve(s),0===this.targets.length&&this.mutationObserver.disconnect(),0===this.inViewportTargets.length&&this.mouseOverEvent.clear()}}class y{constructor({triggerEvent:e,triggerSelector:t,triggerDelay:s}){this.event=e,this.selector=t&&t.length?t:"body",this.delay=1e3*s,this.elementsSelectors=[],this.eventsListeners=[],this.timeouts=[],this.intervals=[],this.observers=[],this.promises=[],this.visibilityObservers=[],this.elementsWaiters=[]}async onElementVisible({promise:e,resolve:t}){const s=u(`${this.event}DomReady`);this.promises.push(s);const i=await this.onPageLoad(s),n=await async function(e){let t;switch(e){case"IntersectionObserver":t=await p();break;default:t=!0}return t}("IntersectionObserver"),r=new v;if(this.visibilityObservers.push(r),n&&i){const e=h();r.watch(this.selector,t,e)}return e}onPageLoad({promise:e,resolve:t}){const s=()=>"complete"===document.readyState;if(!s()){const i=["readystatechange",()=>s()&&t(!0),{passive:!0}];return this.eventsListeners.push(i),document.addEventListener(...i),e}return t(!0),e}onClick({promise:e,resolve:t}){const s=document.createElement("style");s.type="text/css",s.id=`Click_${h()}`,s.innerHTML=`${this.selector} {\\n\\t\\t\\tcursor: pointer !important;\\n\\t\\t\\tpointer-events: all !important;\\n\\t\\t}`,document.head.appendChild(s),this.elementsSelectors.push(`#${s.id}`);const i=e=>[...document.querySelectorAll(this.selector)].some((t=>t.isSameNode(e)||!!e.closest(this.selector))),n=["click",({target:e})=>i(e)&&t(!0),{passive:!0,capture:!0}];return this.eventsListeners.push(n),document.addEventListener(...n),e}onExitIntent({promise:e,resolve:t}){const s=["mouseleave",async({clientY:e})=>{e<=0&&t(!0)},{passive:!0}],i=g("body",(e=>{e.addEventListener(...s),this.eventsListeners.push([e,...s]),this.elementsWaiters=this.elementsWaiters.filter((e=>e!==i))}));return this.elementsWaiters.push(i),e}onReengage({promise:e,resolve:t}){const s=this.delay;let i=s;const n=[()=>(i=s,i),{passive:!0}];["click","mousemove","scroll","keypress"].forEach((e=>{document.addEventListener(e,...n),this.eventsListeners.push([e,...n])}));const r=setInterval((()=>{i<=0?t(!0):i-=100}),100);return this.intervals.push(r),e}onCustomTrigger({promise:e,resolve:t}){const{triggerEventCustomScript:s}=DATA;return new Function(`return new Promise(async resolve => {${s}})`)().then((e=>e&&t(!0))),e}getSocialProofPurchases({promise:e,resolve:s}){const i=window.ABTastyProductKey,n=t(),{viewInterval:r,triggerSocialProofMinPurchases:o,spNoTrim:c}=DATA;if(i||(d("Not able to find ABTastyProductKey, impossible to call the API."),s(!1)),i&&n){fetch(`${a}${n}/metrics/i?key=${i}${c?"&noTrim=true":""}`).then((e=>e.ok&&e.json())).then((e=>(e=>{if(void 0===r||void 0===o)return!1;const t=void 0!==e[r]&&e[r]>=o;return t||d(`Widget will not be shown, product has been purchased ${e[r]} times while ${o} are required`),t})(e)&&s(`${e[r]}`))).catch((()=>d("Failed to fetch datas from server.")))}else s(!1);return e}getSocialProofPageViews({promise:e,resolve:s}){const{viewInterval:i,triggerSocialProofMinPageViews:n,spNoTrim:r}=DATA,o=encodeURIComponent(r?window.location.href.replace(window.location.origin,""):`${window.location.pathname}`),c=t();if(o&&c){fetch(`${a}${c}/metrics/pv?key=${o}${r?"&noTrim=true":""}`).then((e=>e.ok&&e.json())).then((e=>(e=>{if(void 0===i||void 0===n)return!1;const t=void 0!==e[i]&&e[i]>=n;return t||d(`Widget will not be shown, page has been seen ${e[i]} times while ${n} are required`),t})(e)&&s(`${e[i]}`))).catch((()=>d("Failed to fetch datas from server.")))}else s(!1);return e}onConsent({promise:e,resolve:t}){if(!n()){const s=["consentValid",()=>t(!0)];return this.eventsListeners.push(s),document.addEventListener(...s),e}return t(!0),e}clear(){if(this.elementsSelectors.length&&(this.elementsSelectors.forEach((e=>{document.querySelector(e)&&document.querySelector(e).remove()})),this.elementsSelectors=[]),this.eventsListeners.length&&(this.eventsListeners.forEach((e=>{const[t,...s]="string"==typeof e[0]?[document,...e]:e;t&&s.length>1&&t.removeEventListener(...s)})),this.eventsListeners=[]),this.timeouts.length&&(this.timeouts.forEach((e=>clearTimeout(e))),this.timeouts=[]),this.intervals.length&&(this.intervals.forEach((e=>clearInterval(e))),this.intervals=[]),this.observers.length&&(this.observers.forEach((e=>e.disconnect())),this.observers=[]),this.visibilityObservers.length){const e=h();this.visibilityObservers.forEach((t=>t.clear(this.selector,e))),this.visibilityObservers=[]}return this.promises.length&&(this.promises.forEach((e=>e.resolve(!1))),this.promises=[]),this.elementsWaiters.length&&(this.elementsWaiters.forEach((e=>e.clear())),this.elementsWaiters=[]),this}async isTriggered(){this.clear();const e=u(this.event);this.promises.push(e);const t={consent:()=>this.onConsent(e),direct:()=>!0,pageLoad:()=>this.onPageLoad(e),click:()=>this.onClick(e),exitIntent:()=>this.onExitIntent(e),reengage:()=>this.onReengage(e),elementVisible:()=>this.onElementVisible(e),script:()=>this.onCustomTrigger(e),socialProofPurchases:()=>this.getSocialProofPurchases(e),socialProofPageViews:()=>this.getSocialProofPageViews(e)},s=!Object.prototype.hasOwnProperty.call(t,this.event)||await t[this.event]();this.clear();return"reengage"!==this.event&&this.delay?s&&await(async()=>{const e=u(`${this.event}Delay`);return this.promises.push(e),setTimeout((()=>{e.resolve(!0),this.clear()}),this.delay),e.promise})():s}}const w="display",f="closing",b="validation",S="ABTastyWidgets",$="ABTastyWidgetsTemporary";class T{constructor({displayRecurrence:e,closingRecurrence:t,validationRecurrence:s},i){this.displayRecurrence=parseFloat(e),this.closingRecurrence=parseFloat(t),this.validationRecurrence=parseFloat(s),this.onSetCallback=i,this.widgetName=c(),this.uniqueId=h(),this.recurrenceKey=`${this.widgetName}_${this.uniqueId}`,this.isListeningStorageEvent=this.listenStorageEvent(),this.pendingRecurrence=!1,this.pendingRecurrenceValue={}}onStorage({key:e}){const t=localStorage.getItem($),s=sessionStorage.getItem(S);"ABTastyData"===e&&!t&&s&&localStorage.setItem($,s)}listenStorageEvent(){return this.isListeningStorageEvent||window.addEventListener("storage",this.onStorage.bind(this)),!0}getGivenRecurrenceStorageParsed(e){try{const t=e.getItem(S);return JSON.parse(t)}catch(t){return e.removeItem(S),!1}}getSessionRecurrenceStorageParsed(){return this.getGivenRecurrenceStorageParsed(window.sessionStorage)}getLocalRecurrenceStorageParsed(){return this.getGivenRecurrenceStorageParsed(window.localStorage)}removeGivenStorage(e,t){const{[this.recurrenceKey]:s,...i}=t;return Object.entries(i).length?(e.setItem(S,JSON.stringify(i)),i):(e.removeItem(S),!1)}removeSessionRecurrenceStorage(){const e=this.getSessionRecurrenceStorageParsed();return!!e&&this.removeGivenStorage(window.sessionStorage,e)}removeLocalRecurrenceStorage(){const e=this.getLocalRecurrenceStorageParsed();return!!e&&this.removeGivenStorage(window.localStorage,e)}getSessionRecurrence(){const e=this.getSessionRecurrenceStorageParsed();return!!e&&e[this.recurrenceKey]}getLocalRecurrence(){const e=this.getLocalRecurrenceStorageParsed();return!!e&&e[this.recurrenceKey]}getCurrentRecurrence(){if(this.pendingRecurrence)return this.pendingRecurrenceValue;const e=this.getSessionRecurrence(),t=this.getLocalRecurrence();return e||t||{type:!1}}isOver(){const e=localStorage.getItem($),t=!(!e||!e.includes(this.recurrenceKey))||this.getSessionRecurrence();e&&(sessionStorage.setItem(S,e),localStorage.removeItem($));const s=this.getLocalRecurrence(),i=(s?parseFloat(s.stamp):0)<(new Date).getTime();return i&&this.removeLocalRecurrenceStorage(),!this.pendingRecurrence&&i&&!this.getLocalRecurrence()&&!t}setRecurrence(e,t){0!==e&&(window.removeEventListener("storage",this.onStorage.bind(this)),this.isListeningStorageEvent=!1);const i=this.getTypeOfStorage(e);if(s()||!i&&"object"!=typeof i)return!1;const{storageString:r,storageMethod:o}=i,a=this.getStamp(e),c={type:t,stamp:a},{type:l}=this.getCurrentRecurrence(),h=async()=>{if(!n()){this.pendingRecurrence=!0,this.pendingRecurrenceValue=c;const e=new y({triggerEvent:"consent"});await e.isTriggered(),this.pendingRecurrence=!1,this.pendingRecurrenceValue={}}const e=this.getSessionRecurrence(),t=this.getLocalRecurrence();let s;"session"===r?e?s=this.removeSessionRecurrenceStorage():(this.removeLocalRecurrenceStorage(),s=this.getSessionRecurrenceStorageParsed()):"local"===r&&(t?s=this.removeLocalRecurrenceStorage():(this.removeSessionRecurrenceStorage(),s=this.getLocalRecurrenceStorageParsed()));const i=s?{[this.recurrenceKey]:c,...s}:{[this.recurrenceKey]:c};o.setItem(S,JSON.stringify(i)),this.onSetCallback&&"function"==typeof this.onSetCallback&&this.onSetCallback()};if(!o)return!1;if(l&&t!==b)if(t===f&&l!==b)h();else{if(t!==w||l===b||l===f)return!1;h()}else h();return a}setDisplayRecurrence(){this.setRecurrence(this.displayRecurrence,"display")}setClosingRecurrence(){this.setRecurrence(this.closingRecurrence,"closing")}setValidationRecurrence(){this.setRecurrence(this.validationRecurrence,"validation")}getStamp(e){return(new Date).getTime()+864e5*e}getTypeOfStorage(e){return!(isNaN(e)||e<0||0!==e&&!e)&&(e>0?{storageString:"local",storageMethod:window.localStorage}:0===e&&{storageString:"session",storageMethod:window.sessionStorage})}}class C{constructor(e,t,s){this.recurrence=e,this.isWidgetApplied=t,this.callback=s,this.observer=new MutationObserver(this.observerHandler.bind(this)),this.eventListenerParams=["abtasty_resetActionTracking",this.eventHandler.bind(this),{passive:!0}],this.elementsWaiters=[]}recurrenceIsDone(){return!this.recurrence||this.recurrence.isOver()}decisionHandler(e){const t=i(),{type:s}=this.recurrence?this.recurrence.getCurrentRecurrence():{type:!1},n=()=>{const t=this.recurrenceIsDone();return e&&"display"===s||t};return!this.isWidgetApplied()&&t&&n()?(this.clearWatcher(),this.callback(o,e)):(!this.isWidgetApplied()||t&&n())&&(this.isWidgetApplied()||t)||(this.clearWatcher(),this.callback(r,e),this.watch()),this}eventHandler(){let e=i();return[250,500].forEach((t=>setTimeout((()=>500===t&&i()===e?this:(e=i(),this.decisionHandler(!1))),t))),this}observerHandler(e){const t=e.some((({removedNodes:e})=>e&&e.length)),s=e.some((({addedNodes:e})=>e&&e.length));return t||s?(this.decisionHandler(!0),this):this}watch(){if(e())return this;this.clearWatcher(),document.addEventListener(...this.eventListenerParams);const t=g("body",(e=>{const s=[e,{childList:!0,subtree:!0}];this.observer.observe(...s),this.elementsWaiters=this.elementsWaiters.filter((e=>e!==t))}));return this.elementsWaiters.push(t),this}clearWatcher(){return document.removeEventListener(...this.eventListenerParams),this.elementsWaiters.length&&(this.elementsWaiters.forEach((e=>e.clear())),this.elementsWaiters=[]),this.observer.disconnect(),this}}const E=/.+\\/([^.]+)\\.(otf|ttf)$/;class A{constructor(){this.children=void 0,this.uniqueId=h(),this.widgetName=c(),this.prettyName=l(),this.recurrenceParams=(()=>{const{displayRecurrence:t,closingRecurrence:s,validationRecurrence:i}=DATA;if(e()||!t&&!s&&!i)return!1;const n={everytime:()=>-1,session:()=>0,once:()=>395,day:e=>DATA[`${e}_day`],week:e=>7*DATA[`${e}_week`],month:e=>30.5*DATA[`${e}_month`]},r={};return t&&(r.displayRecurrence=n[t]("displayRecurrence")),s&&(r.closingRecurrence=n[s]("closingRecurrence")),i&&(r.validationRecurrence=n[i]("validationRecurrence")),r})(),this.triggerParams=(()=>{let{triggerEvent:t}=DATA;const{triggerEventClick:s,triggerEventReengageDelay:i,socialProofContentType:n,triggerEventElementVisible:r,triggerEventDelay:o}=DATA;if(e()||!t&&!n)return!1;const a={click:()=>s,elementVisible:()=>r},c=Object.prototype.hasOwnProperty.call(a,t)?a[t]():"body",l="reengage"===t?i:o;return n&&(t=1===n?"socialProofPurchases":"socialProofPageViews"),{triggerEvent:t,triggerSelector:c,triggerDelay:l}})(),this.recurrence=!!this.recurrenceParams&&new T(this.recurrenceParams,this.clearGivenClearables.bind(this)),this.trigger=!!this.triggerParams&&new y(this.triggerParams),this.pageWatcher=new C(this.recurrence,this.isWidgetApplied.bind(this),this.onPageChange.bind(this)),this.hasOncePerPageTrigger=(()=>{const{isOncePerPageTrigger:e,triggerEvent:t}=DATA;return!t||(!(!e||!["click","script"].includes(t))||["pageLoad","direct","reengage","socialProofPurchases","socialProofPageViews","elementVisible"].some((e=>e===t)))})(),this.basicClassName=`ab_widget_container_${this.widgetName}`,this.widgetContainerId=`${this.basicClassName}_${this.uniqueId}`,this.contentClassName=`${this.basicClassName}_content`,this.overlayClassName=`${this.basicClassName}_overlay`,this.closeButtonClassName=`${this.basicClassName}_close_button`,this.hideClassName=`ab_hide_${this.uniqueId}`,this.domElement=this.getDom(),this.hasBeenShown=!1,this.closedByUser=!1,this.eventsListeners=[],this.timeouts=[],this.intervals=[],this.observers=[],this.promises=[],this.elementsWaiters=[]}clearGivenClearables(){this.eventsListeners.length&&(this.eventsListeners.forEach((e=>document.removeEventListener(...e))),this.eventsListeners=[]),this.timeouts.length&&(this.timeouts.forEach((e=>clearTimeout(e))),this.timeouts=[]),this.intervals.length&&(this.intervals.forEach((e=>clearInterval(e))),this.intervals=[]),this.observers.length&&(this.observers.forEach((e=>e.disconnect())),this.observers=[]),this.promises.length&&(this.promises.forEach((e=>e.resolve(!1))),this.promises=[]),this.elementsWaiters.length&&(this.elementsWaiters.forEach((e=>e.clear())),this.elementsWaiters=[])}isWidgetApplied(){return this.domElement&&!!this.domElement.closest("html")}removeOldDomElement(){const e=document.getElementById(this.widgetContainerId);return e&&e.remove(),this}async insert(){const e=(e,t,s)=>{this.elementsWaiters=this.elementsWaiters.filter((e=>e!==t)),s(e)},t=new Promise(((t,s)=>{const i=g("head",(e=>{this.elementsWaiters=this.elementsWaiters.filter((e=>e!==i)),t(e.appendChild(this.styleElement))}),(t=>e(t,i,s)));this.elementsWaiters.push(i)})),s=new Promise(((t,s)=>{const{layout:i,elementReferrer:n,referrerInsertType:r}=DATA,{selector:o,position:a}="string"==typeof i&&"free"===i&&"string"==typeof n&&"string"==typeof r?{selector:n,position:r}:{selector:"body",position:"beforeend"},c=g(o,(e=>{this.elementsWaiters=this.elementsWaiters.filter((e=>e!==c)),this.removeOldDomElement(),t(e.insertAdjacentElement(a,this.domElement))}),(t=>e(t,c,s)));this.elementsWaiters.push(c)}));return Promise.all([s,t]).then((()=>this))}remove(){return this.pageWatcher.clearWatcher(),this.domElement&&this.domElement.closest("html")&&this.domElement.remove(),this.styleElement&&this.styleElement.closest("html")&&this.styleElement.remove(),this.hasOncePerPageTrigger?this.pageWatcher.watch():e()||this.init().then((({response:e})=>e?this.show():this)),this}show(){return this.hasBeenShown||e()||window.ABTastyEvent(`${this.prettyName} displayed`,null,TEST_ID),this.closedByUser=!1,this.domElement.classList.remove(this.hideClassName),this.recurrence&&this.recurrence.setDisplayRecurrence(),this.hasBeenShown=!0,this.pageWatcher.watch(),this}hide(){return this.hasBeenShown&&!e()&&window.ABTastyEvent(`${this.prettyName} closed`,null,TEST_ID),this.closedByUser=!0,this.domElement.classList.add(this.hideClassName),this}async init(t){if(!e()&&!i())return!1;if(this.trigger&&this.trigger.promises.length)return!1;const s=this.recurrence&&this.recurrence.isOver();if(this.recurrence&&!s)return this.pageWatcher.watch(),!1;this.pageWatcher.watch();const n=e()||!this.trigger||this.trigger&&await this.trigger.isTriggered();return!!n&&(await this.insert(),this.addCloseEvent(),e()||t||this.hasBeenShown||void 0===this.children||"function"!=typeof this.children.refreshContent||this.children.refreshContent(n),{container:this,response:n})}onPageChange(e,t){const s=()=>this.init().then((({response:e})=>e&&this.show()));switch(t||(this.hasBeenShown=!1),e){case r:this.isWidgetApplied()?this.remove():(this.trigger&&this.trigger.clear(),this.pageWatcher.watch());break;case o:this.hasBeenShown?this.closedByUser?this.pageWatcher.watch():this.insert().then((e=>e.show())):s()}}addCloseEvent(...t){const{closeButton:s,overlayClickable:i,layout:n}=DATA,r=[];if(void 0!==i&&i&&void 0!==n&&"popin"===n&&r.push(`.${this.overlayClassName}`),void 0!==s&&s&&r.push(`.${this.closeButtonClassName}`),!r.length)return this;const o=this.domElement.querySelectorAll(r.join(", "));return o.length?(t.push(...o),t.forEach((t=>{e()&&(t.dataset.abtastyActionnable="true"),t.addEventListener("click",(t=>{(t=>{e()||(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation())})(t),this.recurrence&&this.recurrence.setClosingRecurrence(),this.hide(),setTimeout((()=>this.remove()),1e3)}),{once:!0,capture:!0})})),this):this}getDom(){const{closeButton:e,layout:t}=DATA,s=document.createElement("div");return s.className=`${this.basicClassName} ${this.hideClassName}`,s.id=this.widgetContainerId,s.innerHTML=`\\n\\t\\t\\t${void 0!==t&&"popin"===t?`<div class="${this.overlayClassName}"></div>`:""}\\n\\t\\t\\t<div class="${this.contentClassName}">\\n\\t\\t\\t${e?`<button class="${this.closeButtonClassName}"><svg viewBox="0 0 16 16">\\n\\t<defs><path id="prefix__a" d="M12 4.991L11.009 4 8 7.009 4.991 4 4 4.991 7.009 8 4 11.009 4.991 12 8 8.991 11.009 12 12 11.009 8.991 8z"></path></defs>\\n\\t<g><use xlink:href="#prefix__a"></use></g>\\n</svg></button>`:""}\\n\\t\\t\\t</div>`,s}loadFont(e,t){if(!e||"inherit"===e)return;const s=document.createElement("style"),i=t.match(E)?t.match(E)[1]:"";s.appendChild(document.createTextNode(`\\t\\t\\t@font-face {    \\t\\tfont-family: \'${e}_${i}\';            src: url(\'${t}\');\\t\\t\\t}\\t\\t`)),document.head.appendChild(s)}getStyleTag(t=""){const{noStyles:s,layout:i}=DATA,{backgroundColor:n,isBackgroundImage:r,backgroundImage:o,backgroundSize:a,backgroundPosition:c,backgroundRepeat:l,borderColor:h,borderRadius:d,borderWidth:u,textColor:g,textAlign:m,fontName:p,fontStyle:v,fontSize:y,isTitle:w,titleTextAlign:f,titleTextColor:b,titleFontName:S,titleFontStyle:$,titleFontSize:T,overlayColor:C,dropShadow:A,dropShadowColor:I,dropShadowBlur:x,containerMargin:N,containerPadding:R,closeButton:P,buttonsBorderWidth:k,buttonsBorderColor:L,buttonsBorderRadius:O,buttonsBackgroundColor:B,buttonsTextColor:W,buttonsFontName:D,buttonsFontStyle:_,buttonsFontSize:V}=s?{}:DATA,q=document.createElement("style");q.type="text/css",e()&&q.setAttribute("abtasty-script-added","true"),this.loadFont(p,v),this.loadFont(S,$),this.loadFont(D,_);const j=`background: ${["string"==typeof n?n:"rgba(255, 255, 255, 1)",r&&"string"==typeof o&&o.length?`url(${o})`:"",r&&"string"==typeof c&&"100% 100%"!==a?c:"0 0",r&&"string"==typeof a?`/ ${a}`:"/ auto",r&&l&&!["cover","100% 100%"].includes(a)?"repeat":"no-repeat"].join(" ").trim()};`,M="number"==typeof u&&u>0,F=`border: ${[M?`${u}px`:"unset",M?"solid":"",M&&"string"==typeof h&&h.length?h:""].join(" ").trim()};`,H=void 0!==d?`border-radius: ${d}px;`:"",z=void 0!==g?`color: ${g}; fill: ${g}; -webkit-text-fill-color: ${g};`:"",U=void 0!==m?`text-align: ${m};`:"",G=p&&"inherit"!==p?`font-family:${p}_${v.match(E)?v.match(E)[1]:""};`:v||"",K=y?`font-size: ${y}px;`:"",Y=void 0!==A&&A?`box-shadow: 0 5px ${x}px 0 ${I};`:"",J=N instanceof Array&&1===N.length&&N[0],Q=J?`margin: ${J.top}px ${J.right}px ${J.bottom}px ${J.left}px;`:"",X=J?`margin: calc(${J.top}px * 0.5) calc(${J.right}px * 0.5) calc(${J.bottom}px * 0.5) calc(${J.left}px * 0.5);`:"",Z=R instanceof Array&&1===R.length&&R[0],ee=Z?`padding: ${Z.top}px ${Z.right}px ${Z.bottom}px ${Z.left}px;`:"",te=Z?`padding: calc(${Z.top}px * 0.5) calc(${Z.right}px * 0.5) calc(${Z.bottom}px * 0.5) calc(${Z.left}px * 0.5);`:"",se=void 0!==k&&k?`border-width: ${k}px; border-style: solid;`:"",ie=[L,k].every((e=>void 0!==e))&&k?`border-color: ${L};`:"",ne=void 0!==O?`border-radius: ${O}px;`:"",re=void 0!==B?`background-color: ${B};`:"",oe=void 0!==W?`color: ${W}; fill: ${W}; -webkit-text-fill-color: ${W};`:"",ae=D&&"inherit"!==D?`font-family:${D}_${_.match(E)?_.match(E)[1]:""};`:_||"",ce=V?`font-size: ${V}px;`:"",le=void 0!==i&&"popin"===i?[`#${this.widgetContainerId} .${this.overlayClassName} {`,`background-color: ${void 0!==C?C:"rgba(0, 0, 0, 0.6)"};`,"}"].join(""):"",he=s||void 0!==P&&P?[`#${this.widgetContainerId} .${this.contentClassName} .${this.closeButtonClassName} {`,"position: absolute;","top: 8px;","right: 8px;","width: auto;","height: auto;","background: none;","border: none;","cursor: pointer;","outline: none;","padding: 0;","margin: 0;","}",`#${this.widgetContainerId} .${this.contentClassName} .${this.closeButtonClassName} svg {`,"pointer-events: none;","width: 16px;","height: 16px;",z,G,K,"}"].join(""):"",de=w&&"string"==typeof b?[`#${this.widgetContainerId} .${this.contentClassName} > * h1, `,`#${this.widgetContainerId} .${this.contentClassName} > * h2, `,`#${this.widgetContainerId} .${this.contentClassName} > * h3, `,`#${this.widgetContainerId} .${this.contentClassName} > * h4, `,`#${this.widgetContainerId} .${this.contentClassName} > * h5, `,`#${this.widgetContainerId} .${this.contentClassName} > * h6 {`,`color: ${b}; fill: ${b}; -webkit-text-fill-color: ${b};`,void 0!==f?`text-align: ${f};`:"",S&&"inherit"!==S?`font-family:${S}_${$.match(E)?$.match(E)[1]:""};`:$||"",T?`font-size: ${T}px;`:"","}"].join(""):"";return q.textContent=[`.${this.hideClassName} {`,"opacity: 0 !important;","pointer-events: none;","}",`#${this.widgetContainerId} .${this.contentClassName} {`,j,H,F,z,U,Y,Q,G,K,"}",`#${this.widgetContainerId} .${this.contentClassName} p {`,z,U,G,K,"}",`#${this.widgetContainerId} .${this.contentClassName} > * {`,"display: block;","line-height: 1;","text-indent: unset;",ee,G,K,"}",`#${this.widgetContainerId} .${this.contentClassName} > * a, `,`#${this.widgetContainerId} .${this.contentClassName} > * button {`,se,ie,ne,re,oe,ae,ce,"}",`#${this.widgetContainerId} .${this.contentClassName} > * a *, `,`#${this.widgetContainerId} .${this.contentClassName} > * button * {`,oe,ae,ce,"}","@media screen and (max-width: 579px) {",`#${this.widgetContainerId} .${this.contentClassName} {`,X,"}",`#${this.widgetContainerId} .${this.contentClassName} > * {`,te,"}","}",le,he,de,`${t}`].join(""),q}}class I extends A{constructor(){super(),this.stringStyles=this.getStyles(),this.styleElement=this.getStyleTag(this.stringStyles)}getStyles(){return[`#${this.widgetContainerId} {`,"position: fixed;","top: 0;","left: 0;","width: 100%;","height: 100%;","z-index: 9999;","opacity: 1;","transition: opacity 0.25s ease;","background: none;","}",`#${this.widgetContainerId} .${this.overlayClassName} {`,"position: absolute;","z-index: -1;","top: 0;","left: 0;","width: 100%;","height: 100%;","}",`#${this.widgetContainerId} .${this.contentClassName} {`,"position: absolute;","left: 50%;","top: 50%;","transform: translate(-50%, -50%);","width: auto;","height: auto;","}","@media screen and (max-width: 579px) {",`#${this.widgetContainerId} .${this.contentClassName} {`,"max-width: 94vw;","}","}"].join("")}}class x extends A{constructor(){super(),this.position="string"==typeof DATA.layout&&"bannerTop"===DATA.layout?"top":"bottom",this.stringStyles=this.getStyles(),this.styleElement=this.getStyleTag(this.stringStyles)}getStyles(){return[`#${this.widgetContainerId} {`,"position: fixed;",`${this.position}: 0;`,"left: 0;","width: 100%;","height: auto;","z-index: 9999;","opacity: 1;","transition: opacity 0.25s ease;","background: none;","}",`#${this.widgetContainerId} .${this.contentClassName} {`,"position: relative;","}"].join("")}}class N extends A{constructor(){super(),this.stringStyles=this.getStyles(),this.styleElement=this.getStyleTag(this.stringStyles)}getStyles(){return[`#${this.widgetContainerId} {`,"width: auto;","height: auto;","margin: 0;","padding: 0;","background: none;","}",`#${this.widgetContainerId} .${this.contentClassName} {`,"position: relative;","}"].join("")}}function R(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var P=function(){function t(e){var s=e.parentContainer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.parentContainer=s,this.baseClassName="promotionalbanner_container",this.className="".concat(this.baseClassName,"_").concat(s.uniqueId),this.contentElement=this.getContentElement(),this.styleElement=this.getStyleElement()}var s,i,n;return s=t,(i=[{key:"insertIn",value:function(e,t){return document.head.insertAdjacentElement("beforeend",this.styleElement),e.insertAdjacentElement(t,this.contentElement),this}},{key:"getContentElement",value:function(){var t=this,s=DATA,i=s.message,n=s.linkType,r=s.buttonText,o=s.buttonUrl,a=s.bannerUrl,c=s.openInNewTab,l=function(s){return!e()&&s.addEventListener("click",(function(){var e=DATA,s=e.autoHide,i=e.timeHide;s&&setTimeout((function(){return t.parentContainer.hide()}),1e3*i),t.parentContainer.recurrence.setValidationRecurrence()}),{useCapture:!0,once:!0})},h="string"==typeof i&&i.length?"<p>".concat(i,"</p>"):"",d=document.createElement("banner"===n?"a":"div");return d.innerHTML=h,d.className=this.className,"button"===n&&[r,o].every((function(e){return"string"==typeof e&&e.length}))&&(d.insertAdjacentHTML("beforeend",\'<a href="\'.concat(o,\'" \').concat(c?\'target="_blank"\':"",">").concat(r,"</a>")),l(d.querySelector("a"))),"banner"===n&&"string"==typeof a&&a.length&&(d.href=a,c&&(d.target="_blank"),l(d)),d}},{key:"getStyleElement",value:function(){var t=DATA,s=t.textColor,i=t.textAlign,n=t.fontName,r=t.fontStyle,o=t.fontSize,a="#".concat(this.parentContainer.widgetContainerId," .").concat(this.className),c=void 0!==s?"color: ".concat(s,";"):"",l=void 0!==i?"text-align: ".concat(i,";"):"",h=n&&"inherit"!==n?"font-family:".concat(n,";"):r||"",d=o?"font-size: ".concat(o,"px;"):"",u=document.createElement("style");return u.type="text/css",e()&&u.setAttribute("abtasty-script-added","true"),u.textContent=["".concat(a," > * {"),"display: inline-block;","vertical-align: middle;","}","".concat(a," p {"),"margin: 0;","white-space: pre-line;",c,l,h,d,"}","".concat(a," a {"),"padding: 6px 16px;","}","@media screen and (min-width: 1024px) {","".concat(a," p {"),"width: auto;","max-width: 70%;","}","".concat(a," a {"),"margin-left: 4%;","width: auto;","max-width: calc(30% - 4%);","}","}","@media screen and (max-width: 1023px) {","".concat(a," p {"),"width: 100%;","}","".concat(a," a {"),"margin-top: 14px;","}","}"].join(""),u}}])&&R(s.prototype,i),n&&R(s,n),t}();!function(){d("Widget launch");var e=(()=>{const{layout:e}=DATA;let t;switch(e){case"popin":t=new I;break;case"bannerTop":case"bannerBottom":t=new x;break;case"free":t=new N;break;default:t=new A}return t})(),t=e.domElement.querySelector(".".concat(e.contentClassName)),s=new P({parentContainer:e});e.children=s,s.insertIn(t,"beforeend"),e.init(!0).then((function(t){t.response&&e.show()}))}()}();\n'},1.2:{code:'!function(){"use strict";const e=()=>Object.prototype.hasOwnProperty.call(window,"ABTastyEditor"),t=()=>{let e;return window.ABTasty||window.ABTASTY_S?(window.ABTASTY_S&&window.ABTASTY_S.USER&&window.ABTASTY_S.USER.accountIdentifier&&window.ABTASTY_S.USER.accountIdentifier.length?e=window.ABTASTY_S.USER.accountIdentifier:window.ABTasty&&window.ABTasty.getAccountSettings&&"function"==typeof window.ABTasty.getAccountSettings?e=window.ABTasty.getAccountSettings().identifier:window.ABTasty&&window.ABTasty.accountSettings&&(e=window.ABTasty.accountSettings.identifier),e):e},s=()=>{const e=!!document.getElementById("ABTastyPreviewBar"),t=location.href.includes("ab_project=preview");return e||t},i=()=>!e()&&(s()||!!window.ABTasty.getTestsOnPage()[TEST_ID]),n=()=>window.ABTasty&&!0===window.ABTasty.consentReady,r="remove",o="rebuild",a="https://api-social-proof.abtasty.com/clients/",c=()=>{const{type:e}=DATA;return`${PACKAGE.replace("@abtasty/","")}${e?`_${e}`:""}`},l=()=>{const e=c();return`${e.charAt(0).toUpperCase()}${e.slice(1)}`.split("-").join(" ")},h=()=>`${PLUGIN_ID.split("-")[0]}_${TEST_ID}`,d=t=>{if((()=>{if(e()||s())return!1;const t=ABTasty.getTestsOnPage()[TEST_ID];return!!t&&Object.keys(t.targetings.qaParameters).length>0})()){const e=l();window.console.log(`%c${e} - QA Mode for campaign ${TEST_ID}\\n${t}`,"background-color: rgba(0, 127, 145, 1); color: rgba(247, 247, 247, 1)")}},u=e=>{const t={promise:null,resolve:null,reject:null,name:e};return t.promise=new Promise(((e,s)=>{t.resolve=e,t.reject=s})),t},g=(e,t)=>{const s=()=>{try{return document.querySelector(e)}catch(e){return null}};let i=s();const n=[document.body||document.documentElement,{childList:!0,subtree:!0,attributes:!0}],r=()=>a.disconnect(),o=()=>a.observe(...n),a=new MutationObserver((()=>(i=s(),i&&!r()&&t(i))));return i?setTimeout((()=>t(i)),0):o(),{selector:e,clear:r,observe:o}};function m(e,t){return t(e)||!e.parentElement?e:m(e.parentElement,t)}const p=t=>{e()||(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation())};function v(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype||(e="https://polyfill.io/v3/polyfill.min.js?flags=gated&features=IntersectionObserver",new Promise(((t,s)=>{const i=window.document.getElementsByTagName("script")[0],n=window.document.createElement("script");n.src=e,i.parentNode.insertBefore(n,i),n.onload=t,n.onerror=s})));var e}class y{constructor(){this.targets=[],this.existingTargets=[],this.inViewportTargets=[],this.visibilityObserver=this.startVisibilityObserver(),this.mutationObserver=this.startMutationObserver(),this.mouseOverEvent=this.mouseOverHandler()}intersectionHandler(e){e.forEach((e=>{e.isIntersecting?(this.existingTargets.forEach((t=>{t.element.isSameNode(e.target)&&(this.inViewportTargets.push(t),this.mouseOverEvent.start())})),this.checkElements()):this.inViewportTargets=this.inViewportTargets.filter((t=>!t.element.isSameNode(e.target)||(this.mouseOverEvent.clear(),!1)))}))}startVisibilityObserver(){return new IntersectionObserver(this.intersectionHandler.bind(this),{root:null,rootMargin:"0px",threshold:0})}startMutationObserver(){const e=this.mutationObserver||new MutationObserver(this.checkElements.bind(this));return document.body&&e.observe(document.body,{attributes:!0,childList:!0,subtree:!0}),e}onMouseOver({target:e,path:t}){const s=this.inViewportTargets.find((({element:s,selector:i})=>{if(s.isSameNode(e))return!0;const n=[...e.querySelectorAll(i)];if(n.length){if(n.includes(s))return!0}if(t.includes(s))return!0;const r=[...e.parentElement.children],o=r.findIndex((t=>t.isSameNode(e))),a=r.filter(((e,t)=>t>o));if(a.length){if(a.includes(s))return!0;if(a.some((e=>[...e.querySelectorAll(i)].includes(s))))return!0}return!1}));if(s&&this.isElementVisible(s.element)){const{selector:e,element:t,uniqueId:i}=s,n=this.targets.find((t=>t.selector===e&&t.uniqueId===i));n&&n.resolve(t),this.clear(e,i)}}mouseOverHandler(){const e=["mouseover",e=>setTimeout((()=>this.onMouseOver(e)),50),!0];return{start:()=>document.addEventListener(...e),clear:()=>document.removeEventListener(...e)}}isElementVisible(e){return this.isElementTopmost(e)&&this.isElementOpaque(e)}isElementOpaque(e){return"HTML"===m(e,(e=>"0"===window.getComputedStyle(e).opacity)).nodeName}isElementTopmost(e){const t=e.getBoundingClientRect(),s=[[t.left,t.top],[t.right,t.top],[t.left,t.bottom],[t.right,t.bottom],[t.left+t.width/2,t.top],[t.left+t.width/2,t.bottom],[t.left,t.height/2],[t.right,t.height/2],[t.left+t.left/2,t.height/2]];let i=!1,n=0;for(;!i&&n<s.length;){const t=document.elementFromPoint(...s[n]);i=e===t||e.contains(t),n+=1}return i}checkElements(){this.targets.forEach((({selector:e,uniqueId:t})=>{const s=document.querySelector(e);s&&!this.existingTargets.find((s=>s.element.matches(e)&&s.uniqueId===t))&&(this.existingTargets.push({element:s,selector:e,uniqueId:t}),this.visibilityObserver.observe(s))})),this.existingTargets=this.existingTargets.filter((({selector:e,element:t})=>!!document.querySelector(e)||(t&&this.visibilityObserver.unobserve(t),!1))),this.inViewportTargets=this.inViewportTargets.filter((({selector:e,element:t,uniqueId:s})=>{if(t.matches(e)&&this.isElementVisible(t)){const i=this.targets.find((t=>t.selector===e&&t.uniqueId===s));return i&&i.resolve(t),this.clear(e,s),!1}return!0}))}watch(e,t,s){this.targets.push({selector:e,resolve:t,uniqueId:s});const i=()=>{this.startMutationObserver(),this.checkElements()};document.body?i():g("body",i)}clear(e,t){[this.targets,this.existingTargets,this.inViewportTargets]=[this.targets,this.existingTargets,this.inViewportTargets].map((s=>s.filter((({selector:s,uniqueId:i})=>s!==e&&i!==t))));const s=document.querySelector(e);s&&this.visibilityObserver.unobserve(s),0===this.targets.length&&this.mutationObserver.disconnect(),0===this.inViewportTargets.length&&this.mouseOverEvent.clear()}}class f{constructor({triggerEvent:e,triggerSelector:t,triggerDelay:s}){this.event=e,this.selector=t&&t.length?t:"body",this.delay=1e3*s,this.elementsSelectors=[],this.eventsListeners=[],this.timeouts=[],this.intervals=[],this.observers=[],this.promises=[],this.visibilityObservers=[],this.elementsWaiters=[]}async onElementVisible({promise:e,resolve:t}){const s=u(`${this.event}DomReady`);this.promises.push(s);const i=await this.onPageLoad(s),n=await async function(e){let t;switch(e){case"IntersectionObserver":t=await v();break;default:t=!0}return t}("IntersectionObserver"),r=new y;if(this.visibilityObservers.push(r),n&&i){const e=h();r.watch(this.selector,t,e)}return e}onPageLoad({promise:e,resolve:t}){const s=()=>"complete"===document.readyState;if(!s()){const i=["readystatechange",({isTrusted:e})=>e&&s()&&t(!0),{passive:!0}];return this.eventsListeners.push(i),document.addEventListener(...i),e}return t(!0),e}onClick({promise:e,resolve:t}){const s=document.createElement("style");s.type="text/css",s.id=`Click_${h()}`,s.innerHTML=`${this.selector} {\\n\\t\\t\\tcursor: pointer !important;\\n\\t\\t\\tpointer-events: all !important;\\n\\t\\t}`,document.head.appendChild(s),this.elementsSelectors.push(`#${s.id}`);const i=e=>[...document.querySelectorAll(this.selector)].some((t=>t.isSameNode(e)||!!e.closest(this.selector))),n=["click",({isTrusted:e,target:s})=>e&&i(s)&&t(!0),{passive:!0,capture:!0}];return this.eventsListeners.push(n),document.addEventListener(...n),e}onExitIntent({promise:e,resolve:t}){const s=["mouseleave",({isTrusted:e,clientY:s})=>{e&&s<=0&&t(!0)},{passive:!0}],i=g("body",(e=>{e.addEventListener(...s),this.eventsListeners.push([e,...s]),this.elementsWaiters=this.elementsWaiters.filter((e=>e!==i))}));return this.elementsWaiters.push(i),e}onReengage({promise:e,resolve:t}){const s=this.delay;let i=s;const n=[({isTrusted:e})=>{e&&(i=s)},{passive:!0}];["click","mousemove","scroll","keypress"].forEach((e=>{document.addEventListener(e,...n),this.eventsListeners.push([e,...n])}));const r=setInterval((()=>{i<=0?t(!0):i-=100}),100);return this.intervals.push(r),e}onCustomTrigger({promise:e,resolve:t}){const{triggerEventCustomScript:s}=DATA;return new Function(`return new Promise(async resolve => {${s}})`)().then((e=>e&&t(!0))),e}getSocialProofPurchases({promise:e,resolve:s}){const i=window.ABTastyProductKey,n=t(),{viewInterval:r,triggerSocialProofMinPurchases:o,spNoTrim:c}=DATA;if(i||(d("Not able to find ABTastyProductKey, impossible to call the API."),s(!1)),i&&n){fetch(`${a}${n}/metrics/i?key=${i}${c?"&noTrim=true":""}`).then((e=>e.ok&&e.json())).then((e=>(e=>{if(void 0===r||void 0===o)return!1;const t=void 0!==e[r]&&e[r]>=o;return t||d(`Widget will not be shown, product has been purchased ${e[r]} times while ${o} are required`),t})(e)&&s(`${e[r]}`))).catch((()=>d("Failed to fetch datas from server.")))}else s(!1);return e}getSocialProofPageViews({promise:e,resolve:s}){const{viewInterval:i,triggerSocialProofMinPageViews:n,spNoTrim:r}=DATA,o=encodeURIComponent(r?window.location.href.replace(window.location.origin,""):`${window.location.pathname}`),c=t();if(o&&c){fetch(`${a}${c}/metrics/pv?key=${o}${r?"&noTrim=true":""}`).then((e=>e.ok&&e.json())).then((e=>(e=>{if(void 0===i||void 0===n)return!1;const t=void 0!==e[i]&&e[i]>=n;return t||d(`Widget will not be shown, page has been seen ${e[i]} times while ${n} are required`),t})(e)&&s(`${e[i]}`))).catch((()=>d("Failed to fetch datas from server.")))}else s(!1);return e}onConsent({promise:e,resolve:t}){if(!n()){const s=["abtasty_consentValid",()=>t(!0)];return this.eventsListeners.push(s),window.addEventListener(...s),e}return t(!0),e}clear(){if(this.elementsSelectors.length&&(this.elementsSelectors.forEach((e=>{document.querySelector(e)&&document.querySelector(e).remove()})),this.elementsSelectors=[]),this.eventsListeners.length&&(this.eventsListeners.forEach((e=>{const[t,...s]="string"==typeof e[0]?[document,...e]:e;t&&s.length>1&&t.removeEventListener(...s)})),this.eventsListeners=[]),this.timeouts.length&&(this.timeouts.forEach((e=>clearTimeout(e))),this.timeouts=[]),this.intervals.length&&(this.intervals.forEach((e=>clearInterval(e))),this.intervals=[]),this.observers.length&&(this.observers.forEach((e=>e.disconnect())),this.observers=[]),this.visibilityObservers.length){const e=h();this.visibilityObservers.forEach((t=>t.clear(this.selector,e))),this.visibilityObservers=[]}return this.promises.length&&(this.promises.forEach((e=>e.resolve(!1))),this.promises=[]),this.elementsWaiters.length&&(this.elementsWaiters.forEach((e=>e.clear())),this.elementsWaiters=[]),this}async isTriggered(){this.clear();const e=u(this.event);this.promises.push(e);const t={consent:()=>this.onConsent(e),direct:()=>!0,pageLoad:()=>this.onPageLoad(e),click:()=>this.onClick(e),exitIntent:()=>this.onExitIntent(e),reengage:()=>this.onReengage(e),elementVisible:()=>this.onElementVisible(e),script:()=>this.onCustomTrigger(e),socialProofPurchases:()=>this.getSocialProofPurchases(e),socialProofPageViews:()=>this.getSocialProofPageViews(e)},s=!Object.prototype.hasOwnProperty.call(t,this.event)||await t[this.event]();this.clear();return"reengage"!==this.event&&this.delay?s&&await(async()=>{const e=u(`${this.event}Delay`);return this.promises.push(e),setTimeout((()=>{e.resolve(!0),this.clear()}),this.delay),e.promise})():s}}const w="display",b="closing",$="validation",S="ABTastyWidgets",T="ABTastyWidgetsTemporary";class C{constructor({displayRecurrence:e,closingRecurrence:t,validationRecurrence:s},i){this.displayRecurrence=parseFloat(e),this.closingRecurrence=parseFloat(t),this.validationRecurrence=parseFloat(s),this.onSetCallback=i,this.widgetName=c(),this.uniqueId=h(),this.recurrenceKey=`${this.widgetName}_${this.uniqueId}`,this.isListeningStorageEvent=this.listenStorageEvent(),this.pendingRecurrence=!1,this.pendingRecurrenceValue={}}onStorage({key:e}){const t=localStorage.getItem(T),s=sessionStorage.getItem(S);"ABTastyData"===e&&!t&&s&&localStorage.setItem(T,s)}listenStorageEvent(){return this.isListeningStorageEvent||window.addEventListener("storage",this.onStorage.bind(this)),!0}getGivenRecurrenceStorageParsed(e){try{const t=e.getItem(S);return JSON.parse(t)}catch(t){return e.removeItem(S),!1}}getSessionRecurrenceStorageParsed(){return this.getGivenRecurrenceStorageParsed(window.sessionStorage)}getLocalRecurrenceStorageParsed(){return this.getGivenRecurrenceStorageParsed(window.localStorage)}removeGivenStorage(e,t){const{[this.recurrenceKey]:s,...i}=t;return Object.entries(i).length?(e.setItem(S,JSON.stringify(i)),i):(e.removeItem(S),!1)}removeSessionRecurrenceStorage(){const e=this.getSessionRecurrenceStorageParsed();return!!e&&this.removeGivenStorage(window.sessionStorage,e)}removeLocalRecurrenceStorage(){const e=this.getLocalRecurrenceStorageParsed();return!!e&&this.removeGivenStorage(window.localStorage,e)}getSessionRecurrence(){const e=this.getSessionRecurrenceStorageParsed();return!!e&&e[this.recurrenceKey]}getLocalRecurrence(){const e=this.getLocalRecurrenceStorageParsed();return!!e&&e[this.recurrenceKey]}getCurrentRecurrence(){if(this.pendingRecurrence)return this.pendingRecurrenceValue;const e=this.getSessionRecurrence(),t=this.getLocalRecurrence();return e||t||{type:!1}}isOver(){const e=localStorage.getItem(T),t=!(!e||!e.includes(this.recurrenceKey))||this.getSessionRecurrence();e&&(sessionStorage.setItem(S,e),localStorage.removeItem(T));const s=this.getLocalRecurrence(),i=(s?parseFloat(s.stamp):0)<(new Date).getTime();return i&&this.removeLocalRecurrenceStorage(),!this.pendingRecurrence&&i&&!this.getLocalRecurrence()&&!t}setRecurrence(e,t){0!==e&&(window.removeEventListener("storage",this.onStorage.bind(this)),this.isListeningStorageEvent=!1);const i=this.getTypeOfStorage(e);if(s()||!i&&"object"!=typeof i)return!1;const{storageString:r,storageMethod:o}=i,a=this.getStamp(e),c={type:t,stamp:a},{type:l}=this.getCurrentRecurrence(),h=async()=>{if(!n()){this.pendingRecurrence=!0,this.pendingRecurrenceValue=c;const e=new f({triggerEvent:"consent"});await e.isTriggered(),this.pendingRecurrence=!1,this.pendingRecurrenceValue={}}const e=this.getSessionRecurrence(),t=this.getLocalRecurrence();let s;"session"===r?e?s=this.removeSessionRecurrenceStorage():(this.removeLocalRecurrenceStorage(),s=this.getSessionRecurrenceStorageParsed()):"local"===r&&(t?s=this.removeLocalRecurrenceStorage():(this.removeSessionRecurrenceStorage(),s=this.getLocalRecurrenceStorageParsed()));const i=s?{[this.recurrenceKey]:c,...s}:{[this.recurrenceKey]:c};o.setItem(S,JSON.stringify(i)),this.onSetCallback&&"function"==typeof this.onSetCallback&&this.onSetCallback()};if(!o)return!1;if(l&&t!==$)if(t===b&&l!==$)h();else{if(t!==w||l===$||l===b)return!1;h()}else h();return a}setDisplayRecurrence(){this.setRecurrence(this.displayRecurrence,"display")}setClosingRecurrence(){this.setRecurrence(this.closingRecurrence,"closing")}setValidationRecurrence(){this.setRecurrence(this.validationRecurrence,"validation")}getStamp(e){return(new Date).getTime()+864e5*e}getTypeOfStorage(e){return!(isNaN(e)||e<0||0!==e&&!e)&&(e>0?{storageString:"local",storageMethod:window.localStorage}:0===e&&{storageString:"session",storageMethod:window.sessionStorage})}}class E{constructor(e,t,s){this.recurrence=e,this.isWidgetApplied=t,this.callback=s,this.observer=new MutationObserver(this.observerHandler.bind(this)),this.eventListenerParams=["abtasty_resetActionTracking",this.eventHandler.bind(this),{passive:!0}],this.elementsWaiters=[]}recurrenceIsDone(){return!this.recurrence||this.recurrence.isOver()}decisionHandler(e){const t=i(),{type:s}=this.recurrence?this.recurrence.getCurrentRecurrence():{type:!1};let n;const a=this.isWidgetApplied(),c=(()=>{const t=this.recurrenceIsDone();return e&&"display"===s||t})();return!a&&t&&c?n=o:(a&&(!t||!c)||!a&&!t)&&(n=r),"string"==typeof n&&(this.clearWatcher(),this.callback(n,e),this.watch()),this}eventHandler(){let e=i();return[250,500].forEach((t=>{setTimeout((()=>{const s=i();return 500===t&&s===e?this:(e=s,this.decisionHandler(!1))}),t)})),this}observerHandler(e){return e.some((e=>["removedNodes","addedNodes"].some((t=>e[t]&&e[t].length))))?this.decisionHandler(!0):this}watch(){if(e())return this;this.clearWatcher(),document.addEventListener(...this.eventListenerParams);const t=()=>{const e=[document.body,{childList:!0,subtree:!0}];this.observer.observe(...e)};return document.body?t():(()=>{const e=g("body",(()=>{t(),this.elementsWaiters=this.elementsWaiters.filter((t=>t!==e))}));this.elementsWaiters.push(e)})(),this}clearWatcher(){return document.removeEventListener(...this.eventListenerParams),this.elementsWaiters.length&&(this.elementsWaiters.forEach((e=>e.clear())),this.elementsWaiters=[]),this.observer.disconnect(),this}}const A=/.+\\/([^.]+)\\.(otf|ttf)$/;class x{constructor(){this.children=void 0,this.uniqueId=h(),this.widgetName=c(),this.prettyName=l(),this.recurrenceParams=(()=>{const{displayRecurrence:t,closingRecurrence:s,validationRecurrence:i}=DATA;if(e()||!t&&!s&&!i)return!1;const n={everytime:()=>-1,session:()=>0,once:()=>395,day:e=>DATA[`${e}_day`],week:e=>7*DATA[`${e}_week`],month:e=>30.5*DATA[`${e}_month`]},r={};return t&&(r.displayRecurrence=n[t]("displayRecurrence")),s&&(r.closingRecurrence=n[s]("closingRecurrence")),i&&(r.validationRecurrence=n[i]("validationRecurrence")),r})(),this.triggerParams=(()=>{let{triggerEvent:t}=DATA;const{triggerEventClick:s,triggerEventReengageDelay:i,socialProofContentType:n,triggerEventElementVisible:r,triggerEventDelay:o}=DATA;if(e()||!t&&!n)return!1;const a={click:()=>s,elementVisible:()=>r},c=Object.prototype.hasOwnProperty.call(a,t)?a[t]():"body",l="reengage"===t?i:o;return n&&(t=1===n?"socialProofPurchases":"socialProofPageViews"),{triggerEvent:t,triggerSelector:c,triggerDelay:l}})(),this.recurrence=!!this.recurrenceParams&&new C(this.recurrenceParams,this.clearGivenClearables.bind(this)),this.trigger=!!this.triggerParams&&new f(this.triggerParams),this.pageWatcher=new E(this.recurrence,this.isWidgetApplied.bind(this),this.onPageChange.bind(this)),this.hasOncePerPageTrigger=(()=>{const{isOncePerPageTrigger:e,triggerEvent:t}=DATA;return!t||(!(!e||!["click","script"].includes(t))||["pageLoad","direct","reengage","socialProofPurchases","socialProofPageViews","elementVisible"].some((e=>e===t)))})(),this.basicClassName=`ab_widget_container_${this.widgetName}`,this.widgetContainerId=`${this.basicClassName}_${this.uniqueId}`,this.contentClassName=`${this.basicClassName}_content`,this.overlayClassName=`${this.basicClassName}_overlay`,this.closeButtonClassName=`${this.basicClassName}_close_button`,this.hideClassName=`ab_hide_${this.uniqueId}`,this.domElement=this.getDom(),this.hasBeenShown=!1,this.closedByUser=!1,this.eventsListeners=[],this.timeouts=[],this.intervals=[],this.observers=[],this.promises=[],this.elementsWaiters=[]}clearGivenClearables(){this.eventsListeners.length&&(this.eventsListeners.forEach((e=>document.removeEventListener(...e))),this.eventsListeners=[]),this.timeouts.length&&(this.timeouts.forEach((e=>clearTimeout(e))),this.timeouts=[]),this.intervals.length&&(this.intervals.forEach((e=>clearInterval(e))),this.intervals=[]),this.observers.length&&(this.observers.forEach((e=>e.disconnect())),this.observers=[]),this.promises.length&&(this.promises.forEach((e=>e.resolve(!1))),this.promises=[]),this.elementsWaiters.length&&(this.elementsWaiters.forEach((e=>e.clear())),this.elementsWaiters=[])}isWidgetApplied(){return this.domElement&&this.domElement.isConnected}removeOldDomElement(){const e=document.getElementById(this.widgetContainerId);return e&&e.remove(),this}async insert(){if(this.isWidgetApplied())return!1;const e=new Promise((e=>{const t=g("head",(t=>{this.elementsWaiters=this.elementsWaiters.filter((({selector:e})=>"head"!==e)),e(t.appendChild(this.styleElement))}));this.elementsWaiters.push(t)})),t=new Promise((e=>{const{elementReferrer:t="body",referrerInsertType:s="beforeend"}="free"===DATA.layout?DATA:{},i=g(t,(i=>{this.elementsWaiters=this.elementsWaiters.filter((e=>e.selector!==t)),this.removeOldDomElement(),e(i.insertAdjacentElement(s,this.domElement))}));this.elementsWaiters.push(i)}));return Promise.all([t,e]).then((()=>this))}remove(){return this.pageWatcher.clearWatcher(),[this.domElement,this.styleElement].forEach((e=>e&&e.isConnected&&e.remove())),this.hasOncePerPageTrigger?this.pageWatcher.watch():e()||this.init().then((({response:e})=>e?this.show():this)),this}show(){return e()||this.hasBeenShown&&this.hasOncePerPageTrigger||window.ABTastyEvent(`${this.prettyName} displayed`,null,TEST_ID),this.closedByUser=!1,this.domElement.classList.remove(this.hideClassName),this.recurrence&&this.recurrence.setDisplayRecurrence(),this.hasBeenShown=!0,this.pageWatcher.watch(),this}hide(){return!e()&&this.hasBeenShown&&window.ABTastyEvent(`${this.prettyName} closed`,null,TEST_ID),this.closedByUser=!0,this.domElement.classList.add(this.hideClassName),this}async init(t){const s=e(),n=i(),r=this.trigger&&this.trigger.promises.length,o=!this.recurrence||this.recurrence.isOver();if(!s&&!n||r||!o)return!1;this.pageWatcher.watch();const a=s||!this.trigger||this.trigger&&await this.trigger.isTriggered();return!!a&&(await this.insert(),this.addCloseEvent(),s||t||this.hasBeenShown||void 0===this.children||"function"!=typeof this.children.refreshContent||this.children.refreshContent(a),{container:this,response:a})}onPageChange(e,t){const s=()=>this.init().then((({response:e})=>e&&this.show()));t||(this.hasBeenShown=!1);const i=this.isWidgetApplied(),n={[r]:()=>{i?this.remove():(this.trigger&&this.trigger.clear(),this.pageWatcher.watch())},[o]:()=>{this.hasBeenShown?this.closedByUser?this.pageWatcher.watch():i||this.insert().then((e=>e.show())).catch(this.pageWatcher.watch):s()}};"function"==typeof n[e]&&n[e]()}addCloseEvent(...t){const{closeButton:s,overlay:i,overlayClickable:n,layout:r}=DATA,o=[];if(void 0!==i&&!0!==i||!0!==n||"popin"!==r||o.push(`.${this.overlayClassName}`),void 0!==s&&s&&o.push(`.${this.closeButtonClassName}`),!o.length)return this;const a=this.domElement.querySelectorAll(o.join(", "));return a.length?(t.push(...a),t.forEach((t=>{e()&&(t.dataset.abtastyActionnable="true"),t.addEventListener("click",(e=>{p(e),this.recurrence&&this.recurrence.setClosingRecurrence(),this.hide(),setTimeout((()=>this.remove()),1e3)}),{once:!0,capture:!0})})),this):this}getDom(){const{closeButton:e,layout:t,overlay:s=!0}=DATA,i=document.createElement("div");return i.className=`${this.basicClassName} ${this.hideClassName}`,i.id=this.widgetContainerId,i.innerHTML=`\\n\\t\\t\\t${"popin"===t&&!0===s?`<div class="${this.overlayClassName}"></div>`:""}\\n\\t\\t\\t<div class="${this.contentClassName}">\\n\\t\\t\\t${e?`<button class="${this.closeButtonClassName}"><svg viewBox="0 0 16 16">\\n\\t<defs><path id="prefix__a" d="M12 4.991L11.009 4 8 7.009 4.991 4 4 4.991 7.009 8 4 11.009 4.991 12 8 8.991 11.009 12 12 11.009 8.991 8z"></path></defs>\\n\\t<g><use xlink:href="#prefix__a"></use></g>\\n</svg></button>`:""}\\n\\t\\t\\t</div>`,i}loadFont(e,t){if(!e||"inherit"===e)return;const s=document.createElement("style"),i=t.match(A)?t.match(A)[1]:"";s.innerHTML=`@font-face { font-family: \'${e}_${i}\';  src: url(\'${t}\');}`,document.head.appendChild(s)}getStyleTag(t="",s=DATA){const{noStyles:i,layout:n}=s,{backgroundColor:r,isBackgroundImage:o,backgroundImage:a,backgroundSize:c,backgroundPosition:l,backgroundRepeat:h,borderColor:d,borderRadius:u,borderWidth:g,textColor:m,textAlign:p,fontName:v,fontStyle:y,fontSize:f,isTitle:w,titleTextAlign:b,titleTextColor:$,titleFontName:S,titleFontStyle:T,titleFontSize:C,overlay:E,overlayColor:x,dropShadow:I,dropShadowColor:P,dropShadowBlur:R,containerMargin:N,containerPadding:k,closeButton:B,closeButtonPosition:L,closeButtonSize:O,closeButtonBorderRadius:D,closeButtonBorderWidth:W,closeButtonBorderColor:_,closeButtonColor:V,closeButtonBackgroundColor:q,buttonsBorderWidth:j,buttonsBorderColor:M,buttonsBorderRadius:H,buttonsBackgroundColor:z,buttonsTextColor:F,buttonsFontName:U,buttonsFontStyle:G,buttonsFontSize:K}=i?{}:s,Y=document.createElement("style");Y.type="text/css",e()&&Y.setAttribute("abtasty-script-added","true"),this.loadFont(v,y),this.loadFont(S,T),this.loadFont(U,G);const J=`background: ${["string"==typeof r?r:"rgba(255, 255, 255, 1)",o&&"string"==typeof a&&a.length?`url(${a})`:"",o&&"string"==typeof l&&"100% 100%"!==c?l:"0 0",o&&"string"==typeof c?`/ ${c}`:"/ auto",o&&h&&!["cover","100% 100%"].includes(c)?"repeat":"no-repeat"].join(" ").trim()};`,Q="number"==typeof g&&g>0,X=`border: ${[Q?`${g}px`:"unset",Q?"solid":"",Q&&"string"==typeof d&&d.length?d:""].join(" ").trim()};`,Z=void 0!==u?`border-radius: ${u}px;`:"",ee=void 0!==m?`color: ${m}; fill: ${m}; -webkit-text-fill-color: ${m};`:"",te=void 0!==p?`text-align: ${p};`:"",se=v&&"inherit"!==v?`font-family:${v}_${y.match(A)?y.match(A)[1]:""};`:y||"",ie=f?`font-size: ${f}px;`:"",ne=void 0!==I&&I?`box-shadow: 0 5px ${R}px 0 ${P};`:"",re=N instanceof Array&&1===N.length&&N[0],oe=re?`margin: ${re.top}px ${re.right}px ${re.bottom}px ${re.left}px;`:"",ae=re?`margin: calc(${re.top}px * 0.5) calc(${re.right}px * 0.5) calc(${re.bottom}px * 0.5) calc(${re.left}px * 0.5);`:"",ce=k instanceof Array&&1===k.length&&k[0],le=ce?`padding: ${ce.top}px ${ce.right}px ${ce.bottom}px ${ce.left}px;`:"",he=ce?`padding: calc(${ce.top}px * 0.5) calc(${ce.right}px * 0.5) calc(${ce.bottom}px * 0.5) calc(${ce.left}px * 0.5);`:"",de=void 0!==j&&j?`border-width: ${j}px; border-style: solid;`:"",ue=[M,j].every((e=>void 0!==e))&&j?`border-color: ${M};`:"",ge=void 0!==H?`border-radius: ${H}px;`:"",me=void 0!==z?`background-color: ${z};`:"",pe=void 0!==F?`color: ${F}; fill: ${F}; -webkit-text-fill-color: ${F};`:"",ve=U&&"inherit"!==U?`font-family:${U}_${G.match(A)?G.match(A)[1]:""};`:G||"",ye=K?`font-size: ${K}px;`:"",fe="popin"!==n||void 0!==E&&!0!==E?"":[`#${this.widgetContainerId} .${this.overlayClassName} {`,`background-color: ${void 0!==x?x:"rgba(0, 0, 0, 0.6)"};`,"}"].join(""),we="number"==typeof O?O:16,be=we/2,$e=i||void 0!==B&&B?[`#${this.widgetContainerId} .${this.contentClassName} .${this.closeButtonClassName} {`,"position: absolute;",("out"===L?`bottom: calc(100% + ${be}px)`:`top: ${be}px`)+";",`right: ${be}px;`,"width: auto;","height: auto;","background: none;","border: none;","cursor: pointer;","outline: none;","padding: 0;","margin: 0;","line-height: 0;","z-index: 9;",""+("number"==typeof D?`border-radius: ${D}px;`:""),""+("number"==typeof W&&W>0?`border: ${W}px solid ${void 0!==_?_:"rgba(57, 57, 57, 1)"};`:""),""+("string"==typeof q?`background-color: ${q};`:""),"}",`#${this.widgetContainerId} .${this.contentClassName} .${this.closeButtonClassName} svg {`,"pointer-events: none;",`width: ${we}px;`,`height: ${we}px;`,""+("string"==typeof V?`fill: ${V};`:""),"}"].join(""):"",Se=w&&"string"==typeof $?[`#${this.widgetContainerId} .${this.contentClassName} > * h1, `,`#${this.widgetContainerId} .${this.contentClassName} > * h2, `,`#${this.widgetContainerId} .${this.contentClassName} > * h3, `,`#${this.widgetContainerId} .${this.contentClassName} > * h4, `,`#${this.widgetContainerId} .${this.contentClassName} > * h5, `,`#${this.widgetContainerId} .${this.contentClassName} > * h6 {`,`color: ${$}; fill: ${$}; -webkit-text-fill-color: ${$};`,void 0!==b?`text-align: ${b};`:"",S&&"inherit"!==S?`font-family:${S}_${T.match(A)?T.match(A)[1]:""};`:T||"",C?`font-size: ${C}px;`:"","}"].join(""):"";return Y.textContent=[`.${this.hideClassName} {`,"opacity: 0 !important;","pointer-events: none;","}",`#${this.widgetContainerId} .${this.contentClassName} {`,J,Z,X,ee,te,ne,oe,se,ie,"}",`#${this.widgetContainerId} .${this.contentClassName} p {`,ee,te,se,ie,"}",`#${this.widgetContainerId} .${this.contentClassName} > * {`,"display: block;","line-height: 1;","text-indent: unset;",le,se,ie,"}",`#${this.widgetContainerId} .${this.contentClassName} > * a, `,`#${this.widgetContainerId} .${this.contentClassName} > * button {`,"box-sizing: border-box;","display: inline-block;",de,ue,ge,me,pe,ve,ye,"}",`#${this.widgetContainerId} .${this.contentClassName} > * a *, `,`#${this.widgetContainerId} .${this.contentClassName} > * button * {`,pe,ve,ye,"}","@media screen and (max-width: 579px) {",`#${this.widgetContainerId} .${this.contentClassName} {`,ae,"}",`#${this.widgetContainerId} .${this.contentClassName} > * {`,he,"}","}",fe,$e,Se,`${t}`].join(""),Y}}const I=["top: 0;","top: 50%;","bottom: 0;"],P=["left: 0;","left: 50%;","right: 0;"],R=e=>1===e?"-50%":0,N=()=>{if(Array.isArray(DATA.popinPosition)){const{popinPosition:[{x:e,y:t}]}=DATA,s=`translate(${R(t)}, ${R(e)});`;return`${I[e]}${P[t]}transform: ${s}`}return"left: 50%;top: 50%;transform: translate(-50%, -50%);"},k=()=>"autoWidth"in DATA&&!0===DATA.autoWidth,B=()=>{if(k())return"width: auto;height: auto;";const{popinPercentWidth:e,popinPixelsWidth:t,widthUnit:s,autoHeight:i,popinPercentHeight:n,popinPixelsHeight:r,heightUnit:o}=DATA;return`width: ${"px"===s?t:e}${s};height: ${i?"auto":`${"px"===o?r:n}${o}`};`};class L extends x{constructor(){super(),this.stringStyles=this.getStyles(),this.styleElement=this.getStyleTag(this.stringStyles)}getStyles(){const{zindex:e,zindexCustom:t,overlay:s}=DATA;return[`#${this.widgetContainerId} {`,"position: fixed;","top: 0;","left: 0;","width: 100%;","height: 100%;",`z-index: ${"custom"===e?t:e};`,"opacity: 1;","transition: opacity 0.25s ease;","background: none;","pointer-events: "+(!1===s?"none":"all"),"}",`#${this.widgetContainerId} .${this.overlayClassName} {`,"position: absolute;","z-index: -1;","top: 0;","left: 0;","width: 100%;","height: 100%;","}",`#${this.widgetContainerId} .${this.contentClassName} {`,"position: absolute;",N(),B(),"pointer-events: all","}",`${k()?"":[`#${this.widgetContainerId} .${this.contentClassName} > div {`,"height: 100%;","overflow: auto;","box-sizing: border-box;","}"].join("")}`,"@media screen and (max-width: 579px) {",`#${this.widgetContainerId} .${this.contentClassName} {`,"max-width: 94vw;","}","}"].join("")}}class O extends x{constructor(){super(),this.position="string"==typeof DATA.layout&&"bannerTop"===DATA.layout?"top":"bottom",this.stringStyles=this.getStyles(),this.styleElement=this.getStyleTag(this.stringStyles)}getStyles(){const{zindex:e,zindexCustom:t}=DATA;return[`#${this.widgetContainerId} {`,"position: fixed;",`${this.position}: 0;`,"left: 0;","width: 100%;","height: auto;",`z-index: ${"custom"===e?t:e};`,"opacity: 1;","transition: opacity 0.25s ease;","background: none;","}",`#${this.widgetContainerId} .${this.contentClassName} {`,"position: relative;","}"].join("")}}class D extends x{constructor(){super(),this.stringStyles=this.getStyles(),this.styleElement=this.getStyleTag(this.stringStyles)}getStyles(){return[`#${this.widgetContainerId} {`,"width: auto;","height: auto;","margin: 0;","padding: 0;","background: none;","}",`#${this.widgetContainerId} .${this.contentClassName} {`,"position: relative;","}"].join("")}}function W(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var _=function(){function t(e){var s=e.parentContainer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.parentContainer=s,this.baseClassName="promotionalbanner_container",this.className="".concat(this.baseClassName,"_").concat(s.uniqueId),this.contentElement=this.getContentElement(),this.styleElement=this.getStyleElement()}var s,i,n;return s=t,(i=[{key:"insertIn",value:function(e,t){return document.head.insertAdjacentElement("beforeend",this.styleElement),e.insertAdjacentElement(t,this.contentElement),this}},{key:"addCloseEvent",value:function(t){var s=this;t&&t.addEventListener("click",(function(t){p(t),e()||s.parentContainer.recurrence.setClosingRecurrence(),s.parentContainer.hide(),setTimeout((function(){return s.parentContainer.remove()}),1e3)}),{capture:!0,passive:!1})}},{key:"addRedirectionEvent",value:function(t){var s=this;!e()&&t&&t.addEventListener("click",(function(){var t=DATA,i=t.autoHide,n=t.timeHide;i&&setTimeout((function(){return s.parentContainer.hide()}),1e3*n),e()||s.parentContainer.recurrence.setValidationRecurrence()}),{capture:!0,passive:!0})}},{key:"getButton",value:function(){var e=DATA,t=e.linkType,s=e.buttonText,i=e.redirectionUrl,n=e.openInNewTab,r=document.createElement("a");return r.className="popin_link",r.innerHTML="<span>".concat(s,"</span>"),"button"===t?(r.href=i,r.target=n?"_blank":"_self",this.addRedirectionEvent(r)):(r.href="#",r.dataset.abtastyActionnable="true",this.addCloseEvent(r)),r}},{key:"getContentElement",value:function(){var e=DATA,t=e.message,s=e.linkType,i=e.buttonText,n=e.redirectionUrl,r=e.openInNewTab,o="string"==typeof t&&t.length?"<p>".concat(t,"</p>"):"",a=document.createElement("string"==typeof s&&s.includes("widget")?"a":"div");if(a.className=this.className,"widget"===s?(a.href=n,r&&(a.target="_blank"),this.addRedirectionEvent(a)):"widgetClose"===s&&(a.href="#",a.dataset.abtastyActionnable="true",this.addCloseEvent(a)),a.innerHTML=o,[s,i].every((function(e){return"string"==typeof e}))&&s.includes("button")&&i.length){var c=this.getButton();a.appendChild(c)}return a}},{key:"getStyleElement",value:function(){var t=DATA,s=t.textColor,i=t.textAlign,n=t.fontName,r=t.fontStyle,o=t.fontSize,a="#".concat(this.parentContainer.widgetContainerId," .").concat(this.className),c=void 0!==s?"color: ".concat(s,";"):"",l=void 0!==i?"text-align: ".concat(i,";"):"",h=n&&"inherit"!==n?"font-family:".concat(n,";"):r||"",d=o?"font-size: ".concat(o,"px;"):"",u=document.createElement("style");return u.type="text/css",e()&&u.setAttribute("abtasty-script-added","true"),u.textContent=["".concat(a," > * {"),"display: inline-block;","vertical-align: middle;","}","".concat(a," p {"),"margin: 0;","white-space: pre-line;",c,l,h,d,"}","".concat(a," a {"),"padding: 6px 16px;","}","@media screen and (min-width: 1024px) {","".concat(a," p {"),"width: auto;","max-width: 70%;","}","".concat(a," a {"),"margin-left: 4%;","width: auto;","max-width: calc(30% - 4%);","}","}","@media screen and (max-width: 1023px) {","".concat(a," p {"),"width: 100%;","}","".concat(a," a {"),"margin-top: 14px;","}","}"].join(""),u}}])&&W(s.prototype,i),n&&W(s,n),t}();!function(){d("Widget launch");var e=(()=>{const{layout:e}=DATA;let t;switch(e){case"popin":t=new L;break;case"bannerTop":case"bannerBottom":t=new O;break;case"free":t=new D;break;default:t=new x}return t})(),t=e.domElement.querySelector(".".concat(e.contentClassName)),s=new _({parentContainer:e});e.children=s,s.insertIn(t,"beforeend"),e.init(!0).then((function(t){t.response&&e.show()}))}()}();\n'}},"@abtasty/virtual-click":{2.1:{code:'!function(){"use strict";!function(){try{return new e("test")}catch(e){}var e=function(e,t){t=t||{bubbles:!1,cancelable:!1};var n=document.createEvent("MouseEvent");return n.initMouseEvent(e,t.bubbles,t.cancelable,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n};e.prototype=Event.prototype,window.MouseEvent=e}();var e=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];e.unshift("[AB Tasty Widget] "+PACKAGE+":"),console.log.apply(console,e)};!function(t,n,o){var r,c=0;try{document.querySelector(t)}catch(n){var u=\'Selector "\'+t+\'" not valid.\';return e(u),"function"==typeof o&&o(u)}r=setTimeout(function(){clearInterval(c);var n="Can\'t find element \\""+t+\'".\';return e(n),"function"==typeof o&&o(n)},1e4),c=setInterval(function(){var e=document.querySelector(t);if(null!==e)return clearTimeout(r),clearInterval(c),"function"==typeof n&&n(e)},200)}(DATA.selector,function(e){var t,n;void 0!==window.ABTastyEditor||(t=e,n=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1}),t.dispatchEvent(n))})}();\n'}},"@abtasty/popin-simple":{1.2:{code:'!function(){"use strict";const e=()=>Object.prototype.hasOwnProperty.call(window,"ABTastyEditor"),t=()=>{let e;return window.ABTasty||window.ABTASTY_S?(window.ABTASTY_S&&window.ABTASTY_S.USER&&window.ABTASTY_S.USER.accountIdentifier&&window.ABTASTY_S.USER.accountIdentifier.length?e=window.ABTASTY_S.USER.accountIdentifier:window.ABTasty&&window.ABTasty.getAccountSettings&&"function"==typeof window.ABTasty.getAccountSettings?e=window.ABTasty.getAccountSettings().identifier:window.ABTasty&&window.ABTasty.accountSettings&&(e=window.ABTasty.accountSettings.identifier),e):e},s=()=>{const e=!!document.getElementById("ABTastyPreviewBar"),t=location.href.includes("ab_project=preview");return e||t},i=()=>!e()&&(s()||!!window.ABTasty.getTestsOnPage()[TEST_ID]),n=()=>window.ABTasty&&!0===window.ABTasty.consentReady,r="remove",o="rebuild",a="https://api-social-proof.abtasty.com/clients/",c=()=>{const{type:e}=DATA;return`${PACKAGE.replace("@abtasty/","")}${e?`_${e}`:""}`},l=()=>{const e=c();return`${e.charAt(0).toUpperCase()}${e.slice(1)}`.split("-").join(" ")},h=()=>`${PLUGIN_ID.split("-")[0]}_${TEST_ID}`,d=t=>{if((()=>{if(e()||s())return!1;const t=ABTasty.getTestsOnPage()[TEST_ID];return!!t&&Object.keys(t.targetings.qaParameters).length>0})()){const e=l();window.console.log(`%c${e} - QA Mode for campaign ${TEST_ID}\\n${t}`,"background-color: rgba(0, 127, 145, 1); color: rgba(247, 247, 247, 1)")}},u=e=>{const t={promise:null,resolve:null,reject:null,name:e};return t.promise=new Promise((e,s)=>{t.resolve=e,t.reject=s}),t},g=(e,t)=>{const s=()=>{try{return document.querySelector(e)}catch(e){return null}};let i=s();const n=[document.body||document.documentElement,{childList:!0,subtree:!0,attributes:!0}],r=()=>a.disconnect(),o=()=>a.observe(...n),a=new MutationObserver(()=>(i=s(),i&&!r()&&t(i)));return i?setTimeout(()=>t(i),0):o(),{selector:e,clear:r,observe:o}};function m(e,t){return t(e)||!e.parentElement?e:m(e.parentElement,t)}const p=t=>{e()||(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation())};class v{constructor(){this.targets=[],this.existingTargets=[],this.inViewportTargets=[],this.visibilityObserver=this.startVisibilityObserver(),this.mutationObserver=this.startMutationObserver(),this.mouseOverEvent=this.mouseOverHandler()}intersectionHandler(e){e.forEach(e=>{e.isIntersecting?(this.existingTargets.forEach(t=>{t.element.isSameNode(e.target)&&(this.inViewportTargets.push(t),this.mouseOverEvent.start())}),this.checkElements()):this.inViewportTargets=this.inViewportTargets.filter(t=>!t.element.isSameNode(e.target)||(this.mouseOverEvent.clear(),!1))})}startVisibilityObserver(){return new IntersectionObserver(this.intersectionHandler.bind(this),{root:null,rootMargin:"0px",threshold:0})}startMutationObserver(){const e=this.mutationObserver||new MutationObserver(this.checkElements.bind(this));return document.body&&e.observe(document.body,{attributes:!0,childList:!0,subtree:!0}),e}onMouseOver({target:e,path:t}){const s=this.inViewportTargets.find(({element:s,selector:i})=>{if(s.isSameNode(e))return!0;const n=[...e.querySelectorAll(i)];if(n.length&&n.includes(s))return!0;if(t.includes(s))return!0;const r=[...e.parentElement.children],o=r.findIndex(t=>t.isSameNode(e)),a=r.filter((e,t)=>t>o);if(a.length){if(a.includes(s))return!0;if(a.some(e=>[...e.querySelectorAll(i)].includes(s)))return!0}return!1});if(s&&this.isElementVisible(s.element)){const{selector:e,element:t,uniqueId:i}=s,n=this.targets.find(t=>t.selector===e&&t.uniqueId===i);n&&n.resolve(t),this.clear(e,i)}}mouseOverHandler(){const e=["mouseover",e=>setTimeout(()=>this.onMouseOver(e),50),!0];return{start:()=>document.addEventListener(...e),clear:()=>document.removeEventListener(...e)}}isElementVisible(e){return this.isElementTopmost(e)&&this.isElementOpaque(e)}isElementOpaque(e){return"HTML"===m(e,e=>"0"===window.getComputedStyle(e).opacity).nodeName}isElementTopmost(e){const t=e.getBoundingClientRect(),s=[[t.left,t.top],[t.right,t.top],[t.left,t.bottom],[t.right,t.bottom],[t.left+t.width/2,t.top],[t.left+t.width/2,t.bottom],[t.left,t.height/2],[t.right,t.height/2],[t.left+t.left/2,t.height/2]];let i=!1,n=0;for(;!i&&n<s.length;){const t=document.elementFromPoint(...s[n]);i=e===t||e.contains(t),n+=1}return i}checkElements(){this.targets.forEach(({selector:e,uniqueId:t})=>{const s=document.querySelector(e);s&&!this.existingTargets.find(s=>s.element.matches(e)&&s.uniqueId===t)&&(this.existingTargets.push({element:s,selector:e,uniqueId:t}),this.visibilityObserver.observe(s))}),this.existingTargets=this.existingTargets.filter(({selector:e,element:t})=>!!document.querySelector(e)||(t&&this.visibilityObserver.unobserve(t),!1)),this.inViewportTargets=this.inViewportTargets.filter(({selector:e,element:t,uniqueId:s})=>{if(t.matches(e)&&this.isElementVisible(t)){const i=this.targets.find(t=>t.selector===e&&t.uniqueId===s);return i&&i.resolve(t),this.clear(e,s),!1}return!0})}watch(e,t,s){this.targets.push({selector:e,resolve:t,uniqueId:s});const i=()=>{this.startMutationObserver(),this.checkElements()};document.body?i():g("body",i)}clear(e,t){[this.targets,this.existingTargets,this.inViewportTargets]=[this.targets,this.existingTargets,this.inViewportTargets].map(s=>s.filter(({selector:s,uniqueId:i})=>s!==e&&i!==t));const s=document.querySelector(e);s&&this.visibilityObserver.unobserve(s),0===this.targets.length&&this.mutationObserver.disconnect(),0===this.inViewportTargets.length&&this.mouseOverEvent.clear()}}class y{constructor({triggerEvent:e,triggerSelector:t,triggerDelay:s}){this.event=e,this.selector=t&&t.length?t:"body",this.delay=1e3*s,this.elementsSelectors=[],this.eventsListeners=[],this.timeouts=[],this.intervals=[],this.observers=[],this.promises=[],this.visibilityObservers=[],this.elementsWaiters=[]}async onElementVisible({promise:e,resolve:t}){const s=u(`${this.event}DomReady`);this.promises.push(s);const i=await this.onPageLoad(s),n=await async function(){let e;return e=await("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype||new Promise((e,t)=>{const s=window.document.getElementsByTagName("script")[0],i=window.document.createElement("script");i.src="https://polyfill.io/v3/polyfill.min.js?flags=gated&features=IntersectionObserver",s.parentNode.insertBefore(i,s),i.onload=e,i.onerror=t})),e}(),r=new v;if(this.visibilityObservers.push(r),n&&i){const e=h();r.watch(this.selector,t,e)}return e}onPageLoad({promise:e,resolve:t}){const s=()=>"complete"===document.readyState;if(!s()){const i=["readystatechange",({isTrusted:e})=>e&&s()&&t(!0),{passive:!0}];return this.eventsListeners.push(i),document.addEventListener(...i),e}return t(!0),e}onClick({promise:e,resolve:t}){const s=document.createElement("style");s.type="text/css",s.id=`Click_${h()}`,s.innerHTML=`${this.selector} {\\n\\t\\t\\tcursor: pointer !important;\\n\\t\\t\\tpointer-events: all !important;\\n\\t\\t}`,document.head.appendChild(s),this.elementsSelectors.push(`#${s.id}`);const i=e=>[...document.querySelectorAll(this.selector)].some(t=>t.isSameNode(e)||!!e.closest(this.selector)),n=["click",({isTrusted:e,target:s})=>e&&i(s)&&t(!0),{passive:!0,capture:!0}];return this.eventsListeners.push(n),document.addEventListener(...n),e}onExitIntent({promise:e,resolve:t}){const s=["mouseleave",({isTrusted:e,clientY:s})=>{e&&s<=0&&t(!0)},{passive:!0}],i=g("body",e=>{e.addEventListener(...s),this.eventsListeners.push([e,...s]),this.elementsWaiters=this.elementsWaiters.filter(e=>e!==i)});return this.elementsWaiters.push(i),e}onReengage({promise:e,resolve:t}){const s=this.delay;let i=s;const n=[({isTrusted:e})=>{e&&(i=s)},{passive:!0}];["click","mousemove","scroll","keypress"].forEach(e=>{document.addEventListener(e,...n),this.eventsListeners.push([e,...n])});const r=setInterval(()=>{i<=0?t(!0):i-=100},100);return this.intervals.push(r),e}onCustomTrigger({promise:e,resolve:t}){const{triggerEventCustomScript:s}=DATA;return new Function(`return new Promise(async resolve => {${s}})`)().then(e=>e&&t(!0)),e}getSocialProofPurchases({promise:e,resolve:s}){const i=window.ABTastyProductKey,n=t(),{viewInterval:r,triggerSocialProofMinPurchases:o,spNoTrim:c}=DATA;return i||(d("Not able to find ABTastyProductKey, impossible to call the API."),s(!1)),i&&n?fetch(`${a}${n}/metrics/i?key=${i}${c?"&noTrim=true":""}`).then(e=>e.ok&&e.json()).then(e=>(e=>{if(void 0===r||void 0===o)return!1;const t=void 0!==e[r]&&e[r]>=o;return t||d(`Widget will not be shown, product has been purchased ${e[r]} times while ${o} are required`),t})(e)&&s(`${e[r]}`)).catch(()=>d("Failed to fetch datas from server.")):s(!1),e}getSocialProofPageViews({promise:e,resolve:s}){const{viewInterval:i,triggerSocialProofMinPageViews:n,spNoTrim:r}=DATA,o=encodeURIComponent(r?window.location.href.replace(window.location.origin,""):`${window.location.pathname}`),c=t();return o&&c?fetch(`${a}${c}/metrics/pv?key=${o}${r?"&noTrim=true":""}`).then(e=>e.ok&&e.json()).then(e=>(e=>{if(void 0===i||void 0===n)return!1;const t=void 0!==e[i]&&e[i]>=n;return t||d(`Widget will not be shown, page has been seen ${e[i]} times while ${n} are required`),t})(e)&&s(`${e[i]}`)).catch(()=>d("Failed to fetch datas from server.")):s(!1),e}onConsent({promise:e,resolve:t}){if(!n()){const s=["abtasty_consentValid",()=>t(!0)];return this.eventsListeners.push(s),window.addEventListener(...s),e}return t(!0),e}clear(){if(this.elementsSelectors.length&&(this.elementsSelectors.forEach(e=>{document.querySelector(e)&&document.querySelector(e).remove()}),this.elementsSelectors=[]),this.eventsListeners.length&&(this.eventsListeners.forEach(e=>{const[t,...s]="string"==typeof e[0]?[document,...e]:e;t&&s.length>1&&t.removeEventListener(...s)}),this.eventsListeners=[]),this.timeouts.length&&(this.timeouts.forEach(e=>clearTimeout(e)),this.timeouts=[]),this.intervals.length&&(this.intervals.forEach(e=>clearInterval(e)),this.intervals=[]),this.observers.length&&(this.observers.forEach(e=>e.disconnect()),this.observers=[]),this.visibilityObservers.length){const e=h();this.visibilityObservers.forEach(t=>t.clear(this.selector,e)),this.visibilityObservers=[]}return this.promises.length&&(this.promises.forEach(e=>e.resolve(!1)),this.promises=[]),this.elementsWaiters.length&&(this.elementsWaiters.forEach(e=>e.clear()),this.elementsWaiters=[]),this}async isTriggered(){this.clear();const e=u(this.event);this.promises.push(e);const t={consent:()=>this.onConsent(e),direct:()=>!0,pageLoad:()=>this.onPageLoad(e),click:()=>this.onClick(e),exitIntent:()=>this.onExitIntent(e),reengage:()=>this.onReengage(e),elementVisible:()=>this.onElementVisible(e),script:()=>this.onCustomTrigger(e),socialProofPurchases:()=>this.getSocialProofPurchases(e),socialProofPageViews:()=>this.getSocialProofPageViews(e)},s=!Object.prototype.hasOwnProperty.call(t,this.event)||await t[this.event]();return this.clear(),"reengage"!==this.event&&this.delay?s&&await(async()=>{const e=u(`${this.event}Delay`);return this.promises.push(e),setTimeout(()=>{e.resolve(!0),this.clear()},this.delay),e.promise})():s}}const b="closing",w="validation",f="ABTastyWidgets",$="ABTastyWidgetsTemporary";class S{constructor({displayRecurrence:e,closingRecurrence:t,validationRecurrence:s},i){this.displayRecurrence=parseFloat(e),this.closingRecurrence=parseFloat(t),this.validationRecurrence=parseFloat(s),this.onSetCallback=i,this.widgetName=c(),this.uniqueId=h(),this.recurrenceKey=`${this.widgetName}_${this.uniqueId}`,this.isListeningStorageEvent=this.listenStorageEvent(),this.pendingRecurrence=!1,this.pendingRecurrenceValue={}}onStorage({key:e}){const t=localStorage.getItem($),s=sessionStorage.getItem(f);"ABTastyData"===e&&!t&&s&&localStorage.setItem($,s)}listenStorageEvent(){return this.isListeningStorageEvent||window.addEventListener("storage",this.onStorage.bind(this)),!0}getGivenRecurrenceStorageParsed(e){try{const t=e.getItem(f);return JSON.parse(t)}catch(t){return e.removeItem(f),!1}}getSessionRecurrenceStorageParsed(){return this.getGivenRecurrenceStorageParsed(window.sessionStorage)}getLocalRecurrenceStorageParsed(){return this.getGivenRecurrenceStorageParsed(window.localStorage)}removeGivenStorage(e,t){const{[this.recurrenceKey]:s,...i}=t;return Object.entries(i).length?(e.setItem(f,JSON.stringify(i)),i):(e.removeItem(f),!1)}removeSessionRecurrenceStorage(){const e=this.getSessionRecurrenceStorageParsed();return!!e&&this.removeGivenStorage(window.sessionStorage,e)}removeLocalRecurrenceStorage(){const e=this.getLocalRecurrenceStorageParsed();return!!e&&this.removeGivenStorage(window.localStorage,e)}getSessionRecurrence(){const e=this.getSessionRecurrenceStorageParsed();return!!e&&e[this.recurrenceKey]}getLocalRecurrence(){const e=this.getLocalRecurrenceStorageParsed();return!!e&&e[this.recurrenceKey]}getCurrentRecurrence(){if(this.pendingRecurrence)return this.pendingRecurrenceValue;const e=this.getSessionRecurrence(),t=this.getLocalRecurrence();return e||t||{type:!1}}isOver(){const e=localStorage.getItem($),t=!(!e||!e.includes(this.recurrenceKey))||this.getSessionRecurrence();e&&(sessionStorage.setItem(f,e),localStorage.removeItem($));const s=this.getLocalRecurrence(),i=(s?parseFloat(s.stamp):0)<(new Date).getTime();return i&&this.removeLocalRecurrenceStorage(),!this.pendingRecurrence&&i&&!this.getLocalRecurrence()&&!t}setRecurrence(e,t){0!==e&&(window.removeEventListener("storage",this.onStorage.bind(this)),this.isListeningStorageEvent=!1);const i=this.getTypeOfStorage(e);if(s()||!i&&"object"!=typeof i)return!1;const{storageString:r,storageMethod:o}=i,a=this.getStamp(e),c={type:t,stamp:a},{type:l}=this.getCurrentRecurrence(),h=async()=>{if(!n()){this.pendingRecurrence=!0,this.pendingRecurrenceValue=c;const e=new y({triggerEvent:"consent"});await e.isTriggered(),this.pendingRecurrence=!1,this.pendingRecurrenceValue={}}const e=this.getSessionRecurrence(),t=this.getLocalRecurrence();let s;"session"===r?e?s=this.removeSessionRecurrenceStorage():(this.removeLocalRecurrenceStorage(),s=this.getSessionRecurrenceStorageParsed()):"local"===r&&(t?s=this.removeLocalRecurrenceStorage():(this.removeSessionRecurrenceStorage(),s=this.getLocalRecurrenceStorageParsed()));const i=s?{[this.recurrenceKey]:c,...s}:{[this.recurrenceKey]:c};o.setItem(f,JSON.stringify(i)),this.onSetCallback&&"function"==typeof this.onSetCallback&&this.onSetCallback()};if(!o)return!1;if(l&&t!==w)if(t===b&&l!==w)h();else{if("display"!==t||l===w||l===b)return!1;h()}else h();return a}setDisplayRecurrence(){this.setRecurrence(this.displayRecurrence,"display")}setClosingRecurrence(){this.setRecurrence(this.closingRecurrence,"closing")}setValidationRecurrence(){this.setRecurrence(this.validationRecurrence,"validation")}getStamp(e){return(new Date).getTime()+864e5*e}getTypeOfStorage(e){return!(isNaN(e)||e<0||0!==e&&!e)&&(e>0?{storageString:"local",storageMethod:window.localStorage}:0===e&&{storageString:"session",storageMethod:window.sessionStorage})}}class T{constructor(e,t,s){this.recurrence=e,this.isWidgetApplied=t,this.callback=s,this.observer=new MutationObserver(this.observerHandler.bind(this)),this.eventListenerParams=["abtasty_resetActionTracking",this.eventHandler.bind(this),{passive:!0}],this.elementsWaiters=[]}recurrenceIsDone(){return!this.recurrence||this.recurrence.isOver()}decisionHandler(e){const t=i(),{type:s}=this.recurrence?this.recurrence.getCurrentRecurrence():{type:!1};let n;const a=this.isWidgetApplied(),c=(()=>{const t=this.recurrenceIsDone();return e&&"display"===s||t})();return!a&&t&&c?n=o:(a&&(!t||!c)||!a&&!t)&&(n=r),"string"==typeof n&&(this.clearWatcher(),this.callback(n,e),this.watch()),this}eventHandler(){let e=i();return[250,500].forEach(t=>{setTimeout(()=>{const s=i();return 500===t&&s===e?this:(e=s,this.decisionHandler(!1))},t)}),this}observerHandler(e){return e.some(e=>["removedNodes","addedNodes"].some(t=>e[t]&&e[t].length))?this.decisionHandler(!0):this}watch(){if(e())return this;this.clearWatcher(),document.addEventListener(...this.eventListenerParams);const t=()=>{const e=[document.body,{childList:!0,subtree:!0}];this.observer.observe(...e)};return document.body?t():(()=>{const e=g("body",()=>{t(),this.elementsWaiters=this.elementsWaiters.filter(t=>t!==e)});this.elementsWaiters.push(e)})(),this}clearWatcher(){return document.removeEventListener(...this.eventListenerParams),this.elementsWaiters.length&&(this.elementsWaiters.forEach(e=>e.clear()),this.elementsWaiters=[]),this.observer.disconnect(),this}}const C=/.+\\/([^.]+)\\.(otf|ttf)$/,E=["top: 0;","top: 50%;","bottom: 0;"],A=["left: 0;","left: 50%;","right: 0;"],x=e=>1===e?"-50%":0,I=()=>{if(Array.isArray(DATA.popinPosition)){const{popinPosition:[{x:e,y:t}]}=DATA,s=`translate(${x(t)}, ${x(e)});`;return`${E[e]}${A[t]}transform: ${s}`}return"left: 50%;top: 50%;transform: translate(-50%, -50%);"},P=()=>"autoWidth"in DATA&&!0===DATA.autoWidth,R=()=>{if(P())return"width: auto;height: auto;";const{popinPercentWidth:e,popinPixelsWidth:t,widthUnit:s,autoHeight:i,popinPercentHeight:n,popinPixelsHeight:r,heightUnit:o}=DATA;return`width: ${"px"===s?t:e}${s};height: ${i?"auto":`${"px"===o?r:n}${o}`};`};var N,B,k;B=new(function(){function t(e){var s=e.parentContainer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.parentContainer=s,this.className="popinsimple_container_".concat(s.uniqueId),this.contentElement=this.getContentElement(),this.styleElement=this.getStyleElement()}var s;return(s=[{key:"addCloseEvent",value:function(t){var s=this;t&&t.addEventListener("click",function(t){p(t),e()||s.parentContainer.recurrence.setClosingRecurrence(),s.parentContainer.hide(),setTimeout(function(){return s.parentContainer.remove()},1e3)},{capture:!0,passive:!1})}},{key:"addRedirectionEvent",value:function(t){var s=this;!e()&&t&&t.addEventListener("click",function(){var t=DATA,i=t.autoHide,n=t.timeHide;i&&setTimeout(function(){return s.parentContainer.hide()},1e3*n),e()||s.parentContainer.recurrence.setValidationRecurrence()},{capture:!0,passive:!0})}},{key:"getButton",value:function(){var e=DATA,t=e.linkType,s=e.buttonText,i=e.redirectionUrl,n=e.openInNewTab,r=document.createElement("a");return r.className="popin_link",r.innerHTML="<span>".concat(s,"</span>"),"button"===t?(r.href=i,r.target=n?"_blank":"_self",this.addRedirectionEvent(r)):(r.href="#",r.dataset.abtastyActionnable="true",this.addCloseEvent(r)),r}},{key:"insertIn",value:function(e,t){return document.head.insertAdjacentElement("beforeend",this.styleElement),e.insertAdjacentElement(t,this.contentElement),e}},{key:"getContentElement",value:function(){var e=DATA,t=e.linkType,s=e.buttonText,i=e.redirectionUrl,n=e.isTitle,r=e.title,o=e.textContent,a=e.openInNewTab,c=document.createElement(t&&t.includes("widget")?"a":"div");c.className=this.className,"widget"===t?(c.href=i,c.target=a?"_blank":"_self",this.addRedirectionEvent(c)):"widgetClose"===t&&(c.href="#",c.dataset.abtastyActionnable="true",this.addCloseEvent(c));var l=document.createElement("div");if(l.className="popin_text_container",l.innerHTML="".concat(n?\'<h2 class="popin_simple_title">\'.concat(r,"</h2>"):"",\'<p class="popin_simple_text">\').concat(o,"</p>"),[t,s].every(function(e){return"string"==typeof e})&&t.includes("button")&&s.length){var h=this.getButton(),d=document.createElement("div");d.className="buttons_container",d.appendChild(h),l.appendChild(d)}return c.appendChild(l),c}},{key:"getStyleElement",value:function(){var t=document.createElement("style");t.type="text/css",e()&&t.setAttribute("abtasty-script-added","true");var s=DATA,i=s.linkType,n=s.buttonsAlign,r="#".concat(this.parentContainer.widgetContainerId," .").concat(this.parentContainer.contentClassName),o=void 0!==n&&"fill"!==n?"text-align: ".concat(n,";"):"",a=["".concat(r," .buttons_container {"),"display: inline-block;","width: 100%;",o,"}","".concat(r," .popin_link {"),"margin: 25px 0 0 0;","padding: 10px 22px;","max-width: 100%;","width: ".concat("fill"===n?"100%":"auto",";"),"text-align: center;","}"].join(""),c=["".concat(r," .popin_simple_title {"),"margin: 0 0 25px 0;","display: inline-block;","width: 100%;","}","".concat(r," .popin_text_container {"),"line-height: 1;","white-space: pre-line;","display: inline-block;","vertical-align: middle;","width: 100%;","}","".concat(r," .popin_text_container p {"),"margin: 0;","}"];return i&&i.includes("button")&&c.push(a),t.textContent=c.join(""),t}}])&&function(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,s),t}())({parentContainer:N=new class extends class{constructor(){this.children=void 0,this.uniqueId=h(),this.widgetName=c(),this.prettyName=l(),this.recurrenceParams=(()=>{const{displayRecurrence:t,closingRecurrence:s,validationRecurrence:i}=DATA;if(e()||!t&&!s&&!i)return!1;const n={everytime:()=>-1,session:()=>0,once:()=>395,day:e=>DATA[`${e}_day`],week:e=>7*DATA[`${e}_week`],month:e=>30.5*DATA[`${e}_month`]},r={};return t&&(r.displayRecurrence=n[t]("displayRecurrence")),s&&(r.closingRecurrence=n[s]("closingRecurrence")),i&&(r.validationRecurrence=n[i]("validationRecurrence")),r})(),this.triggerParams=(()=>{let{triggerEvent:t}=DATA;const{triggerEventClick:s,triggerEventReengageDelay:i,socialProofContentType:n,triggerEventElementVisible:r,triggerEventDelay:o}=DATA;if(e()||!t&&!n)return!1;const a={click:()=>s,elementVisible:()=>r},c=Object.prototype.hasOwnProperty.call(a,t)?a[t]():"body",l="reengage"===t?i:o;return n&&(t=1===n?"socialProofPurchases":"socialProofPageViews"),{triggerEvent:t,triggerSelector:c,triggerDelay:l}})(),this.recurrence=!!this.recurrenceParams&&new S(this.recurrenceParams,this.clearGivenClearables.bind(this)),this.trigger=!!this.triggerParams&&new y(this.triggerParams),this.pageWatcher=new T(this.recurrence,this.isWidgetApplied.bind(this),this.onPageChange.bind(this)),this.hasOncePerPageTrigger=(()=>{const{isOncePerPageTrigger:e,triggerEvent:t}=DATA;return!t||!(!e||!["click","script"].includes(t))||["pageLoad","direct","reengage","socialProofPurchases","socialProofPageViews","elementVisible"].some(e=>e===t)})(),this.basicClassName=`ab_widget_container_${this.widgetName}`,this.widgetContainerId=`${this.basicClassName}_${this.uniqueId}`,this.contentClassName=`${this.basicClassName}_content`,this.overlayClassName=`${this.basicClassName}_overlay`,this.closeButtonClassName=`${this.basicClassName}_close_button`,this.hideClassName=`ab_hide_${this.uniqueId}`,this.domElement=this.getDom(),this.hasBeenShown=!1,this.closedByUser=!1,this.eventsListeners=[],this.timeouts=[],this.intervals=[],this.observers=[],this.promises=[],this.elementsWaiters=[]}clearGivenClearables(){this.eventsListeners.length&&(this.eventsListeners.forEach(e=>document.removeEventListener(...e)),this.eventsListeners=[]),this.timeouts.length&&(this.timeouts.forEach(e=>clearTimeout(e)),this.timeouts=[]),this.intervals.length&&(this.intervals.forEach(e=>clearInterval(e)),this.intervals=[]),this.observers.length&&(this.observers.forEach(e=>e.disconnect()),this.observers=[]),this.promises.length&&(this.promises.forEach(e=>e.resolve(!1)),this.promises=[]),this.elementsWaiters.length&&(this.elementsWaiters.forEach(e=>e.clear()),this.elementsWaiters=[])}isWidgetApplied(){return this.domElement&&this.domElement.isConnected}removeOldDomElement(){const e=document.getElementById(this.widgetContainerId);return e&&e.remove(),this}async insert(){if(this.isWidgetApplied())return!1;const e=new Promise(e=>{const t=g("head",t=>{this.elementsWaiters=this.elementsWaiters.filter(({selector:e})=>"head"!==e),e(t.appendChild(this.styleElement))});this.elementsWaiters.push(t)}),t=new Promise(e=>{const{elementReferrer:t="body",referrerInsertType:s="beforeend"}="free"===DATA.layout?DATA:{},i=g(t,i=>{this.elementsWaiters=this.elementsWaiters.filter(e=>e.selector!==t),this.removeOldDomElement(),e(i.insertAdjacentElement(s,this.domElement))});this.elementsWaiters.push(i)});return Promise.all([t,e]).then(()=>this)}remove(){return this.pageWatcher.clearWatcher(),[this.domElement,this.styleElement].forEach(e=>e&&e.isConnected&&e.remove()),this.hasOncePerPageTrigger?this.pageWatcher.watch():e()||this.init().then(({response:e})=>e?this.show():this),this}show(){return e()||this.hasBeenShown&&this.hasOncePerPageTrigger||window.ABTastyEvent(`${this.prettyName} displayed`,null,TEST_ID),this.closedByUser=!1,this.domElement.classList.remove(this.hideClassName),this.recurrence&&this.recurrence.setDisplayRecurrence(),this.hasBeenShown=!0,this.pageWatcher.watch(),this}hide(){return!e()&&this.hasBeenShown&&window.ABTastyEvent(`${this.prettyName} closed`,null,TEST_ID),this.closedByUser=!0,this.domElement.classList.add(this.hideClassName),this}async init(t){const s=e(),n=i(),r=this.trigger&&this.trigger.promises.length,o=!this.recurrence||this.recurrence.isOver();if(!s&&!n||r||!o)return!1;this.pageWatcher.watch();const a=s||!this.trigger||this.trigger&&await this.trigger.isTriggered();return!!a&&(await this.insert(),this.addCloseEvent(),s||t||this.hasBeenShown||void 0===this.children||"function"!=typeof this.children.refreshContent||this.children.refreshContent(a),{container:this,response:a})}onPageChange(e,t){const s=()=>this.init().then(({response:e})=>e&&this.show());t||(this.hasBeenShown=!1);const i=this.isWidgetApplied(),n={[r]:()=>{i?this.remove():(this.trigger&&this.trigger.clear(),this.pageWatcher.watch())},[o]:()=>{this.hasBeenShown?this.closedByUser?this.pageWatcher.watch():i||this.insert().then(e=>e.show()).catch(this.pageWatcher.watch):s()}};"function"==typeof n[e]&&n[e]()}addCloseEvent(...t){const{closeButton:s,overlay:i,overlayClickable:n,layout:r}=DATA,o=[];if(void 0!==i&&!0!==i||!0!==n||"popin"!==r||o.push(`.${this.overlayClassName}`),void 0!==s&&s&&o.push(`.${this.closeButtonClassName}`),!o.length)return this;const a=this.domElement.querySelectorAll(o.join(", "));return a.length?(t.push(...a),t.forEach(t=>{e()&&(t.dataset.abtastyActionnable="true"),t.addEventListener("click",e=>{p(e),this.recurrence&&this.recurrence.setClosingRecurrence(),this.hide(),setTimeout(()=>this.remove(),1e3)},{once:!0,capture:!0})}),this):this}getDom(){const{closeButton:e,layout:t,overlay:s=!0}=DATA,i=document.createElement("div");return i.className=`${this.basicClassName} ${this.hideClassName}`,i.id=this.widgetContainerId,i.innerHTML=`\\n\\t\\t\\t${"popin"===t&&!0===s?`<div class="${this.overlayClassName}"></div>`:""}\\n\\t\\t\\t<div class="${this.contentClassName}">\\n\\t\\t\\t${e?`<button class="${this.closeButtonClassName}"><svg viewBox="0 0 16 16">\\n\\t<defs><path id="prefix__a" d="M12 4.991L11.009 4 8 7.009 4.991 4 4 4.991 7.009 8 4 11.009 4.991 12 8 8.991 11.009 12 12 11.009 8.991 8z"></path></defs>\\n\\t<g><use xlink:href="#prefix__a"></use></g>\\n</svg></button>`:""}\\n\\t\\t\\t</div>`,i}loadFont(e,t){if(!e||"inherit"===e)return;const s=document.createElement("style"),i=t.match(C)?t.match(C)[1]:"";s.innerHTML=`@font-face { font-family: \'${e}_${i}\';  src: url(\'${t}\');}`,document.head.appendChild(s)}getStyleTag(t="",s=DATA){const{noStyles:i,layout:n}=s,{backgroundColor:r,isBackgroundImage:o,backgroundImage:a,backgroundSize:c,backgroundPosition:l,backgroundRepeat:h,borderColor:d,borderRadius:u,borderWidth:g,textColor:m,textAlign:p,fontName:v,fontStyle:y,fontSize:b,isTitle:w,titleTextAlign:f,titleTextColor:$,titleFontName:S,titleFontStyle:T,titleFontSize:E,overlay:A,overlayColor:x,dropShadow:I,dropShadowColor:P,dropShadowBlur:R,containerMargin:N,containerPadding:B,closeButton:k,closeButtonPosition:L,closeButtonSize:_,closeButtonBorderRadius:O,closeButtonBorderWidth:W,closeButtonBorderColor:D,closeButtonColor:V,closeButtonBackgroundColor:q,buttonsBorderWidth:j,buttonsBorderColor:M,buttonsBorderRadius:H,buttonsBackgroundColor:F,buttonsTextColor:z,buttonsFontName:U,buttonsFontStyle:G,buttonsFontSize:K}=i?{}:s,Y=document.createElement("style");Y.type="text/css",e()&&Y.setAttribute("abtasty-script-added","true"),this.loadFont(v,y),this.loadFont(S,T),this.loadFont(U,G);const J=`background: ${["string"==typeof r?r:"rgba(255, 255, 255, 1)",o&&"string"==typeof a&&a.length?`url(${a})`:"",o&&"string"==typeof l&&"100% 100%"!==c?l:"0 0",o&&"string"==typeof c?`/ ${c}`:"/ auto",o&&h&&!["cover","100% 100%"].includes(c)?"repeat":"no-repeat"].join(" ").trim()};`,Q="number"==typeof g&&g>0,X=`border: ${[Q?`${g}px`:"unset",Q?"solid":"",Q&&"string"==typeof d&&d.length?d:""].join(" ").trim()};`,Z=void 0!==u?`border-radius: ${u}px;`:"",ee=void 0!==m?`color: ${m}; fill: ${m}; -webkit-text-fill-color: ${m};`:"",te=void 0!==p?`text-align: ${p};`:"",se=v&&"inherit"!==v?`font-family:${v}_${y.match(C)?y.match(C)[1]:""};`:y||"",ie=b?`font-size: ${b}px;`:"",ne=void 0!==I&&I?`box-shadow: 0 5px ${R}px 0 ${P};`:"",re=N instanceof Array&&1===N.length&&N[0],oe=re?`margin: ${re.top}px ${re.right}px ${re.bottom}px ${re.left}px;`:"",ae=re?`margin: calc(${re.top}px * 0.5) calc(${re.right}px * 0.5) calc(${re.bottom}px * 0.5) calc(${re.left}px * 0.5);`:"",ce=B instanceof Array&&1===B.length&&B[0],le=ce?`padding: ${ce.top}px ${ce.right}px ${ce.bottom}px ${ce.left}px;`:"",he=ce?`padding: calc(${ce.top}px * 0.5) calc(${ce.right}px * 0.5) calc(${ce.bottom}px * 0.5) calc(${ce.left}px * 0.5);`:"",de=void 0!==j&&j?`border-width: ${j}px; border-style: solid;`:"",ue=[M,j].every(e=>void 0!==e)&&j?`border-color: ${M};`:"",ge=void 0!==H?`border-radius: ${H}px;`:"",me=void 0!==F?`background-color: ${F};`:"",pe=void 0!==z?`color: ${z}; fill: ${z}; -webkit-text-fill-color: ${z};`:"",ve=U&&"inherit"!==U?`font-family:${U}_${G.match(C)?G.match(C)[1]:""};`:G||"",ye=K?`font-size: ${K}px;`:"",be="popin"!==n||void 0!==A&&!0!==A?"":[`#${this.widgetContainerId} .${this.overlayClassName} {`,`background-color: ${void 0!==x?x:"rgba(0, 0, 0, 0.6)"};`,"}"].join(""),we="number"==typeof _?_:16,fe=we/2,$e=i||void 0!==k&&k?[`#${this.widgetContainerId} .${this.contentClassName} .${this.closeButtonClassName} {`,"position: absolute;",("out"===L?`bottom: calc(100% + ${fe}px)`:`top: ${fe}px`)+";",`right: ${fe}px;`,"width: auto;","height: auto;","background: none;","border: none;","cursor: pointer;","outline: none;","padding: 0;","margin: 0;","line-height: 0;","z-index: 9;","number"==typeof O?`border-radius: ${O}px;`:"","number"==typeof W&&W>0?`border: ${W}px solid ${void 0!==D?D:"rgba(57, 57, 57, 1)"};`:"","string"==typeof q?`background-color: ${q};`:"","}",`#${this.widgetContainerId} .${this.contentClassName} .${this.closeButtonClassName} svg {`,"pointer-events: none;",`width: ${we}px;`,`height: ${we}px;`,"string"==typeof V?`fill: ${V};`:"","}"].join(""):"",Se=w&&"string"==typeof $?[`#${this.widgetContainerId} .${this.contentClassName} > * h1, `,`#${this.widgetContainerId} .${this.contentClassName} > * h2, `,`#${this.widgetContainerId} .${this.contentClassName} > * h3, `,`#${this.widgetContainerId} .${this.contentClassName} > * h4, `,`#${this.widgetContainerId} .${this.contentClassName} > * h5, `,`#${this.widgetContainerId} .${this.contentClassName} > * h6 {`,`color: ${$}; fill: ${$}; -webkit-text-fill-color: ${$};`,void 0!==f?`text-align: ${f};`:"",S&&"inherit"!==S?`font-family:${S}_${T.match(C)?T.match(C)[1]:""};`:T||"",E?`font-size: ${E}px;`:"","}"].join(""):"";return Y.textContent=[`.${this.hideClassName} {`,"opacity: 0 !important;","pointer-events: none;","}",`#${this.widgetContainerId} .${this.contentClassName} {`,J,Z,X,ee,te,ne,oe,se,ie,"}",`#${this.widgetContainerId} .${this.contentClassName} p {`,ee,te,se,ie,"}",`#${this.widgetContainerId} .${this.contentClassName} > * {`,"display: block;","line-height: 1;","text-indent: unset;",le,se,ie,"}",`#${this.widgetContainerId} .${this.contentClassName} > * a, `,`#${this.widgetContainerId} .${this.contentClassName} > * button {`,"box-sizing: border-box;","display: inline-block;",de,ue,ge,me,pe,ve,ye,"}",`#${this.widgetContainerId} .${this.contentClassName} > * a *, `,`#${this.widgetContainerId} .${this.contentClassName} > * button * {`,pe,ve,ye,"}","@media screen and (max-width: 579px) {",`#${this.widgetContainerId} .${this.contentClassName} {`,ae,"}",`#${this.widgetContainerId} .${this.contentClassName} > * {`,he,"}","}",be,$e,Se,`${t}`].join(""),Y}}{constructor(){super(),this.stringStyles=this.getStyles(),this.styleElement=this.getStyleTag(this.stringStyles)}getStyles(){const{zindex:e,zindexCustom:t,overlay:s}=DATA;return[`#${this.widgetContainerId} {`,"position: fixed;","top: 0;","left: 0;","width: 100%;","height: 100%;",`z-index: ${"custom"===e?t:e};`,"opacity: 1;","transition: opacity 0.25s ease;","background: none;","pointer-events: "+(!1===s?"none":"all"),"}",`#${this.widgetContainerId} .${this.overlayClassName} {`,"position: absolute;","z-index: -1;","top: 0;","left: 0;","width: 100%;","height: 100%;","}",`#${this.widgetContainerId} .${this.contentClassName} {`,"position: absolute;",I(),R(),"pointer-events: all","}",`${P()?"":[`#${this.widgetContainerId} .${this.contentClassName} > div {`,"height: 100%;","overflow: auto;","box-sizing: border-box;","}"].join("")}`,"@media screen and (max-width: 579px) {",`#${this.widgetContainerId} .${this.contentClassName} {`,"max-width: 94vw;","}","}"].join("")}}}),k=N.domElement.querySelector(".".concat(N.contentClassName)),N.children=B,B.insertIn(k,"beforeend"),N.init().then(function(e){e.response&&N.show()})}();\n'}}},obsoletes:[752130,761212,782450,784805,797107]},o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,e=t.accountSettings,n=e.pack,r=e.quota;return 0===n.indexOf("quota")&&r<=0},a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,e=t.accountSettings;return 1===Number(e.runAsThread)},s=function(){return i},c=function(t){return s().tests[t]},l=function(){return s().accountSettings},u=function(){return s().nirror||[]},d=function(){return l().identifier},p=function(){return l().id},m=function(){return s().crossDomainSettings||[]},h=function(){return s().globalCodeFragments},f=function(){return r.lT.getGlobalCampaignsInfos().needGeolocFetch.length>0},g=function(){return"cookies"===l().storageMode}},6491:(t,e,n)=>{"use strict";n.r(e),n.d(e,{codeTargeting:()=>l,checkCodeConditions:()=>p});var r=n(5861),i=n(7757),o=n.n(i),a=n(1042),s=n(6044),c=n(83);function l(t,e){return u.apply(this,arguments)}function u(){return(u=(0,r.Z)(o().mark((function t(e,n){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.conditions,t.abrupt("return",p(r,n));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(t,e){var n="Targeting error (code)";(0,s.Tb)(new Error(n)),a.error(n,e)}function p(t,e){return m.apply(this,arguments)}function m(){return m=(0,r.Z)(o().mark((function t(e,n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.all(e.map(function(){var t=(0,r.Z)(o().mark((function t(i){var a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=i.value,!i.isAsync){t.next=5;break}return t.abrupt("return",new Promise(function(){var t=(0,r.Z)(o().mark((function t(e,r){var i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={resolve:e,reject:r},t.next=3,!!(0,c.w)(a,n,void 0,void 0,i);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()).then((function(t){return t})).catch((function(t){return d(0,e),!1})));case 5:return t.prev=5,t.abrupt("return",(0,c.w)(a,n));case 9:return t.prev=9,t.t0=t.catch(5),d(t.t0,e),t.abrupt("return",Promise.resolve(!1));case 13:case"end":return t.stop()}}),t,null,[[5,9]])})));return function(e){return t.apply(this,arguments)}}())).then((function(t){return t.every((function(t){return!!t}))})));case 1:case"end":return t.stop()}}),t)}))),m.apply(this,arguments)}},1943:(t,e,n)=>{"use strict";n.d(e,{xz:()=>r,DC:()=>i,o1:()=>o,BH:()=>a});var r=1,i=10,o=11,a=40},9496:(t,e,n)=>{"use strict";n.r(e),n.d(e,{cookieTargeting:()=>s});var r=n(1918),i=n(1042),o=n(6044);function a(t){var e=t.name,n=t.value,i=t.include,o=r.get(e),a=!1;return(o||""===o)&&(a=!0,null!=n&&(a=null!==o.match(new RegExp(n,"i")))),i?a:!a}function s(t){var e=t.operator,n=t.conditions;try{return"and"===e?n.every(a):n.some(a)}catch(t){var r="Targeting error (cookie)";return(0,o.Tb)(new Error(r)),i.error(r,n),!1}}},5136:(t,e,n)=>{"use strict";n.r(e),n.d(e,{EULERIAN_DMP:()=>r,TAGCOMMANDER_DMP:()=>i,BLUEKAI_DMP:()=>o,YSANCE_DMP:()=>a,ADVALO_DMP:()=>s,KRUX_DMP:()=>c,WEBORAMA_DMP:()=>l,ADOBE_DMP:()=>u,DEVICE:()=>d,IP:()=>p,GEOLOCATION:()=>m,COOKIE:()=>h,BROWSER_LANGUAGE:()=>f,LANDING_PAGE:()=>g,BROWSER:()=>v,RETURNING_VISITOR:()=>b,SOURCE_TYPE:()=>y,PREVIOUS_PAGE:()=>w,SCREEN_SIZE:()=>_,JS_VARIABLE:()=>S,CAMPAIGN_EXPOSITION:()=>T,SOURCE:()=>k,NUMBER_PAGES_VIEWED:()=>C,SAME_DAY_VISIT:()=>x,ADBLOCK:()=>E,SESSION_NUMBER:()=>A,WEATHER:()=>I,DAYS_SINCE_LAST_SESSION:()=>$,DAYS_SINCE_FIRST_SESSION:()=>P,ECOMMERCE_VARIABLE:()=>O,URL_PARAMETER:()=>N,CODE:()=>B,CUSTOM_VARIABLE:()=>D,ACTION_TRACKING:()=>R,SELECTOR:()=>L,DATALAYER:()=>M,LAST_PURCHASE:()=>W,PURCHASE_FREQUENCY:()=>j,KEYWORD:()=>V,TEALIUM_DMP:()=>H,ENGAGEMENT_LEVEL:()=>F,CONTENT_INTEREST:()=>U,PAGE_VIEW:()=>z,PAGE_INTEREST:()=>q,PAYMENT_METHOD:()=>G,DELIVERY_METHOD:()=>Z,AMOUNT:()=>K,COUPON:()=>Y,PRODUCT_SKU:()=>J,PRODUCT_CATEGORY:()=>Q});var r=1,i=2,o=4,a=5,s=6,c=7,l=8,u=10,d=17,p=18,m=19,h=20,f=21,g=22,v=23,b=24,y=25,w=26,_=27,S=28,T=29,k=30,C=31,x=32,E=33,A=34,I=35,$=36,P=37,O=38,N=39,B=40,D=41,R=42,L=43,M=44,W=45,j=46,V=47,H=48,F=49,U=50,z=51,q=52,G=1,Z=2,K=3,Y=4,J=5,Q=6},6845:(t,e,n)=>{"use strict";n.d(e,{xj:()=>g,fJ:()=>v,dT:()=>b,dN:()=>y,Uo:()=>w,ZN:()=>_});var r=n(5861),i=n(7757),o=n.n(i),a=n(1042),s=n(5136),c=n(8049),l=n(5536),u=n(1753),d={},p=n(9496).cookieTargeting;d[s.COOKIE]=function(t){return p};var m=n(6491).codeTargeting;d[s.CODE]=function(t){return m};var h=n(9965).pageViewTargeting;d[s.PAGE_VIEW]=function(t){return h};var f=function(t){return!0===t};function g(t){return c.lT.getGlobalCampaignsInfos().needDCInfosFetch.indexOf(t)>-1}function v(t){return c.lT.getGlobalCampaignsInfos().needIPFetch.indexOf(t)>-1}function b(t){return c.lT.getGlobalCampaignsInfos().needGeolocFetch.indexOf(t)>-1}function y(t){return c.lT.getGlobalCampaignsInfos().needUAParserFetch.indexOf(t)>-1}function w(t){return c.lT.getGlobalCampaignsInfos().needAdBlockDetection.indexOf(t)>-1}var _=function(t){return function(){var e=(0,r.Z)(o().mark((function e(n,i){var s,p,m;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==i&&null!=i.targeting_groups){e.next=2;break}return e.abrupt("return",!0);case 2:return s=i.is_segment?l.GJ:l.RQ,e.next=5,Promise.all(i.targeting_groups.map(function(){var e=(0,r.Z)(o().mark((function e(i){var l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(i.targetings.map(function(){var e=(0,r.Z)(o().mark((function e(r){var l,p,m,h,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=r.targeting_type,p=r.success,m=!(0,u.BH)(l)||void 0===p,h=void 0===p||p,!m){e.next=15;break}if("function"!=typeof(f=d[l](t))){e.next=12;break}return e.next=8,f(r,n.id);case 8:return h=e.sent,(0,u.KQ)(r,h),c.lT.updatePublicTargetingData(n.id,r,h,s,i.position),e.abrupt("return",h);case 12:a.warning("Cannot apply targeting",r),(0,u.KQ)(r,h),c.lT.updatePublicTargetingData(n.id,r,h,s,i.position);case 15:return e.abrupt("return",h);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return l=e.sent,e.abrupt("return",l.every(f));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return p=e.sent,m=p.some(f),a.verbose("Applying audience",i," for ",n,"result = ",m),e.abrupt("return",m);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}},9965:(t,e,n)=>{"use strict";n.r(e),n.d(e,{pageViewTargeting:()=>m});var r,i=n(4942),o=n(1042),a=n(6044),s=n(2084),c=n(763),l=n(7319),u=n(4006),d=(r={},(0,i.Z)(r,l.xz,"equals"),(0,i.Z)(r,l.DC,"contains"),(0,i.Z)(r,l.o1,"regexp"),(0,i.Z)(r,l.BH,"ignore_parameters"),(0,i.Z)(r,l.CJ,"favorite_url"),r);function p(t,e){var n=t.favoriteUrls,r=t.condition;return"favorite_url"===d[r]&&n?(0,u.y)(n,e):function(t,e){var n=t.condition,r=t.value,i=d[n];return(0,s.rl)(i,r,e)}(t,e)}function m(t){var e=t.conditions;try{var n,r=(new c.T).getVisitedPages(),i=null==r?void 0:r.reverse()[0].visite,s=null==r?void 0:r.filter((function(t){return t.visite===i})),l=e[0].count,u=e.filter((function(t){return!t.include})),d=e.filter((function(t){return t.include})),m=null==s||null===(n=s.map((function(t){var e=t.url;return!u.some((function(t){return p(t,e)}))&&(!!d.some((function(t){return p(t,e)}))||0===d.length)})))||void 0===n?void 0:n.filter((function(t){return t}));return(null==m?void 0:m.length)>=l}catch(t){var h="Targeting error (pagesViewedInSession)";return(0,a.Tb)(new Error(h)),o.error(h,e),!1}}},8302:(t,e,n)=>{"use strict";n.d(e,{p:()=>y,v:()=>_});var r=n(4942),i=n(885),o=n(5861),a=n(7757),s=n.n(a),c=n(4334),l=n(4564),u=n(1042);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m=(0,c.B)(),h=!1,f=[],g={mousedown:[],click:[],submit:[]},v=function(t){return function(){var e=function(t){var e=t.target;b(e,"mousedown").forEach((function(t){return t.clicked=!0})),b(e,"click").forEach((function(t){return t.clicked=!0}))},n=function(t){var e=t.target;b(e,"mousedown").forEach((function(t){return t.clicked=!1})),b(e,"click").forEach((function(t){return t.clicked=!1}))},r=function(e){var n=e.target;b(n,"mousedown",!0).forEach((function(e){var r=[e.name,null,e.testId,n];null==m||m.then((function(e){return e.aggregateActionTracking(t).apply(void 0,r)}))})),b(n,"click",!0).forEach((function(e){var r=[e.name,null,e.testId,n];null==m||m.then((function(e){return e.aggregateActionTracking(t).apply(void 0,r)}))}))};document.addEventListener("touchstart",e,!0),document.addEventListener("touchmove",n,!0),document.addEventListener("touchend",r,!0),f.push({event:"touchstart",listener:e}),f.push({event:"touchmove",listener:n}),f.push({event:"touchend",listener:r})}},b=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(g[e]||[]).filter((function(e){return!(n&&!e.clicked)&&(t.matches(e.selector)||t.closest(e.selector))}))},y=function(){f.forEach((function(t){var e=t.event,n=t.listener;document.removeEventListener(e,n,!0)})),g={mousedown:[],click:[],submit:[]},f=[],h=!1},w=function(t){return function(e,n){var r;g[n]&&(null===(r=g[n])||void 0===r||r.forEach((function(n){var r=n.selector,i=n.name,o=n.testId;try{if(e.matches(r)||e.closest(r)){var a=[i,null,o,e];null==m||m.then((function(e){return e.aggregateActionTracking(t).apply(void 0,a)}))}}catch(t){(0,u.warning)("Provided for ".concat(o," test selector ").concat(r," is not valid: ").concat(t))}})))}},_=function(t){return function(e,n){Object.keys(e).forEach((function(r){var a;g[r]&&0===(null===(a=g[r])||void 0===a?void 0:a.length)&&function(t){return function(){var e=(0,o.Z)(s().mark((function e(n){var r,o,a,c,u,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e){var r=e.target;return w(t)(r,n)},e.next=3,(0,l.K)(!0,["type"]);case 3:a=e.sent,c=(0,i.Z)(a,1),u=c[0],d=null!==(r=null==u?void 0:u.toLowerCase())&&void 0!==r?r:null,"submit"!==n&&d&&"desktop"!==d&&"ontouchstart"in document.documentElement?h||v(t)():(document.addEventListener(n,o,!0),f.push({event:n,listener:o})),h||(h=!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(t)(r),function(t,e,n){e.forEach((function(e){var r;return null===(r=g[t])||void 0===r?void 0:r.push(p(p({},e),{},{testId:n}))}))}(r,e[r],n)}))}}},8049:(t,e,n)=>{"use strict";n.d(e,{lT:()=>mt,uG:()=>rt,s8:()=>pt});var r,i=n(4925),o=n(2982),a=n(885),s=n(5861),c=n(5671),l=n(3144),u=n(4942),d=n(7757),p=n.n(d),m=n(2662),h=n(6012),f=n(4284),g=n(6080),v=n(1042),b=n(2022),y=n(4692),w=["addCSS","addImage","addLink","addParagraph","addHtml","addHTML","advanced sort","bring2back","bring2front","changeImage","changeLink","copy","copyAfter","copyBefore","cut","cutAfter","cutBefore","editAttributes","editHtml","editHTML","editPicture","editStyle","editText","editDirect","hide","hideByClass","hideContent","move","multivarCode","resize","resizeAndDrag","s&rImage","s&rText","sort","addCSS","editStyleCSS","hideByClassCSS","hideCSS"],_=n(9267),S=n(83),T=Promise.resolve().then(n.bind(n,6734)).then((function(t){return t.start}));r=T;var k,C=["editStyleCSS","sort","changeLink","addLink","editAttributes","addCSS","editPicture"],x=function(t){return t.filter((function(t){var e=t.type,n=t.value;return w.includes(e)&&null!=n})).map((function(t){var e=t;return C.includes(t.type)&&(e.value=function(t){try{return JSON.parse(t)}catch(e){return t}}(t.value)),e}))},E=function(t){return t.filter((function(t){var e=t.type;t.value;return-1===w.indexOf(e)}))},A=function(){var t=(0,s.Z)(p().mark((function t(e){var n,r,i,o,a=arguments;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:null,r=a.length>2&&void 0!==a[2]?a[2]:null,i=a.length>3&&void 0!==a[3]?a[3]:null,o=null!=n&&""!==n,null!=e){t.next=6;break}return t.abrupt("return");case 6:if(!(o&&document.querySelectorAll(n).length>0)){t.next=11;break}return t.next=9,(0,S.w)(e,r,i);case 9:t.next=12;break;case 11:o?setTimeout((0,s.Z)(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A(e,n,r,i);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),50):(0,_.A)((0,s.Z)(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,S.w)(e,r,i);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=function(){var t=(0,s.Z)(p().mark((function t(e){var n,i,o,a,c,l=arguments;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:null,i=l.length>2&&void 0!==l[2]?l[2]:null,t.next=4,r;case 4:o=t.sent,(a=x(e)).length>0&&o&&o(a),(c=E(e)).length>0&&c.forEach(function(){var t=(0,s.Z)(p().mark((function t(e){var r;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("customScriptNew"!==(r=e.type)){t.next=6;break}return t.next=4,A(e.oldValue,e.selector,n,i);case 4:t.next=7;break;case 6:/plugin_/.test(r)&&(0,v.warning)("Ignoring old plugin modification.");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();k=n(9963);var $,P=function(){function t(e,n){var r=n.id,i=n.name,o=n.traffic,a=n.modifications,s=n.widgets,l=n.components,u=n.redirections;(0,c.Z)(this,t),this.testId=e,this.id=r,this.name=i,this.traffic=o,this.modifications=a,this.widgets=s,this.components=l,this.redirections=u}return(0,l.Z)(t,[{key:"apply",value:function(){var t=(0,s.Z)(p().mark((function t(){var e,n,r,i,o,a=this;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(0,v.info)("applying modifications",this.modifications),!(0,g.kK)(this.redirections)&&this.redirections.length>0?(0,y.cf)(this.redirections,this.testId,this.id):((0,g.kK)(this.modifications)||(r="".concat(this.testId,"testModifications"),(0,b.cb)()&&null!==(e=window.performance)&&void 0!==e&&e.mark&&window.performance.mark("".concat(r,"Start")),I(this.modifications,this.testId,this.id),(0,b.cb)()&&null!==(n=window.performance)&&void 0!==n&&n.mark&&(window.performance.mark("".concat(r,"Stop")),window.performance.measure(r,"".concat(r,"Start"),"".concat(r,"Stop")),window.ABTasty.latency.ml=window.ABTasty.latency.ml||{},i=window.performance.getEntriesByName(r,"measure"),window.ABTasty.latency.ml[this.testId]=i&&i[0]?Math.round(i[0].duration):0)),o=["testPlugin","testComponent"],["widgets","components"].forEach(function(){var t=(0,s.Z)(p().mark((function t(e,n){var r,i,s,c;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((0,g.kK)(a[e])){t.next=10;break}if(s="".concat(a.testId).concat(o[n]),(0,b.cb)()&&null!==(r=window.performance)&&void 0!==r&&r.mark&&window.performance.mark("".concat(s,"Start")),"widgets"!==e){t.next=6;break}return t.next=6,k.applyWidgets(a.widgets,a.testId);case 6:t.next=9;break;case 9:(0,b.cb)()&&null!==(i=window.performance)&&void 0!==i&&i.mark&&(window.performance.mark("".concat(s,"Stop")),window.performance.measure(s,"".concat(s,"Start"),"".concat(s,"Stop")),window.ABTasty.latency.plg=window.ABTasty.latency.plg||{},c=window.performance.getEntriesByName(s,"measure"),window.ABTasty.latency.plg[a.testId]=c&&c[0]?Math.round(c[0].duration):0);case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}(),O=n(7352),N=(n(4564),{}),B=function(){var t=(0,s.Z)(p().mark((function t(e,n,r){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.forEach((function(t){var e=t.name,i=t.wave,o=t.tracker,a=t.implementation,s=t.functionName,c=N[e];c?c(n,i,o,a,s,r):(0,v.warning)("Analytics tool is not supported by AB Tasty: ",e,"(for campaign ".concat(n.campaignId,")"))}));case 1:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),D=function(){var t=(0,s.Z)(p().mark((function t(e,n){var r;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=/{{([a-z]*)}}/gi,e.forEach((function(t){var e=t.code.replace(r,(function(t,e){return"'".concat(n[e],"'")}));A(e,null,n.campaignId,n.variationId)}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),R=function(){var t=(0,s.Z)(p().mark((function t(e,n,r,i){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(0,v.info)("applying analytics"),(0,g.kK)(e)||B(e,n,i),(0,g.kK)(r)||D(r,n);case 3:case"end":return t.stop()}}),t)})));return function(e,n,r,i){return t.apply(this,arguments)}}(),L=n(4334),M=(n(262),n(2242));!function(t){t.before="Before Applied",t.exists="Exists",t.sent="Sent"}($||($={}));var W=n(8302),j=n(5136),V=n(5536),H=n(8669),F=n(6044),U=n(7806);function z(t,e,n){return q.apply(this,arguments)}function q(){return(q=(0,s.Z)(p().mark((function t(e,n,r){var i,o,a,s;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="https://".concat("try.abtasty.com","/").concat((0,f.Nn)(),"/").concat(e,".").concat(n,".json?").concat(r),o=!1,a=function(){try{return new AbortController}catch(t){(0,F.Tb)(t)}}(),s=setTimeout((function(){o||(null==a||a.abort(),(0,v.warning)("Modifications can't be fetched for ".concat(e)))}),3e3),(0,U.tI)("modifiationsFetchLoop_".concat(e),s),t.abrupt("return",(0,H.U)(i,{cache:"default",signal:null==a?void 0:a.signal}).then((function(t){return t.json()})).then((function(t){return clearTimeout(s),t&&t._taginfo&&delete t._taginfo,o=!0,[t,null]})).catch((function(t){return clearTimeout(s),[null,t]})));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var G=n(1753),Z=n(1155),K=n(3555);function Y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function J(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(n),!0).forEach((function(e){(0,u.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Q(t){return t.reduce((function(t,e){var n=t[t.length-1]||0;return[].concat((0,o.Z)(t),[n+e])}),[])}var X=(0,g.WA)((function(t,e,n,r){var i=n.isDynamic,a=void 0!==i&&i,s=n.testedTraffic,c=n.modulation,l=r[r.length-1],u=Math.max.apply(Math,(0,o.Z)(t));if(a){var d=function(t,e,n){return nt(t,e,n).find((function(t){return t.id===K.RH}))}(e,s,c);d&&(u=d.traffic)}l+u>100&&(a&&(0,F.Tb)(new Error("The sum of dc infos traffics got greater than 100! We've ignored it but it's weird. Last slot: ".concat(l,". OriginalVariationTraffic: ").concat(u))),u=100-l);var p=l+u;return[].concat((0,o.Z)(r),[p])}));function tt(t,e,n){var r=function(t,e,n){var r=n.isDynamic,i=void 0!==r&&r,a=n.testedTraffic,s=n.modulation,c=Object.keys(t),l=t;if(i){var u=function(t,e,n){return nt(t,e,n).filter((function(t){return t.id!==K.RH}))}(e,a,s);u.length&&(l={},u.forEach((function(t){var e=t.id,n=t.traffic;l[e]={traffic:n}})))}return c.reduce((function(t,e){return[].concat((0,o.Z)(t),[l[e].traffic])}),[])}(t,e,n);return(0,g.zG)(Q,X(r,e,n))(r)}function et(t,e,n){var r=[];try{r=tt(t,e,n)}catch(t){return(0,F.Tb)(new Error("Error on function allocateTraffic. ".concat(t))),-1}return function(t,e){var n=Math.floor(100*Math.random()+1),r=e.findIndex((function(t){return t>=n}));return-1===r?-1:r===e.length-1?0:parseInt(t[r],10)}(Object.keys(t),r)}function nt(t,e,n){var r=((0,K.s6)()||{})["".concat(t)]||[],i=r.length;return r.map((function(t){var r=function(t,e,n){var r=e||50;return t*(r/100)+(100-r)/n}(t.traffic,n,i),o=function(t,e){return t*((e||100)/100)}(r,e);return J(J({},t),{},{traffic:o})}))}var rt,it,ot=function(t,e,n,r,i){if(t.isMultipageChild()&&t.hasAlreadySeenBrothers(e)){var o=t.getSeenBrothers(e)[0],a=null;if(o.variationID===rt.Untracked)return o.variationID;var s=pt(o.campaignId).getVariation(o.variationID);return a=s?s.masterVariationId:0,(0,g.kK)(a)||0===a?rt.Original:t.getVariationInfoByMasterId(a).id}if(t.isMultipageChild()&&t.hasSeenMaster(e)){var c=e.getCampaign(r);return e.removeCampaign(r),c.variationID===rt.Untracked?c.variationID:c.variationID!==rt.Original?t.getVariationInfoByMasterId(c.variationID).id:rt.Original}return n?n.variationID:i&&!(0,g.kK)((0,y.QX)().variationID)?(0,y.QX)().variationID:t.isAsync()?et(t.data.asyncVariationInfoById,t.data.id,t.getDynamicAllocationProperties()):et(t.data.variations,t.data.id,t.getDynamicAllocationProperties())},at=["global"];function st(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?st(Object(n),!0).forEach((function(e){(0,u.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(t){t[t.Original=0]="Original",t[t.Untracked=-1]="Untracked",t[t.Timeout=-2]="Timeout"}(rt||(rt={})),it=n(9963);var lt=(0,L.B)(),ut={id:0,name:"Original",masterVariationId:0},dt={},pt=function(t){return dt[t]},mt=function(){function t(e){var n=this;(0,c.Z)(this,t),(0,u.Z)(this,"performanceMeasured",!1),(0,u.Z)(this,"alreadySeenOneTest",(function(t){return function(e){var r=!1,i=n.data.siblings,o=void 0===i?[]:i,a=t.getCampaigns();return Object.keys(a).forEach((function(t){var n=(0,f.em)(Number(t)),i=a[t];null!=n&&null==n.type.match(/(mastersegment|subsegment)/)&&1===i.oneVisitorOneTest&&Number(t)!==e&&i.variationID!==rt.Untracked&&o.indexOf(Number(t))<0&&(r=!0)})),r}}));var r=e.id;if(pt(r))return pt(r);this.data=e,this.forceUntracking=!1,dt[r]=this,this.initPublicData(),this.hasBeenChecked=this.memoizeHasBeenChecked()}return(0,l.Z)(t,[{key:"getType",value:function(){return this.data.type}},{key:"getSubType",value:function(){if(this.isMultipageChild())return"mpt";if(this.isMultivariateChild())return"mvt";if(this.isPersonalisationChild()){var e=t.instanciate(this.data.parentID);return!!e&&e.data.sub_type||m.dF.subsegment}return m.dF.ab}},{key:"getAdditionalType",value:function(){return this.data.additionalType||null}},{key:"getConsentType",value:function(){return this.getAdditionalType()?this.getAdditionalType():this.isPersonalisation()||this.isPersonalisationChild()?"perso":"test"}},{key:"getChildren",value:function(){return this.data.children}},{key:"getId",value:function(){return this.data.id}},{key:"getName",value:function(){return this.data.name}},{key:"getChosenVariation",value:function(){return this.chosenVariation}},{key:"getVariation",value:function(t){return t===rt.Original?ut:this.data.variations[t]}},{key:"getVariationInfoByMasterId",value:function(t){var e=this;return this.isAsync()?Object.values(this.data.asyncVariationInfoById).find((function(n){return e.data.variations[n.id].masterVariationId===t})):Object.values(this.data.variations).find((function(e){return e.masterVariationId===t}))}},{key:"getMasterVariationId",value:function(t){return this.getVariation(t).masterVariationId}},{key:"getParent",value:function(){var e=t.getCampaignData(this.data.parentID);return new t(e)}},{key:"getParentId",value:function(){return this.getParent().data.id}},{key:"getParentName",value:function(){return this.getParent().data.name}},{key:"getStatus",value:function(){return this.data.status||h.c.pending}},{key:"getSeenBrothers",value:function(t){var e=this.data,n=e.parentID,r=e.siblings;return 0===n||null==r||0===r.length?null:r.map((function(e){var n=t.getCampaign(e);return n?ct({campaignId:e},n):null})).filter((function(t){return!(0,g.kK)(t)}))}},{key:"setStatus",value:function(t){this.data.status=t,(0,g.kK)(window.ABTasty.results[this.data.id])&&this.initPublicData(),this.hasBeenCheckedResolve&&t!==h.c.checking&&this.hasBeenCheckedResolve(t),window.ABTasty.results[this.data.id].status=t}},{key:"memoizeHasBeenChecked",value:function(){var t=this,e=null;return function(){return e||(e=new Promise((function(e){t.hasBeenCheckedResolve=e})))}}},{key:"isContainer",value:function(){return[m.dF.multipage,m.dF.multivariate,m.dF.mastersegment].includes(this.data.type)}},{key:"isMultivariate",value:function(){return this.data.type===m.dF.multivariate}},{key:"isMultipage",value:function(){return this.data.type===m.dF.multipage}},{key:"isPersonalisation",value:function(){return this.data.type===m.dF.mastersegment}},{key:"isMultivariateChild",value:function(){return 0!==this.data.parentID&&t.instanciate(this.data.parentID).isMultivariate()}},{key:"isMultipageChild",value:function(){return 0!==this.data.parentID&&t.instanciate(this.data.parentID).isMultipage()}},{key:"isPersonalisationChild",value:function(){return 0!==this.data.parentID&&t.instanciate(this.data.parentID).isPersonalisation()}},{key:"isDynamicAllocation",value:function(){return null!=this.data.dynamicTrafficGoalId&&""!==this.data.dynamicTrafficGoalId}},{key:"getDynamicAllocationProperties",value:function(){return{isDynamic:this.isDynamicAllocation(),testedTraffic:this.data.dynamicTestedTraffic,modulation:this.data.dynamicTrafficModulation}}},{key:"isAsync",value:function(){return this.data.isAsync||!1}},{key:"isTargetByEvent",value:function(){var t;return Boolean(null===(t=this.data.scopes.urlScope)||void 0===t?void 0:t.find((function(t){return t.value===V.Wx})))}},{key:"initPublicData",value:function(){var t,e=this.data,n=e.id,r=e.name,i=e.type,o=e.status,a=e.heatmap,s={name:r,type:i,status:o,variationID:this.chosenVariation,variationName:null,targetings:(t={},(0,u.Z)(t,V.ge,{}),(0,u.Z)(t,V.D$,{}),t),heatmap:a};window.ABTasty.results&&(window.ABTasty.results[n]=(0,g.Ut)(s,n,window.ABTasty.results))}},{key:"updatePublicData",value:function(t){var e=t.id,n=t.name;window.ABTasty.results[this.data.id].variationID=e,window.ABTasty.results[this.data.id].variationName=n}},{key:"hasSeenMaster",value:function(t){var e=this.data.parentID;return 0===e?null:!(0,g.kK)(t.getCampaign(e))}},{key:"hasMultivariateSibling",value:function(t){var e=this.data,n=e.id,r=e.parentID,i=e.siblings;if(0===r)return!1;if(null==i||0===i.length)return!1;var o=t.getCampaigns();return Object.keys(o).some((function(t){return Number(t)===n}))}},{key:"hasBrotherAlreadyStarted",value:function(){var e=this.data,n=e.parentID,r=e.siblings;return 0!==n&&(null!=r&&0!==r.length&&r.some((function(e){return t.instanciate(e).getStatus()===h.c.accepted})))}},{key:"hasAlreadySeenBrothers",value:function(t){var e=this.getSeenBrothers(t);return!(0,g.kK)(e)&&!(0,g.xb)(e)}},{key:"isCheckingOtherCampaigns",value:function(){var e=this;return!this.isPersonalisation()&&!this.isPersonalisationChild()&&t.getCampaignsDatas().filter((function(t){var n=t.id,r=pt(n);return n!==e.data.id&&!(0,g.kK)(r)&&(!(r.isPersonalisation()||r.isMultipage()||r.isMultivariate())&&n!==e.data.id&&r.getStatus()===h.c.checking)})).length>0}},{key:"isOneVisitorOneTestDone",value:function(t){var e=(0,f.wy)().oneVisitorOneTest,n=this.data,r=n.id,i=n.type,o=n.parentID;if(e&&i!==m.dF.subsegment){var a=r;if(i===m.dF.ab&&this.isMultipageChild()&&(a=o),this.alreadySeenOneTest(t)(a)&&!this.hasMultivariateSibling(t))return!0}return!1}},{key:"updateCampaign",value:function(){var t=(0,s.Z)(p().mark((function t(e,n){var r,i,o,c,l=this;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isAsync()&&e!==rt.Timeout&&e!==rt.Untracked){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Promise.all(n.map(function(){var t=(0,s.Z)(p().mark((function t(e){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z(l.data.id,Number(e),l.data.campaignHash);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 4:r=t.sent,i=r.map((function(t){var e=(0,a.Z)(t,2),n=e[0];e[1];return n})),o=r.map((function(t){var e=(0,a.Z)(t,2);e[0];return e[1]})),c=i.find((function(t){return(null==t?void 0:t.id)===e})),o.every((function(t){return null===t}))?(0,g.xb)(c)||(this.data.variations=(0,u.Z)({},e,c)):o.some((function(t){return"AbortError"===(null==t?void 0:t.name)}))?this.setStatus(h.c.timeout):this.forceUntracking=!0;case 9:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"sendExecutedCampaignEvent",value:function(t){(0,O.hb)(O.PL.executedCampaign,{campaignId:this.data.id,variationId:this.getVariation(t).id,status:this.getStatus(),type:this.getSubType()})}},{key:"executeCampaign",value:function(){var t=(0,s.Z)(p().mark((function t(e){var n,r,i,o,a,c=this;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={campaignHistory:function(){return e.getCampaignHistory()},visitorId:e.getVisitorId(),currentSessionTimestamp:e.getCurrentSessionTimestamp(),numberOfSessions:e.getNumberOfSessions()},r=this.data.id,i=this.data.parentID,o=e.getCampaign(r),a=ot(this,e,o,i,(0,y.uj)(this.getId())),t.abrupt("return",this.updateCampaign(a,this.data.asyncVariationInfoById?Object.keys(this.data.asyncVariationInfoById):[]).then((0,s.Z)(p().mark((function t(){var r,i,o,l,u,d,f,w,S,T,k,C;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=c.data,i=r.id,r.parentID,o=r.status,l=r.name,u=r.variations,d=r.globalCode,f=r.widgets,w=r.analytics,S=r.customAnalytics,T=r.actionTrackings,k=r.targetingMode,o===h.c.timeout?a=rt.Timeout:c.forceUntracking&&c.isAsync()?(a=rt.Timeout,c.setStatus(h.c.failedLoading)):(0,y.uj)(i)?c.setStatus(h.c.acceptedByRedirection):c.setStatus(h.c.accepted),(0,v.info)("Campaign Viewed =",i,a),e.campaignView(i,a,c.data.status),[rt.Timeout,rt.Untracked].includes(a)||!(null!=u&&u[a]||a===rt.Original)){t.next=14;break}if(C={caid:String(i),vaid:String(a)},null==lt||lt.then((function(t){return t.dispatchHit(n)(t.HitType.campaign,C)})),a===rt.Original||(0,y.uj)(i)){t.next=11;break}return c.chosenVariation=new P(i,u[a]),t.next=11,c.chosenVariation.apply();case 11:(0,_.A)((0,s.Z)(p().mark((function t(){var r,o,s,u,h,v,_,C,x,E,I,P,O,N;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((0,g.kK)(f)){t.next=3;break}return t.next=3,it.applyWidgets(f,i);case 3:return(0,g.kK)(d)||(s="".concat(i,"testGlobalCode"),(0,b.cb)()&&null!==(r=window.performance)&&void 0!==r&&r.mark&&window.performance.mark("".concat(s,"Start")),A(d,null,i,a),(0,b.cb)()&&null!==(o=window.performance)&&void 0!==o&&o.mark&&(window.performance.mark("".concat(s,"Stop")),window.performance.measure(s,"".concat(s,"Start"),"".concat(s,"Stop")),window.ABTasty.latency.gct=window.ABTasty.latency.gct||{},u=window.performance.getEntriesByName(s,"measure"),window.ABTasty.latency.gct[i]=u&&u[0]?Math.round(u[0].duration):0)),T&&((0,g.kK)(T)||(0,W.v)(e)(T,i)),h=c.getVariation(a),(0,g.kK)(w)&&(0,g.kK)(S)||(C="".concat(i,"testAnalytics"),(0,b.cb)()&&null!==(v=window.performance)&&void 0!==v&&v.mark&&window.performance.mark("".concat(C,"Start")),x={campaignName:l,campaignId:i,variationName:h.name,variationId:h.id},E=void 0,I=function t(){var e=new M.yN;e.haveConsent([M.RX.collect])?R(w,x,S,E):(0,Z.VH)(e.haveConsentFn([M.RX.collect]),t)},(0,y.hS)()||I(),E&&E($.before,x,w),(0,b.cb)()&&null!==(_=window.performance)&&void 0!==_&&_.mark&&(window.performance.mark("".concat(C,"Stop")),window.performance.measure(C,"".concat(C,"Start"),"".concat(C,"Stop")),window.ABTasty.latency.all=window.ABTasty.latency.all||{},P=window.performance.getEntriesByName(C,"measure"),window.ABTasty.latency.all[i]=P&&P[0]?Math.round(P[0].duration):0)),c.updatePublicData(h),c.sendExecutedCampaignEvent(a),t.next=11,(0,G.BT)();case 11:return O=t.sent,"function"==typeof(N=O.sendPerfTracking)&&k===m.Cd.waitUntil&&N(n)("".concat(i,"-ajaxLoopDuration"),"AJAX loop duration"),t.abrupt("return",!0);case 15:case"end":return t.stop()}}),t)})))),t.next=26;break;case 14:if(!c.forceUntracking||a!==rt.Timeout){t.next=19;break}return c.setStatus(h.c.failedLoading),t.abrupt("return",!1);case 19:if(a!==rt.Timeout){t.next=24;break}return c.setStatus(h.c.timeout),t.abrupt("return",!1);case 24:return c.setStatus(h.c.traffic),t.abrupt("return",!1);case 26:case"end":return t.stop()}}),t)})))));case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"apply",value:function(){var t=(0,s.Z)(p().mark((function t(e){var n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.data.id,!(0,y.uj)(n)){t.next=4;break}return this.executeCampaign(e),t.abrupt("return",!0);case 4:return t.next=6,(0,G.S5)(e,this);case 6:if(!t.sent){t.next=11;break}return t.next=10,this.executeCampaign(e);case 10:return t.abrupt("return",!0);case 11:return t.abrupt("return",!1);case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}],[{key:"resetCampaigns",value:function(){Object.keys(dt).forEach((function(t){var e=pt(Number(t));e.chosenVariation=null,e.updatePublicData({id:null,name:null}),e.data.audienceTrigger&&(0,G.dR)(e.data.audienceTrigger),e.data.audienceSegment&&(0,G.dR)(e.data.audienceSegment),delete dt[t]}))}},{key:"instanciate",value:function(e){var n=t.getCampaignData(e);if(n)return new t(n)}},{key:"getActiveCampaigns",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(0,g.zG)((0,g.D9)((function(e,n){var r=e.status,i=e.variationID;return(null!==t&&t===Number(n)||null===t)&&[h.c.accepted,h.c.acceptedByRedirection].includes(r)&&null!==i&&i!==rt.Untracked})),(0,g.ID)((function(t,e){return ct(ct({},t),{},{testDatas:pt(e).data})})))(window.ABTasty.results)}},{key:"getCampaignData",value:function(t){return(0,f.ae)().tests[t]}},{key:"getCampaignsDatas",value:function(t){var e=(t||(0,f.ae)()).tests,n=(e.global,(0,i.Z)(e,at));return Object.values(n)}},{key:"sortCampaignsParentsByPrioASC",value:function(e){return e.sort((function(t,e){return Number(t.priority)-Number(e.priority)})).reduce((function(e,n){var r=n.priority,i=0!==n.parentID,a=t.instanciate(n.id);if(i)return a.isPersonalisationChild()&&a.setStatus(h.c.notPrioritizedYet),e;a.isPersonalisation()&&a.setStatus(h.c.notChecked);var s=void 0!==e[r]?[].concat((0,o.Z)(e[r]),[n]):[n];return ct(ct({},e),(0,u.Z)({},r,s))}),{})}},{key:"getGlobalCampaignsInfos",value:function(t){return(t||(0,f.ae)()).tests.global}},{key:"updatePublicTargetingData",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:V.k5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=window.ABTasty.results[t];if(void 0!==o&&e){var a=o.targetings[r];if([V.RQ,V.GJ].indexOf(r)>-1){a=a||[];var s={success:n,conditions:e.conditions,targeting_type:e.targeting_type,operator:e.operator,name:Object.keys(j).find((function(t){return j[t]===e.targeting_type})),group:i};(a=a.filter((function(t){return t.targeting_type!==s.targeting_type||t.group!==s.group}))).push(s)}else(a=a||{})[e.targeting_type]=ct(ct({},a[e.targeting_type]),{},{conditions:e.conditions,success:n}),r===V.k5&&(a[e.targeting_type]=ct(ct({},a[e.targeting_type]),{},{operator:e.operator,name:Object.keys(j).find((function(t){return j[t]===e.targeting_type}))}));o.targetings[r]=a,window.ABTasty.results[t]=o}}}]),t}();(0,u.Z)(mt,"getParentCampaignsIDs",(function(t){return(0,g.zG)((0,g.hX)((0,g.OH)("parentID",0)),(0,g.jg)("id"))(t)})),(0,u.Z)(mt,"getCampaignsSortedByPrio",(function(t){return mt.sortCampaignsParentsByPrioASC(t)})),(0,u.Z)(mt,"filterCampaignByPrio",(function(t,e){return t[e]})),(0,u.Z)(mt,"abTastyStartTest",(function(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=pt(e);if(void 0!==r){if(n===rt.Untracked)return void r.setStatus(h.c.traffic);if(n===rt.Timeout)return void r.setStatus(h.c.timeout);var i=t.getCampaign(e);!(0,g.kK)(n)&&(0,g.kK)(i)&&t.campaignView(e,n,h.c.accepted),r.executeCampaign(t)}}}))},4692:(t,e,n)=>{"use strict";n.d(e,{cf:()=>v,QX:()=>m,FU:()=>f,hS:()=>g,WJ:()=>p,uj:()=>h});var r=n(4942),i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3,e=document.createElement("style");e.type="text/css";var n=".ABTastyHidden { display: none !important }";e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n)),document.getElementsByTagName("head")[0].appendChild(e),document.getElementsByTagName("html")[0].setAttribute("class","ABTastyHidden"),setTimeout((function(){var t=document.getElementsByTagName("html")[0];t.className=t.className.replace("ABTastyHidden","")}),t)},o=n(6080),a=n(2084),s=n(4284),c=n(9548),l=n(5528);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var d={testID:null,variationID:null,previousLogicalView:null},p=function(){d.testID=null,d.variationID=null,d.previousLogicalView=null,delete window.ABTasty.redirectedFrom},m=function(){return d},h=function(t){var e=m().testID;return!(0,o.kK)(e)&&e===t},f=function(){if(m().testID)return!0;var t=new l.w,e=((0,a.re)(l.L.mrasn)||t.getMrasn()).split(".");if(e.length>=2){var n=e[2]&&e[2].length>0?e[2]:null,i=e[3]?Number[e[3]]:null;return!(i&&Date.now()-i>=1e4)&&(function(t,e,n){d.testID=t,d.variationID=e,d.previousLogicalView=n}(Number(e[0]),Number(e[1]),n),window.ABTasty.redirectedFrom=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},m()),t.setMrasn(""),!0)}return!1},g=function(){return!!window.ABTasty.pendingRedirection},v=function(t,e,n){var r=t[0],o=r.ATInternetReferrer,u=r.transferParameters,d=r.isRegex,p=r.target,m=r.pattern,h=new RegExp(l.L.mrasn);if(!(g()||f()||h.test(p))){i(1e3);var v=p;if(d&&(v=function(t,e,n){var r=t,i=new RegExp(n,"gi");e.includes("?")&&document.location.href.includes("?")&&(r=e.replace("?","&"));var o=(r=document.location.href.replace(i,r)).substr(0,r.indexOf("#"));return r.includes("?")||""!==o&&!o.includes("&")||(r=r.replace("&","?")),r}(v,p,m)),u&&(v=(0,a.ST)(v,window.location.href)),v=function(t,e,n){var r=(0,c.aO)()||"",i=[e,n];if(i.push(r),(0,s.ae)().accountSettings.hashMrasnAllowed){var o=i.filter((function(t){return t.toString().length>0})).join(".");return(0,a.oe)("mrasn",o,t)}i.push(Date.now());var u=new l.w;return u.setMrasn(i.join(".")),u.save(),t}(v=(0,a.CL)(v),e,n),o&&document.referrer){var b=new URL(document.referrer).hostname;v=(0,a.oe)("xtref",b,v)}window.ABTasty.pendingRedirection=!0,/MSIE/.test(navigator.userAgent)&&(v=v.replace("&","&#38")),window.location.replace(v),i(1)}}},1753:(t,e,n)=>{"use strict";n.d(e,{Uo:()=>lt,Hw:()=>K,S5:()=>Y,ub:()=>et,BT:()=>rt.BT,nm:()=>at,HY:()=>ot,BH:()=>tt,Sv:()=>nt.Sv,YA:()=>nt.YA,dR:()=>st,LL:()=>nt.LL,OP:()=>rt.OP,Fl:()=>rt.Fl,KQ:()=>ct,FA:()=>bt,zD:()=>vt});var r=n(2982),i=n(5861),o=n(7757),a=n.n(o),s=n(1042),c=n(4284),l=n(8658),u=n(6845),d=n(6080),p=n(8049),m=n(5946),h=n(6044),f=n(83);function g(t,e){var n="Scope error (code)";(0,h.Tb)(new Error(n)),s.error(n,e)}function v(){return v=(0,i.Z)(a().mark((function t(e,n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.all(e.map((function(t){var r=t.value;if(t.isAsync)return new Promise(function(){var t=(0,i.Z)(a().mark((function t(e,i){var o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={resolve:e,reject:i},t.next=3,!!(0,f.w)(r,n,void 0,void 0,o);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()).then((function(t){return t})).catch((function(t){return g(0,e),!1}));try{return(0,f.w)(r,n)}catch(t){return g(0,e),Promise.resolve(!1)}}))).then((function(t){return t.every((function(t){return!!t}))})));case 1:case"end":return t.stop()}}),t)}))),v.apply(this,arguments)}var b=n(6049),y=n(1438);function w(t){return _.apply(this,arguments)}function _(){return _=(0,i.Z)(a().mark((function t(e){var n,r,o,s,c=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.value,r=e.include,c.length>1&&void 0!==c[1]&&c[1],c.length>2?c[2]:void 0,o=(0,b.Q)(),s=o.then(function(){var t=(0,i.Z)(a().mark((function t(e){var r,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e){t.next=8;break}return t.next=3,e(n).promise();case 3:return t.t0=t.sent.length,r=t.t0>0,t.abrupt("return",r);case 8:return i=(0,y.Zt)(n),t.abrupt("return",Promise.resolve(Boolean(document.querySelector(i))));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.abrupt("return",s.then(function(){var t=(0,i.Z)(a().mark((function t(e){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r?e:!e,t.abrupt("return",n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 6:case"end":return t.stop()}}),t)}))),_.apply(this,arguments)}function S(){return(S=(0,i.Z)(a().mark((function t(e,n,r){var i,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all(e.map((function(t){return w(t,r,n)})));case 3:return i=t.sent,t.abrupt("return",i.some((function(t){return t})));case 7:return t.prev=7,t.t0=t.catch(0),o="Scope error (selector)",(0,h.Tb)(new Error(o)),s.error(o,e),t.abrupt("return",!1);case 13:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}var T=n(1918);function k(t){var e=t.name,n=t.value,r=t.include,i=T.get(e),o=!1;return(i||""===i)&&(o=!0,null!=n&&(o=null!==i.match(new RegExp(n,"i")))),r?o:!o}var C=n(8206),x=function(t){return function(e){var n=e.range,r=e.from,i=e.to;return n?t>=Number(r)&&t<=Number(i):t===Number(r)}};var E=n(4006),A=n(5536),I=function(t){return!0===t},$={url_scope:{method:function(t){return Promise.resolve((0,m.l)(t))},group:A.ge},favorite_url_scope:{method:function(t){return Promise.resolve((0,E.o)(t))},group:A.ge},code_scope:{method:function(t,e){return v.apply(this,arguments)},group:A.ge},selector_scope:{method:function(t,e,n){return Promise.resolve(function(t,e,n){return S.apply(this,arguments)}(t,e,n))},group:A.ge},cookie_scope:{method:function(t){return Promise.resolve(function(t){try{return t.some(k)}catch(n){var e="Scope error (cookie)";return(0,h.Tb)(new Error(e)),s.error(e,t),!1}}(t))},group:A.D$},ip_scope:{method:function(t){return Promise.resolve(function(t){try{var e=(0,d.vM)((function(t){return t.include?"inclusions":"exclusions"}),t),n=e.exclusions,r=e.inclusions,i=(0,y.uY)((0,C.vz)());return!(n&&n.some(x(i))||(!r||!r.some(x(i)))&&r)}catch(e){var o="Scope error (IP)";return(0,h.Tb)(new Error(o)),s.error(o,t),!1}}(t))},group:A.D$}};function P(t,e,n){return O.apply(this,arguments)}function O(){return(O=(0,i.Z)(a().mark((function t(e,n,r){var i,o,c,l,u;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r.id,o=r.mutationObserverEnabled,c=$[n].method,l=$[n].group,t.next=5,c(e,i,o);case 5:return u=t.sent,s.info("Applying scope",n," for ",r,"result = ",u),p.lT.updatePublicTargetingData(i,{conditions:e,targeting_type:n},u,l),t.abrupt("return",u);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function N(t,e){return B.apply(this,arguments)}function B(){return(B=(0,i.Z)(a().mark((function t(e,n){var i,o,s,c,l,u;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.urlScope,o=e.favoriteUrlScope,s=e.favoriteUrlScopeConditions,!(!(0,d.kK)(o)&&o.length)){t.next=10;break}return c=(0,d.kK)(i)?o:[].concat((0,r.Z)(i),(0,r.Z)(o)),t.next=6,P({urlScopes:c,favoriteUrlScopeConditions:s},"favorite_url_scope",n);case 6:return l=t.sent,t.abrupt("return",l);case 10:return t.next=12,P(i,"url_scope",n);case 12:return u=t.sent,t.abrupt("return",!i.length||u);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function D(){return R.apply(this,arguments)}function R(){return R=(0,i.Z)(a().mark((function t(){var e,n,r,i,o,s=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:{},n=e.codeScope,r=e.selectorScope,i=s.length>1?s[1]:void 0,o=[!(0,d.kK)(n)&&n.length?P(n,"code_scope",i).catch((function(t){return t})):Promise.resolve(!0),!(0,d.kK)(r)&&r.length?P(r,"selector_scope",i).catch((function(t){return t})):Promise.resolve(!0)],t.abrupt("return",Promise.all(o).then((function(t){return t.every(I)})));case 4:case"end":return t.stop()}}),t)}))),R.apply(this,arguments)}function L(){return M.apply(this,arguments)}function M(){return M=(0,i.Z)(a().mark((function t(){var e,n,r,i,o,s=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:{},n=e.cookieScope,r=e.ipScope,i=s.length>1?s[1]:void 0,o=[!(0,d.kK)(n)&&n.length?P(n,"cookie_scope",i).catch((function(t){return t})):Promise.resolve(!0),!(0,d.kK)(r)&&r.length?P(r,"ip_scope",i).catch((function(t){return t})):Promise.resolve(!0)],t.abrupt("return",Promise.all(o).then((function(t){return t.every(I)})));case 4:case"end":return t.stop()}}),t)}))),M.apply(this,arguments)}var W,j=n(3555),V=n(2662),H=n(6012),F=function(t){return function(e,n){var r=n.oneVisitorOneTest,i=e.data,o=i.id,a=i.status,c=i.type;return a&&a===H.c.checking?((0,s.info)("campaign:: Campaign ".concat(o," is already in checking state")),!1):r&&e.isCheckingOtherCampaigns()?((0,nt.LL)(e,(function(){return e.apply(t)})),!1):c===V.dF.subsegment&&e.hasBrotherAlreadyStarted()?(e.setStatus(H.c.otherSubsegment),!1):!e.isOneVisitorOneTestDone(t)||(e.setStatus(H.c.oneVisitorOneTest),!1)}},U=function(t){return function(e,n){var r=n.oneVisitorOneTest;return(0,n.isScreenshotMode)()?(e.setStatus(H.c.screenshotModeRejected),!1):e.isTargetByEvent()?(e.setStatus(H.c.targetByEventPending),!1):F(t)(e,{oneVisitorOneTest:r})}},z=function(){var t=(0,i.Z)(a().mark((function t(e,n){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.map((function(t){var n=(0,p.s8)(t);return e.data.priority>1&&n.data.priority<e.data.priority||n.data.id<e.data.id?n:null})).filter((function(t){return!!t})),t.next=3,Promise.all(r.map((function(t){return[H.c.checking,H.c.waitingForSubsegmentCheck].includes(t.getStatus())?t.hasBeenChecked():Promise.resolve(t.getStatus())})));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),q=n(2022),G=function(t){var e=t.data.scopes;return Promise.all([D(e,t.data),L(e,t.data)])},Z=function(t,e){var n=e.data,r=n.audienceTrigger,i=n.audienceSegment;return Promise.all([(0,u.ZN)(t)(e.data,r).catch((function(t){return t})),(0,u.ZN)(t)(e.data,i).catch((function(t){return t}))])},K=function(){var t=(0,i.Z)(a().mark((function t(e){var n,r,i,o,s,l,u=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=!(u.length>1&&void 0!==u[1])||u[1],r=u.length>2?u[2]:void 0,i=(0,c.wy)(),o=i.oneVisitorOneTest,!n||F(e)(r,{oneVisitorOneTest:o})){t.next=5;break}return t.abrupt("return",!1);case 5:return r.setStatus(H.c.checking),t.next=8,G(r);case 8:if(!(s=t.sent).every((function(t){return!!t}))){t.next=24;break}return t.next=12,Z(e,r);case 12:if(!(l=t.sent).every((function(t){return!!t}))){t.next=19;break}return t.next=16,ot(r);case 16:return t.abrupt("return",!0);case 19:return t.next=21,at(l,[H.c.trigger,H.c.segment],e,r);case 21:case 26:return t.abrupt("return",t.sent);case 22:t.next=27;break;case 24:return t.next=26,at(s,[H.c.targetPages,H.c.qaMode],e,r);case 27:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Y=function(){var t=(0,i.Z)(a().mark((function t(e,n){var i,o,u,d,p,m;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=(0,c.wy)(),o=i.oneVisitorOneTest,u=n.data,d=u.id,u.audienceTrigger,p=u.scopes,U(e)(n,{oneVisitorOneTest:o,isScreenshotMode:l.isScreenshotMode})){t.next=4;break}return t.abrupt("return",!1);case 4:n.setStatus(H.c.checking),t.next=8;break;case 8:return t.next=10,vt(d);case 10:if(!n.isDynamicAllocation()){t.next=19;break}return t.prev=11,t.next=14,(0,j.f_)();case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(11),(0,s.warning)("Allocation fetch failed (campaign ".concat(d," will not be able to run corectly)"));case 19:if((0,rt.OP)(n),!(n.isPersonalisationChild()&&n.data.siblings&&n.data.siblings.length>0)){t.next=29;break}return n.setStatus(H.c.waitingForSubsegmentCheck),m=[n.data.id].concat((0,r.Z)(n.data.siblings)).sort(),t.next=25,z(n,m).then((function(t){return!!t.includes(H.c.accepted)}));case 25:if(!t.sent){t.next=29;break}return n.setStatus(H.c.otherSubsegment),t.abrupt("return",!1);case 29:if(void 0===p){t.next=35;break}return t.next=32,N(p,n.data);case 32:t.t1=t.sent,t.next=36;break;case 35:t.t1=!1;case 36:if(!t.t1){t.next=43;break}return t.next=40,K(e,!1,n);case 40:return t.abrupt("return",t.sent);case 43:return(0,q.cb)()&&(0,rt.Fl)(n),(0,s.info)("Targeting rejected."),n.setStatus(H.c.targetPages),t.abrupt("return",!1);case 47:case"end":return t.stop()}}),t,null,[[11,16]])})));return function(e,n){return t.apply(this,arguments)}}();!function(t){t[t.lastSession=-1]="lastSession",t[t.pastTwoWeeks=15]="pastTwoWeeks",t[t.pastMonth=30]="pastMonth",t[t.pastYear=390]="pastYear"}(W||(W={}));var J=[17,23,18,19,35,1],Q=[17,18,19,21,22,23,25,26,27,30,31,32,35,38,39,47,33,51,52],X=[49,24,34,37,36,19,50,17],tt=function(t){return[].concat((0,r.Z)(J),(0,r.Z)(Q),(0,r.Z)(X)).includes(t)},et=function(t,e){return t.filter((function(t){var e;return null==t||null===(e=t.targeting_groups)||void 0===e?void 0:e.length})).map((function(t){return t.targeting_groups.map((function(t){return t.targetings.map((function(t){return t.targeting_type}))})).reduce((function(t,e){return t.concat(e)}),[])})).reduce((function(t,e){return t.concat(e)}),[]).every((function(t){return!(0,d.kK)(t)&&tt(t)}))&&["codeScope","selectorScope","cookieScope"].every((function(t){var n;return!(null!==(n=e[t])&&void 0!==n&&n.length)}))},nt=n(3948),rt=n(8469),it=n(9267),ot=function(){var t=(0,i.Z)(a().mark((function t(e){var n,r,i,o,c;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,rt.BT)();case 2:return n=t.sent,r=n.endPerfTracking,i=e.data,o=i.id,c=i.targetingMode,(0,s.success)("Targeting OK (campaign ".concat(o,")")),c===V.Cd.waitUntil&&((0,nt.YA)(e),"function"==typeof r&&r("".concat(o,"-ajaxLoopDuration"))),(0,q.cb)()&&(0,rt.Fl)(e),t.abrupt("return",!0);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),at=function(){var t=(0,i.Z)(a().mark((function t(e,n,r,o){var c,l,u,d,p,m;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=o.data,l=c.targetingMode,u=c.audienceTrigger,d=c.audienceSegment,p=c.scopes,m=[u,d].filter((function(t){return void 0!==t})),!(l===V.Cd.waitUntil&&!et(m,p)&&!(0,nt.Sv)())&&(0,it.A)()){t.next=8;break}return(0,s.verbose)("Targeting loop."),o.setStatus(H.c.pending),(0,nt.LL)(o,(0,i.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K(r,!0,o);case 2:if(!t.sent){t.next=7;break}return t.next=6,o.executeCampaign(r);case 6:return t.abrupt("return",!0);case 7:return t.abrupt("return",!1);case 8:case"end":return t.stop()}}),t)})))),t.abrupt("return",!1);case 8:return(0,s.info)("Targeting rejected."),(0,q.cb)()&&(0,rt.Fl)(o),e.some((function(t,e){return t||o.setStatus(n[e]),!t})),t.abrupt("return",!1);case 12:case"end":return t.stop()}}),t)})));return function(e,n,r,i){return t.apply(this,arguments)}}(),st=function(t){t.targeting_groups.forEach((function(t){t.targetings.forEach((function(t){delete t.success}))}))},ct=function(t,e){t.success=e},lt=function(t,e){return t.targeting_groups&&t.targeting_groups.some((function(t){return t.targetings&&t.targetings.some((function(t){return t.targeting_type===e}))}))},ut=n(1155),dt=(n(8669),"DCInfos"),pt={promise:null,resolve:null,reject:null};function mt(){return pt.promise}function ht(){try{var t=sessionStorage.getItem(dt);return!(0,d.kK)(t)&&t.length>0?JSON.parse(t):window.ABTasty.DCInfos}catch(t){return(0,h.Tb)(new Error("Error parsing dcinfos: ".concat(t))),null}}!function(){var t=pt;t.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}();var ft=n(4564),gt=n(5136),vt=function(){var t=(0,i.Z)(a().mark((function t(e){var n,r,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="fetch failed (campaign ".concat(e," will not be able to be checked)"),r=function(){var t=(0,i.Z)(a().mark((function t(e,r,i){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e()){t.next=11;break}return t.prev=1,t.next=4,r();case 4:return t.abrupt("return",!0);case 7:return t.prev=7,t.t0=t.catch(1),(0,s.warning)("".concat(i," ").concat(n)),t.abrupt("return",!1);case 11:return t.abrupt("return",!1);case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n,r){return t.apply(this,arguments)}}(),o=[r((function(){return(0,u.xj)(e)&&(0,d.kK)(ht())}),mt,"DCInfos"),r((function(){return(0,u.fJ)(e)}),C.If,"IP"),r((function(){return(0,u.dT)(e)}),C.Bb,"Geolocation"),r((function(){return(0,u.dN)(e)}),(0,i.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,ft.r)(!0);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),"Parsed UserAgent")],(0,u.Uo)(e)&&o.push((0,q.Pf)()),t.next=7,Promise.all(o);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),bt=function(){var t=(0,i.Z)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("boolean"==typeof window.ABTasty.datalayerEnabled||!e||!lt(e,gt.DATALAYER)){t.next=5;break}return t.next=4,(0,ut.X_)((function(){return"boolean"==typeof window.ABTasty.datalayerEnabled}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},3948:(t,e,n)=>{"use strict";n.d(e,{vY:()=>s,YA:()=>c,Sv:()=>u,LL:()=>d});var r=n(5536),i=n(6080),o=n(6012),a={campaigns:[],timeout:null,lastTimer:r.Th,totalTimeout:0},s=function(){(0,i.kK)(a.timeout)||clearTimeout(a.timeout),a.campaigns=[],a.timeout=null,a.lastTimer=r.Th,a.totalTimeout=0},c=function(t){a.campaigns=a.campaigns.filter((function(e){return e.campaign.getId()!==t.getId()}))},l=function t(){a.timeout=setTimeout((function(){a.campaigns.forEach((function(t){var e=t.campaign,n=t.callback,r=e.getStatus();[o.c.pending,o.c.waitingForSubsegmentCheck].indexOf(r)>-1&&n()})),function(){var t=a.totalTimeout>=r.fr?1e3:a.lastTimer+a.lastTimer*r.rc;a.lastTimer=t,a.totalTimeout+=t}(),a.campaigns.length>0&&t()}),Math.floor(a.lastTimer))},u=function(){return a.totalTimeout>=r._w},d=function(t,e){!function(t,e){a.campaigns.find((function(e){return e.campaign.getId()===t.getId()}))||(a.campaigns[a.campaigns.length]={campaign:t,callback:e},1===a.campaigns.length&&l())}(t,e)}},8469:(t,e,n)=>{"use strict";n.d(e,{BT:()=>c,Y8:()=>u,Fl:()=>d,OP:()=>p});var r=n(5861),i=n(7757),o=n.n(i),a=n(2662),s=n(2022),c=function(){var t=(0,r.Z)(o().mark((function t(){var e,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={endPerfTracking:null,registerPerfTracking:null,sendPerfTracking:null},t.next=4,Promise.resolve().then(n.bind(n,6407));case 4:r=t.sent,e.endPerfTracking=r.endPerfTracking,e.registerPerfTracking=r.registerPerfTracking,e.sendPerfTracking=r.sendPerfTracking;case 8:return t.abrupt("return",e);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l={campaignsMeasured:[]},u=function(){return l.campaignsMeasured=[]},d=function(t){var e=t.getId();if(window.performance&&window.performance.mark&&-1!==l.campaignsMeasured.indexOf(e)&&!t.performanceMeasured){t.performanceMeasured=!0,window.performance.mark("".concat(e,"VerifyTargetingStop"));try{window.performance.measure("".concat(e,"VerifyTargeting"),"".concat(e,"VerifyTargetingStart"),"".concat(e,"VerifyTargetingStop")),window.ABTasty.latency.tgl=window.ABTasty.latency.tgl||{};var n=window.performance.getEntriesByName("".concat(e,"VerifyTargeting"),"measure");window.ABTasty.latency.tgl[e]=n&&n[0]?Math.round(n[0].duration):0}catch(t){}}},p=function(){var t=(0,r.Z)(o().mark((function t(e){var n,r,i,u,d;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c();case 2:n=t.sent,r=n.registerPerfTracking,i=e.data,u=i.id,d=i.targetingMode,(0,s.cb)()&&window.performance&&window.performance.mark&&-1===l.campaignsMeasured.indexOf(u)&&(l.campaignsMeasured.push(u),window.performance.mark("".concat(u,"VerifyTargetingStart"))),"function"==typeof r&&d===a.Cd.waitUntil&&r("".concat(u,"-ajaxLoopDuration"));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},6012:(t,e,n)=>{"use strict";var r;n.d(e,{c:()=>r}),function(t){t.accepted="accepted",t.pending="pending",t.rejected="rejected",t.oneVisitorOneTest="one_visitor_one_test",t.traffic="traffic_rejected",t.timeout="timeout",t.checking="currently_checking",t.otherSubsegment="another_subsegment_already_started",t.targetByEventPending="target_by_event_pending",t.acceptedByRedirection="accepted_by_redirection",t.targetPages="target_pages_rejected",t.qaMode="qa_parameters_rejected",t.audience="audience_rejected",t.trigger="trigger_rejected",t.segment="segment_rejected",t.notChecked="master_campaign_not_checked",t.waitingForSubsegmentCheck="other_subsegment_is_checking",t.screenshotModeRejected="screenshot_mode_rejected",t.consent="campaign_type_rejected_by_consent",t.failedLoading="deferred_loading_failed",t.notPrioritizedYet="not_prioritized_yet",t.geoipConsent="geolocation_rejected_by_consent"}(r||(r={}))},9963:(t,e,n)=>{"use strict";n.r(e),n.d(e,{applyWidgets:()=>w});var r=n(5861),i=n(7757),o=n.n(i),a=n(4284),s=n(1042),c=n(8669),l=n(6049),u=n(1155),d=n(1918),p=n(5951),m=n(5528),h=n(763),f=n(8206),g=n(4564),v=function(){var t=(0,r.Z)(o().mark((function t(e,n,i){var a,s,c,v,b,y,w;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.id,s=e.version,c=e.config,v=e.name,t.next=3,(0,l.Q)();case 3:b=t.sent,y={doWhen:u.VH,jsCookie:d,ABTastyCookie:p.Es,ABTastySessionCookie:m.w,ABTastyLocalStorage:h.T,getGeoloc:f.Si,getParsedUserAgent:g.r,getParsedUserAgentAsync:function(){var t=(0,r.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,g.r)(!0);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},w="!function($, jQuery, HELPERS){ try{const TEST_ID=".concat(i,",PACKAGE='").concat(v,"',VERSION = '").concat(s,"',DATA=").concat(c,",PLUGIN_ID = '").concat(a,"';\n  ").concat(n,'\n  }catch(e){console.log("AB Tasty: error while executing widget for test "+').concat(i,",'").concat(v,"','").concat(s,"',e)}}($, jQuery, HELPERS);"),Function("$","jQuery","HELPERS",w)(b,b,y);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),b=function(t){return!!window.ABTasty.appliedPlugins&&window.ABTasty.appliedPlugins.includes(t)},y=function(t){window.ABTasty.appliedPlugins||(window.ABTasty.appliedPlugins=[]),window.ABTasty.appliedPlugins.push(t)},w=function(){var t=(0,r.Z)(o().mark((function t(e,n){var i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(0,s.info)("applying widgets"),i=(0,a.ae)().widgets,e.forEach(function(){var t=(0,r.Z)(o().mark((function t(e){var r,a,s,l,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.id,a=e.version,s=e.name,!b(r)){t.next=3;break}return t.abrupt("return");case 3:if(null!=(l=i[s])&&null!=l[a]){t.next=6;break}return t.abrupt("return");case 6:if(!(u=l[a]).code){t.next=12;break}return t.next=10,v(e,u.code,n);case 10:t.next=13;break;case 12:(0,c.U)(u.url).then((function(t){return t.text()})).then((function(t){return v(e,t,n)}));case 13:y(r);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},7649:(t,e,n)=>{"use strict";n.d(e,{Y:()=>o,G:()=>s});var r=n(1002),i=n(2242),o="c:abtasty2-izjJRMEi",a=["cookies","improve_products","measure_content_performance"];function s(t,e){var n=function(){var n=t||o;window.Didomi.getUserConsentStatusForVendor(n)&&(t||a.every((function(t){return!!window.Didomi.getUserConsentStatusForPurpose(t)})))&&e()};return function t(){"object"===(0,r.Z)(window.Didomi)&&"function"==typeof window.Didomi.getUserStatus&&"object"===(0,r.Z)(window.didomiEventListeners)&&window.Didomi.getUserStatus()?(n(),window.didomiEventListeners.push({event:"consent.changed",listener:n})):setTimeout(t,i.zn)}(),!1}},2242:(t,e,n)=>{"use strict";n.d(e,{yN:()=>T,RX:()=>y,zn:()=>S});var r=n(2982),i=n(5671),o=n(3144),a=n(7947),s=n(7352),c=n(4284),l=n(5951),u=n(5168);var d=n(1918),p=n.n(d),m={};function h(t,e){m[t]=e}var f=n(1943);var g=n(7649),v=n(1042);function b(t,e){if(t.isAsync)return function(t,e){t.isAsync?new Promise((function(e,n){try{new Function("abResolve",t.value)(e)}catch(t){n(t)}})).then((function(t){return t?(e(),!0):(v.warning("Consent compliancy check: custom code return false"),!1)})).catch((function(t){return v.error("Consent compliancy check: could not execute custom code",t),!1})):Promise.resolve(b(t,e))}(t,e),!1;var n=function(){return e()},r=function(){return new Function(t.value)()};try{if(r())return n(),!0;var i=setInterval((function(){r()&&(clearInterval(i),n())}),500);return h("consentCustomJs",i),!1}catch(t){return v.error("Consent compliancy check: could not execute custom code",t),!1}}var y,w,_=(0,n(4334).B)(),S=200;!function(t){t.start="start",t.test="test",t.perso="perso",t.aa="aa",t.patch="patch",t.redirection="redirection",t.storage="storage",t.collect="collect",t.dmp="dmp",t.geoloc="geoloc"}(y||(y={}));var T=function(){function t(){if((0,i.Z)(this,t),w)return w;var e=(0,c.wy)().waitForConsent,n=e.mode,r=e.campaignRestrictions,o=e.data;this.mode=n,this.data=o,this.isStrict=!!Object.keys(r).length&&!Object.values(r).filter((function(t){return t})).length,this.consentAtInit=l.Es.exists(),this.isListen=!1,this.isValid=!1,window.ABTasty.consentReady=!1,this.consentFor=Object.keys(r).filter((function(t){return r[t]})).map((function(t){return t})),this.isStrict||this.consentFor.push(y.start),w=this,this.shouldListen()?!this.listen()&&this.shouldRevoke()&&this.revoke():this.valid()}return(0,o.Z)(t,[{key:"haveConsentFn",value:function(t){var e=this;return function(){return e.haveConsent(t)}}},{key:"haveConsent",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.values(y);return e.every((function(e){return t.consentFor.includes(e)}))}},{key:"sendConsentHit",value:function(t){var e=l.Es.build(),n={co:t},r={campaignHistory:function(){return e.getCampaignHistory()},visitorId:e.getVisitorId(),currentSessionTimestamp:e.getCurrentSessionTimestamp(),numberOfSessions:e.getNumberOfSessions()};null==_||_.then((function(t){return t.dispatchHit(r)(t.HitType.consent,n)}))}},{key:"emitConsentValidEvent",value:function(){var t=new CustomEvent("consentValid");document.dispatchEvent(t),(0,s.hb)(s.PL.consentValid,{mode:(0,c.wy)().waitForConsent.mode})}},{key:"valid",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.values(y);if(this.isValid=!0,window.ABTasty.consentReady=!0,this.consentFor=[].concat((0,r.Z)(this.consentFor),(0,r.Z)(t)),this.haveConsent([y.storage])){var e=l.Es.build(),n=e.sessionCookie;e.save(),n.save(),u.Jo.migrate()}!this.consentAtInit&&this.isListen&&this.sendConsentHit(!0),this.emitConsentValidEvent(),this.consentAtInit=l.Es.exists(),this.isListen=!1}},{key:"revoke",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.values(y);this.consentFor=this.consentFor.filter((function(e){return!t.includes(e)})),0===this.consentFor.length&&(this.isValid=!1),this.isStrict||this.consentFor.push(y.start),this.haveConsent([y.storage])||(u.Jo.migrate(),l.Es.build().clearAll()),this.sendConsentHit(!1)}},{key:"shouldRevoke",value:function(){return!this.isValid&&l.Es.exists()}},{key:"shouldListen",value:function(){return this.mode===a.n8.userAction&&!l.Es.exists()||![a.n8.thirdParty,a.n8.disabled,a.n8.userAction].includes(this.mode)}},{key:"listen",value:function(){var t=this;if(!this.isListen)switch(this.isListen=!0,this.mode){case a.n8.userAction:return function(t){var e=function e(){document.removeEventListener("mousedown",e,!0),document.removeEventListener("touchmove",e,!0),window.removeEventListener("scroll",e,!0),t()};document.addEventListener("mousedown",e,!0),document.addEventListener("touchmove",e,!0),window.addEventListener("scroll",e,!0)}((function(e){return t.valid(e)})),!0;case a.n8.anyCookie:return function(t){var e=function(){return t()},n=function(){return document.cookie.length>0};if(!n()){var r=setInterval((function(){n()&&(clearInterval(r),e())}),S);return h("consentAnyCookie",r),!1}return e(),!0}((function(e){return t.valid(e)}));case a.n8.specificCookie:return function(t,e){var n=function(){return e()},r=function(){var e=t,n=e.condition,r=e.value,i=e.name,o=p().get(i);if(!o)return!1;switch(Number(n)){case f.o1:return new RegExp(r).test(o);case f.DC:return o.indexOf(r)>-1;case f.xz:default:return o===r}};if(!r()){var i=setInterval((function(){r()&&(clearInterval(i),n())}),S);return h("consentSpecificCookie",i),!1}return n(),!0}(this.data,(function(e){return t.valid(e)}));case a.n8.didomi:return(0,g.G)(this.data,(function(e){return t.valid(e)}));case a.n8.customJs:return b(this.data,(function(e){return t.valid(e)}));default:return this.valid(),!0}}}],[{key:"resetInstance",value:function(){w=null}}]),t}()},83:(t,e,n)=>{"use strict";n.d(e,{w:()=>g});var r=n(5861),i=n(7757),o=n.n(i),a=n(6049),s=n(1155),c=n(1042),l=n(1918),u=n(5951),d=n(5528),p=n(763),m=n(8206),h=n(4564),f=n(8049);function g(t,e,n,r,i){return v.apply(this,arguments)}function v(){return v=(0,r.Z)(o().mark((function t(e,n,i,g,v){var b,y,w,_,S;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}return t.abrupt("return",!1);case 2:return t.prev=2,t.next=5,(0,a.Q)();case 5:return b=t.sent,y={doWhen:s.VH,jsCookie:l,ABTastyCookie:u.Es,ABTastySessionCookie:d.w,ABTastyLocalStorage:p.T,getGeoloc:m.Si,getParsedUserAgent:h.r,campaignId:n,variationId:i,campaign:n?f.lT.instanciate(n):void 0,getParsedUserAgentAsync:function(){var t=(0,r.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,h.r)(!0);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},w=(w=e).replace(/\$\.doWhen/g,"HELPERS.doWhen"),_=void 0===b?new Function("HELPERS","abResolve",w)(y,!!v&&v.resolve):new Function("$","jQuery","HELPERS","abResolve",w)(b,b,y,!!v&&v.resolve),t.abrupt("return",_);case 13:return t.prev=13,t.t0=t.catch(2),S=void 0!==n?void 0!==i?"Campaign ".concat(n," | Variation ").concat(i):"Campaign ".concat(n):void 0!==g?"Script fragment: Additional information ".concat(g):"Global Script",(0,c.warning)("".concat(S," - Error during custom code execution (or code targeting)"),t.t0),t.abrupt("return",!(!v||!v.reject)&&v.reject(t.t0));case 18:case"end":return t.stop()}}),t,null,[[2,13]])}))),v.apply(this,arguments)}},9548:(t,e,n)=>{"use strict";n.d(e,{kb:()=>s,aO:()=>l,EF:()=>c});let r=t=>crypto.getRandomValues(new Uint8Array(t)),i=(t,e)=>((t,e,n)=>{let r=(2<<Math.log(t.length-1)/Math.LN2)-1,i=-~(1.6*r*e/t.length);return()=>{let o="";for(;;){let a=n(i),s=i;for(;s--;)if(o+=t[a[s]&r]||"",o.length===e)return o}}})(t,e,r);var o=n(6080),a=null;function s(){(0,o.kK)(l())||c();var t=i("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",8);a=t()}var c=function(){return a=null},l=function(){return a}},3422:(t,e,n)=>{"use strict";n.r(e),n.d(e,{mainTag:()=>It});var r=n(4942),i=n(5861),o=n(1002),a=n(7757),s=n.n(a),c=n(6044),l=n(1042),u=n(8194),d=n(2982),p=n(1918),m=n(4284),h=n(8049),f=n(5951),g=n(2242),v=(n(6845),n(2084)),b=document.location.href,y=!1,w=[];function _(t){w.push(t),y||(y=!0,setInterval((function(){document.location.href!==b&&((0,l.info)("Url change detected","".concat(w.length," callback to apply")),b=document.location.href,w.forEach((function(t){return t()})))}),50))}var S=n(2022),T=n(262),k=n(1155),C=n(7352),x=n(6080),E=n(4334),A=(0,E.B)(),I=function(t){return function(e,n){var r=e.deprecate,i=e.new,o=void 0===i?null:i,a=e.type,s="".concat(a," ").concat(r," is deprecated")+(o?" - Please use ".concat(o," instead."):"");if((0,l.warning)(s),n){var c={cid:T.J,ec:"Deprecated Usage",ea:(0,m.Nn)(),el:r.replace("window.","")};null==A||A.then((function(e){return e.dispatchHit(t)(e.HitType.event,c)}))}}},$=function(){var t={};return function(e){return function(n){t[n.deprecate]?I(e)(n,!1):(I(e)(n,!0),t[n.deprecate]=n)}}}(),P=n(5536),O=n(9548),N=n(8206),B=n(4564),D=n(7806),R=n(83),L=n(9267),M=n(4692);var W=n(6012),j=n(8302),V=n(838),H={abtasty_editor:"https://teddytor.abtasty.com",abtasty_editor_local:"https://local.editorv3.abtasty.com",abtasty_editor_preprod:"https://preprod-editorv3.abtasty.com"};function F(){return Object.keys(H).find((function(t){return(0,v.gy)(t)&&(0,v.re)(t)}))}function U(){var t=F();if(t){var e=(0,v.re)(t);e?(0,V.u)(H[t]+"/editor.php?testID="+e):(0,l.warning)("The tag could not find which testID the editor should use")}else(0,l.warning)("The tag could not find which editor to launch")}var z={prod:"https://app.abtasty.com",local:"https://local.app.abtasty.com",preprod:"https://preprod-app.abtasty.com"};function q(){var t=Object.keys(z).find((function(t){return(0,v.z3)("env")===t}))||"prod";if(t)try{var e={testId:0,variationId:h.uG.Original};(0,v.z3)("testId")&&(0,v.z3)("variationId")?e={testId:Number((0,v.z3)("testId")),variationId:Number((0,v.z3)("variationId"))}:null!==sessionStorage.getItem("ABTastyPreview")&&(e=JSON.parse(sessionStorage.getItem("ABTastyPreview")));var n=z[t];n+="/ready/previewVariation.php?testID=".concat(e.testId),n+="&variationID=".concat(e.variationId),n+=null!=(0,v.z3)("hideBar")?"&hideBar=true":"",n+=(0,v.z3)("disabledModifications")?"&disabledModifications=".concat((0,v.z3)("disabledModifications")):"",(0,V.u)(n)}catch(t){var r="Preview mode error";return(0,c.Tb)(new Error(r)),(0,l.error)(r,t),!1}else(0,l.warning)("The tag could not find which preview to launch")}var G=n(5528),Z=n(1748),K=n(3948),Y=n(8469),J=n(885),Q=n(5168),X=n(7787),tt=function(t){var e=function(t){return!t&&"object"!==(0,o.Z)(t)||!Object.values(t).every((function(t){return"string"==typeof t}))}(t);if(e)!function(t){l.warning("'CustomIdentities' cannot be set, format is not correct. It should be a dict of {string: string}",t)}(t);else{!function(t){if(t||"object"===(0,o.Z)(t)){var e=JSON.parse(Q.Jo.getItem(Q.vR,X.I.CUSTOM_IDENTITIES))||{},n=t;Object.entries(n).forEach((function(t){var n=(0,J.Z)(t,2),r=n[0],i=n[1];(0,x.kK)(i)||(e[r]=i)})),Q.Jo.setItem(Q.vR,X.I.CUSTOM_IDENTITIES,JSON.stringify(e))}}(t);var n=C.PL.identityAdded;(0,C.hb)(n)}},et=function(){window.abtasty=window.abtasty||{},window.abtasty.addCustomIdentity=tt};function nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function rt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nt(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var it=(0,E.B)(),ot=!1;function at(){return F()?U:"preview"===(0,v.rD)(document.location.href,!0).ab_project||"undefined"!=typeof sessionStorage&&void 0!==sessionStorage.ABTastyPreview&&null!=sessionStorage.ABTastyPreview?q:ct}function st(){return!!F()||!window.ABTasty.started&&!function(){if((0,S.Sq)())return!0;var t=(0,v.J5)(),e=t.abtastyeditorlock,n=t.abtastyoptout,r=!1;try{r=null!=e||null!=window.top.ABTASTY_S}catch(t){}return null!=n?(p.set("ABTastyOptout","1",{expires:388}),!0):!(!p.get("ABTastyOptout")&&!r)}()}function ct(){window.lockABTastyTag?new Promise((function(t){window.unlockABTasty=function(){delete window.lockABTastyTag,t(!0)}})).then(pt):(0,m.zu)()?(0,l.warning)("[ABTasty quota limit reached]"):(0,m.MA)()?setTimeout(pt,0):pt()}function lt(){return Object.values(h.lT.getActiveCampaigns()).some((function(t){return t.heatmap}))}function ut(t){!function(t){return function(e,n){try{if(0===e.length||0===n.length)return!1;if(n.join(".").indexOf(e.join("."))>-1)throw"Can't deprecate variable from itself";var r=e.length,i=e.slice(0,r-1),o=e[r-1];return Object.defineProperty((0,x.ET)(i,window),o,{get:function(){return $(t)({deprecate:"window.".concat(e.join(".")),new:"window.".concat(n.join(".")),type:"variable"}),(0,x.ET)(n,window)}}),!0}catch(t){var a="Failed to deprecate window.".concat(e.join(".")," variable.");return(0,c.Tb)(new Error(a)),(0,l.error)(a),!1}}}(t)(["ABTasty","cnilReady"],["ABTasty","consentReady"])}function dt(t){window.addEventListener("pageshow",(function(e){e.persisted&&t()}))}function pt(){return mt.apply(this,arguments)}function mt(){return mt=(0,i.Z)(s().mark((function t(){var e,r,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=new g.yN,r=f.Es.build(),ut(o={campaignHistory:function(){return r.getCampaignHistory()},visitorId:r.getVisitorId(),currentSessionTimestamp:r.getCurrentSessionTimestamp(),numberOfSessions:r.getNumberOfSessions()}),e.haveConsent([g.RX.start])){t.next=7;break}return t.next=7,(0,k.X_)(e.haveConsentFn([g.RX.start]));case 7:(0,l.info)("Main process started..."),window.ABTasty.started=!0,window.ABTasty.results={},(0,C.nZ)(),window.ABTasty.getParsedUserAgent=function(){return $(o)({deprecate:"getParsedUserAgent",new:"getParsedUserAgentAsync",type:"function"}),(0,B.r)()},window.ABTasty.omnitureProcessed=!1,window.ABTasty.getTestsOnPage=h.lT.getActiveCampaigns,window.ABTastyStartTest=h.lT.abTastyStartTest(r),window.ABTastyReload=function(){(0,l.info)("Tag reloading from ABTastyReload"),gt(r)(!0)},window.ABTastyPageView=function(){(0,l.info)("Tag reloading from ABTastyPageView"),$(o)({deprecate:"ABTastyPageView",new:"ABTastyReload",type:"function"}),gt(r)(!0)},ht().then(function(){var t=(0,i.Z)(s().mark((function t(r){var a,c,l,u,d,p,h,f;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(0,Z.t)(r),(0,m.aD)(),(0,N.MH)(),(0,B.r)(),a=n(3285),c=a.start,(0,k.VH)(e.haveConsentFn([g.RX.collect]),c),null==it||it.then((function(t){return t.setGlobals(r)})),l=n(8658),u=l.isScreenshotMode,d=l.startScreenshotMode,p=n(565),h=p.fetchHeatmapQuotaAndRight,u()&&d(r),(0,k.VH)(lt,(0,i.Z)(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:t.sent&&(null==it||it.then((function(t){return t.listenToEvents(o)})));case 4:case"end":return t.stop()}}),t)})))),(0,m.wy)().ajaxAutoReload&&_((function(){return gt(r)(!0)})),dt((function(){return gt(r)(!0)})),gt(r)(),(0,S.cb)()&&(f=setTimeout((function(){null==it||it.then((function(t){return t.dispatchHit(o)(t.HitType.performance,{})}))}),5e3),(0,D.tI)("performanceLoop",f)),et();case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){(0,l.warning)(t)}));case 18:case"end":return t.stop()}}),t)}))),mt.apply(this,arguments)}function ht(){return ft.apply(this,arguments)}function ft(){return(ft=(0,i.Z)(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=f.Es.build(),t.abrupt("return",new Promise((function(t,n){(0,k.X_)((function(){return""!==e.getVisitorId()})).then((function(){window.ABTasty.visitor={id:e.getVisitorId()},t(e)}))})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var gt=function(t){return function(){var e=(0,i.Z)(s().mark((function e(){var r,i,o,a=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a.length>0&&void 0!==a[0]&&a[0],i={campaignHistory:function(){return t.getCampaignHistory()},visitorId:t.getVisitorId(),currentSessionTimestamp:t.getCurrentSessionTimestamp(),numberOfSessions:t.getNumberOfSessions()},null==it||it.then((function(t){return t.dispatchBatch(i)()})),Promise.resolve().then(n.bind(n,6734)).then((function(t){return t.rollback()})),document.dispatchEvent(new CustomEvent(P.do)),(0,j.p)(),h.lT.resetCampaigns(),(0,M.WJ)(),(0,O.EF)(),(0,O.kb)(),r&&((0,K.vY)(),(0,D.iG)(),(0,Y.Y8)(),o=n(6407),(0,o.resetPerfTracking)(),new G.w(!0),(0,C.WO)([C.PL.executedCampaign,C.PL.tagContentExecuted])),(0,m.wy)().ajaxAutoReload&&(window.ABTasty.urlHistory={previous:window.ABTasty.urlHistory&&window.ABTasty.urlHistory.current?window.ABTasty.urlHistory.current:document.referrer,current:document.location.href}),window.ABTasty.results={},window.ABTasty.omnitureProcessed=!1,ot||(ot=!0,bt(t));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()};function vt(t,e){var n=Object.keys(t);return Object.keys(e).reduce((function(t,r){if("0"===r)return t;var i=e[r].reduce((function(t,e){var r=e.children;return r&&r.some((function(t){return n.includes(t.toString())&&("mpp"===e.sub_type||"mep"===e.sub_type)}))?[].concat((0,d.Z)(t),[e.id]):t}),[]);return[].concat((0,d.Z)(t),(0,d.Z)(i))}),[])}function bt(t){return yt.apply(this,arguments)}function yt(){return(yt=(0,i.Z)(s().mark((function t(e){var n,r,i,o,a,c,l,u,p,g,v,b,y,w,_,S;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(f.Es.cookieReady){t.next=3;break}return setTimeout((function(){return bt(e)}),16),t.abrupt("return");case 3:return ot=!1,e.pageView(),wt(n={campaignHistory:function(){return e.getCampaignHistory()},visitorId:e.getVisitorId(),currentSessionTimestamp:e.getCurrentSessionTimestamp(),numberOfSessions:e.getNumberOfSessions()}),t.next=9,null==it?void 0:it.then((function(t){return t.dispatchHit(n)(t.HitType.pageview,{})}));case 9:if((0,T.B)(n),(0,M.FU)(),r=(0,m.wy)(),!r.globalCode.includes("abtasty.send")){t.next=17;break}return t.next=15,null==it?void 0:it.then((function(){return _t()}));case 15:t.next=18;break;case 17:_t();case 18:if(i=h.lT.getCampaignsDatas,o=h.lT.getCampaignsSortedByPrio,a=h.lT.filterCampaignByPrio,c=i(),l=o(c),!((u=vt(e.getCampaignHistory(),l)).length>0)){t.next=29;break}return p=a(l,"0"),g=p?p.map((function(t){return t.id})):[],t.next=27,kt(e)([].concat((0,d.Z)(g),(0,d.Z)(u)));case 27:t.next=43;break;case 29:v=0,b=Object.keys(l);case 30:if(!(v<b.length)){t.next=43;break}return y=b[v],w=a(l,y),_=w.map((function(t){return t.id})),t.next=36,kt(e)(_);case 36:if(S=t.sent,!(_.length>0&&S||!1)||"0"===y){t.next=40;break}return t.abrupt("break",43);case 40:v++,t.next=30;break;case 43:(0,L.A)((function(){return(0,C.hb)(C.PL.tagContentExecuted)}));case 44:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function wt(t){var e=function(t){return t.reduce((function(t,e){var n=e.method,i=e.url,o=e.category,a=e.action;return(0,v.rl)(n,i)?rt(rt({},t),{},(0,r.Z)({},o,a)):t}),{})}((0,m.ae)().customVariables||[]);if(Object.keys(e).length>0){var n={s:e};null==it||it.then((function(e){return e.dispatchHit(t)(e.HitType.segment,n)}))}}function _t(){var t,e=(0,m.wy)(),n=e.globalCode,r=e.globalCodeOnDocReady,i=(0,m.S3)(),o=""!==n,a=i&&i.length>0;if(o||a){var s="accountGlobalCode";(0,S.cb)()&&null!==(t=window.performance)&&void 0!==t&&t.mark&&window.performance.mark("".concat(s,"Start")),o&&(r?((0,L.A)((function(){return(0,R.w)(n)})),(0,S.cb)()&&c()):((0,R.w)(n),(0,S.cb)()&&c())),a&&((0,L.A)((function(){i.filter((function(t){return t.onDocumentReady})).forEach((function(t){(0,R.w)(t.code,null,null,t.id)}))})),i.filter((function(t){return!t.onDocumentReady})).forEach((function(t){(0,R.w)(t.code,null,null,t.id)})))}function c(){var t;if(null!==(t=window.performance)&&void 0!==t&&t.mark){window.performance.mark("".concat(s,"Stop")),window.performance.measure(s,"".concat(s,"Start"),"".concat(s,"Stop"));var e=window.performance.getEntriesByName(s,"measure");window.ABTasty.latency.gca=e&&e[0]?e[0].duration:null}}}var St=function(t){return(new g.yN).haveConsent([g.RX[t]])},Tt=function(t){return function(){var e=(0,i.Z)(s().mark((function e(n,r,i){var o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new g.yN,n.setStatus(i),(0,k.VH)(o.haveConsentFn([g.RX[r]]),(function(){return n.apply(t)})),e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},kt=function(t){return function(){var e=(0,i.Z)(s().mark((function e(n){var r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,l.info)("Starting ".concat(n.length," campaigns: ").concat(n)),r=n.map(h.lT.instanciate),i=r.reduce((function(e,n){if(n.isContainer()){n.setStatus(W.c.notChecked);var r=n.getChildren().map(h.lT.instanciate).map((function(e){return St(e.getConsentType())?((0,l.info)("----- child campaign::",e.getType()),e.apply(t)):Tt(t)(e,e.getConsentType(),W.c.consent)}));return[].concat((0,d.Z)(e),(0,d.Z)(r))}return St(n.getConsentType())?((0,l.info)("campaign::",n),[].concat((0,d.Z)(e),[n.apply(t)])):[].concat((0,d.Z)(e),[Tt(t)(n,n.getConsentType(),W.c.consent)])}),[]),e.abrupt("return",Promise.all(i).then((function(t){return t.some((function(t){return!!t}))})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ct=n(8634);function xt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Et(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xt(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function At(){var t=(0,m.ae)();(0,u.vs)()&&(0,u.SD)()&&function(){try{if(!(0,m.wy)().accountIframeException&&window.parent!==window&&"object"===(0,o.Z)(window.parent.ABTasty)&&window.parent.ABTasty.accountData.accountSettings.identifier===(0,m.wy)().identifier)return!1}catch(t){}return!0}()&&(l.info("Starting execution...",t),window.ABTasty=window.ABTasty||{accountData:t,getAccountSettings:function(){return(0,m.wy)()},getGeoloc:function(){return(0,N.Si)()},getParsedUserAgentAsync:function(){var t=(0,i.Z)(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,B.r)(!0);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),pendingRedirection:!1,pendingUAParser:!0,started:!1,latency:{},consentReady:!1,tagInfos:Et({commitHash:"b636cacb",enabledFlagshipExperiments:[].filter((function(t){return!1!==t.value}))},{})},window.abtasty=window.abtasty||{},(0,Ct.Rk)(),st()&&at()())}l.warning("Sentry calls disabled");var It=function(){return(0,c.Do)((function(){At()}))}},1748:(t,e,n)=>{"use strict";n.d(e,{GD:()=>f,t:()=>p,k9:()=>u});var r=n(5861),i=n(7757),o=n.n(i),a=n(838),s=n(2084),c=n(6012),l={abtasty_qa_assistant:"prod",abtasty_qa_assistant_staging:"staging",abtasty_qa_assistant_local:"local"},u=Object.keys(l),d={prod:"https://qa-assistant.abtasty.com",staging:"https://staging-qa-assistant.abtasty.com",local:"https://local-qa-assistant.abtasty.com:5000"};function p(t){return m.apply(this,arguments)}function m(){return(m=(0,r.Z)(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:v(e),f()&&g(e);case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(){return Object.keys(l).find((function(t){return!!(0,s.re)(t)}))}function f(){return!(!h()&&!sessionStorage.getItem("AB_TASTY_QA_ASSISTANT_ENV"))}function g(t){if(!window.frames.ABTastyQaAssistant){var e=function(){var t=h();return sessionStorage.getItem("AB_TASTY_QA_ASSISTANT_ENV")||t&&l[t]||"prod"}(),n=d[e];window.ABTastyQAAChangeVariation=function(t){return function(e,n){t.campaignView(e,n,c.c.accepted)}}(t),(0,a.u)("".concat(n,"/").concat("bundle.js")),sessionStorage.setItem("AB_TASTY_QA_ASSISTANT_ENV",e)}}function v(t){var e={q:!1,a:!1},n=Object.keys(e),r=function(r){(r.altKey||r.ctrlKey)&&n.includes(r.key.toLocaleLowerCase())&&(e[r.key.toLocaleLowerCase()]=!0),Object.values(e).every((function(t){return t}))&&g(t)},i=function(t){n.includes(t.key)&&(e[t.key]=!1)},o=function(){document.removeEventListener("keydown",r,!1),document.removeEventListener("keyup",i,!1)};return o(),document.addEventListener("keydown",r,!1),document.addEventListener("keyup",i,!1),o}},8658:(t,e,n)=>{"use strict";n.r(e),n.d(e,{isScreenshotMode:()=>d,startScreenshotMode:()=>p});var r=n(885),i=n(838),o=n(1155),a="ab_heatmap_screenshot",s="https://retake-heatmap.abtasty.com",c=s||s,l=new URLSearchParams(window.location.search).get(a),u=function(){return sessionStorage.getItem(a)},d=function(){return(null!==l||u())&&window.opener&&window.opener!==window},p=function(t){(0,o.VH)((function(){return Object.keys(window.ABTasty.results).length>0}),(function(){var e=null!==l?l.split("_"):JSON.parse(u()),n=(0,r.Z)(e,2),o=n[0],s=n[1];o&&s&&sessionStorage.setItem(a,JSON.stringify([o,s])),function(t){return function(e,n){t.removeCampaign(e),window.ABTastyStartTest(e,n),(0,i.u)("".concat(c,"/script.js"))}}(t)(o,s)}))}},4006:(t,e,n)=>{"use strict";n.d(e,{o:()=>c,y:()=>d});var r=n(2084),i=n(5946),o=n(6044),a=n(1042);function s(t){return void 0!==t.favorite_url_id}function c(t){var e=t.urlScopes,n=t.favoriteUrlScopeConditions;try{var r=e.filter((function(t){return!t.include})),c=e.filter((function(t){return t.include}));return!r.some((function(t){return s(t)?u(t,n):(0,i.Z)(t)}))&&(!!c.some((function(t){return s(t)?u(t,n):(0,i.Z)(t)}))||0===c.length)}catch(t){var l="Scope error (CurrentFavoriteUrlCondition)";return(0,o.Tb)(new Error(l)),a.error(l,e),!1}}function l(t,e){var n=t.url,i=t.operator;return(0,r.rl)(i,n,e)}function u(t,e){var n=t.favorite_url_id;return d(e.filter((function(t){return t.favorite_url_id===n})))}function d(t,e){var n=t.filter((function(t){return!t.include})),r=t.filter((function(t){return t.include}));return!n.some((function(t){return l(t,e)}))&&(!!r.some((function(t){return l(t,e)}))||0===r.length)}},5946:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u,l:()=>d});var r,i=n(4942),o=n(1042),a=n(6044),s=n(2084),c=n(1943),l=(r={},(0,i.Z)(r,c.xz,"equals"),(0,i.Z)(r,c.DC,"contains"),(0,i.Z)(r,c.o1,"regexp"),(0,i.Z)(r,c.BH,"ignore_parameters"),r);function u(t){var e=t.value,n=t.condition;return(0,s.rl)(l[n],e)}function d(t){try{var e=t.filter((function(t){return!t.include})),n=t.filter((function(t){return t.include}));return!e.some(u)&&(!!n.some(u)||0===n.length)}catch(e){var r="Scope error (currentUrl)";return(0,a.Tb)(new Error(r)),o.error(r,t),!1}}},4334:(t,e,n)=>{"use strict";n.d(e,{B:()=>i});var r=n(1042),i=function(){try{return n.e(142).then(n.bind(n,438))}catch(t){return r.error("Analytics/Collect module failed to be loaded asynchronously.",t),null}}},3555:(t,e,n)=>{"use strict";n.d(e,{RH:()=>a,f_:()=>l,s6:()=>u});n(7757),n(8669),n(4284);var r=n(6044),i=n(5168);var o="ABTastyAllocation",a="0",s={dynAllocWait:{promise:null,resolve:null,reject:null}};function c(){var t=s.dynAllocWait;t.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}function l(){return s.dynAllocWait.promise}function u(){var t=void 0;try{t=JSON.parse(i.Jo.getItem(i.vR,o))}catch(t){(0,r.Tb)(new Error("Error parsing allocations data: ".concat(t)))}return t}c()},8206:(t,e,n)=>{"use strict";n.d(e,{MH:()=>b,Si:()=>y,Bb:()=>_,If:()=>S,vz:()=>w});var r=n(5861),i=n(5671),o=n(3144),a=n(7757),s=n.n(a),c=n(8669),l=n(2022),u=n(6044),d=n(7806),p=n(5168),m=n(6080),h="ABTastyGeoloc",f=function(){function t(e,n){(0,i.Z)(this,t),this.name=e,this.state=n,this.createWaitPromise()}return(0,o.Z)(t,[{key:"resetState",value:function(){var t,e;null===(t=(e=this.state.wait).reject)||void 0===t||t.call(e,"".concat(this.name," service state is being reset")),this.state.wait={promise:null,resolve:null,reject:null},this.state.data=null,this.createWaitPromise()}},{key:"createWaitPromise",value:function(){var t=this.state.wait;t.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}},{key:"getWaitPromise",value:function(){return this.state.wait.promise}},{key:"getData",value:function(){try{return(0,m.kK)(this.state.data)?JSON.parse(p.Jo.getItem(p.vR,h)):this.state.data}catch(t){return(0,u.Tb)(new Error("Error parsing ".concat(this.name,": ").concat(t))),null}}},{key:"setData",value:function(t){this.state.data=t,p.Jo.setItem(p.vR,h,JSON.stringify(t))}},{key:"fetch",value:function(){var t=(0,r.Z)(s().mark((function t(){var e,n,r,i,o,a=this,f=arguments;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=f.length>0&&void 0!==f[0]?f[0]:{weather:!1},(this.state.isNotFilled||m.kK)(this.getData())){t.next=5;break}return(0,m.kK)(this.state.data)&&(this.state.data=JSON.parse(p.Jo.getItem(p.vR,h))),null===(r=(i=this.state.wait).resolve)||void 0===r||r.call(i,!0),t.abrupt("return");case 5:return(0,l.cb)()&&null!==(e=window.performance)&&void 0!==e&&e.mark&&window.performance.mark("".concat(this.name,"Start")),this.state.wait.promise||this.createWaitPromise(),o=setTimeout((function(){(0,m.kK)(a.getData())&&a.serviceFailure()}),this.state.service.timeout),(0,d.tI)(this.state.service.timeoutName,o),t.next=11,(0,c.v)(this.state.service.route,n).then((function(t){return t.json()})).then((function(t){var e,n,r;if(a.setData(t),(0,l.cb)()&&null!==(e=window.performance)&&void 0!==e&&e.mark){window.performance.mark("".concat(a.name,"End")),window.performance.measure("".concat(a.name,"Timing"),"".concat(a.name,"Start"),"".concat(a.name,"End"));var i=window.performance.getEntriesByName("".concat(a.name,"Timing"));window.ABTasty.latency.geolocTiming=i&&i[0]?i[0].duration:null}return null===(n=(r=a.state.wait).resolve)||void 0===n||n.call(r,!0),(0,d.MH)(a.state.service.timeoutName),!0})).catch((function(t){var e,n;return a.serviceFailure(),null===(e=(n=a.state.wait).reject)||void 0===e||e.call(n,"An error occurred on ".concat(a.name," service: ").concat(t)),(0,u.Tb)(new Error("Error while fetching ".concat(a.name," data: ").concat(t))),!1}));case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"serviceFailure",value:function(){var t,e;sessionStorage.setItem(h,""),null===(t=(e=this.state.wait).reject)||void 0===t||t.call(e,"".concat(this.name," service failure")),(0,d.MH)(this.state.service.timeoutName)}}]),t}(),g=new f("geoloc",{wait:{promise:null,resolve:null,reject:null},data:null,isNotFilled:function(t){return!(null!=t&&t.country_name)},service:{timeout:3e3,timeoutName:"geolocFetchLoop",route:"//dcinfos-cache.abtasty.com/v1/geoip"}}),v=new f("ip",{wait:{promise:null,resolve:null,reject:null},data:null,service:{timeout:3e3,timeoutName:"ipFetchLoop",route:"//dcinfos-cache.abtasty.com/v1/geoip"}}),b=function(){return g.fetch({weather:!1})},y=function(){return g.getData()},w=function(){var t;return null===(t=v.getData())||void 0===t?void 0:t.ip_address},_=function(){return g.getWaitPromise()},S=function(){return v.getWaitPromise()}},565:(t,e,n)=>{"use strict";n.r(e),n.d(e,{fetchHeatmapQuotaAndRight:()=>c});var r=n(5861),i=n(7757),o=n.n(i),a=n(8669),s=n(6044);function c(){return l.apply(this,arguments)}function l(){return(l=(0,r.Z)(o().mark((function t(){var e,n,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=!1,n=window.ABTasty.accountData.accountSettings.identifier,t.prev=2,t.next=5,(0,a.U)("".concat("https://heatmap-quota.abtasty.com","?key=").concat(n));case 5:return r=t.sent,t.next=8,r.text();case 8:t.t0=t.sent.trim(),e="OK"===t.t0,t.next=16;break;case 12:t.prev=12,t.t1=t.catch(2),e=!1,(0,s.Tb)("Error while fetchting heatmap quota on this URL ".concat("https://heatmap-quota.abtasty.com"," and with this identifier ").concat(n,": ").concat(t.t1));case 16:return t.abrupt("return",e);case 17:case"end":return t.stop()}}),t,null,[[2,12]])})))).apply(this,arguments)}},4564:(t,e,n)=>{"use strict";n.d(e,{r:()=>y,K:()=>w});var r=n(5861),i=n(7757),o=n.n(i),a=n(2022),s=n(1042),c=n(6044),l=n(8669),u=n(6080),d=n(7806),p=n(5168),m=void 0,h="ABTastyUA",f=3e3,g="userAgentFetchLoop",v="//dcinfos-cache.abtasty.com/v1/ua-parser",b=function(){window.ABTasty.pendingUAParser=!1,sessionStorage.setItem(h,""),(0,d.MH)(g)},y=function(t){var e={request:void 0,ua:void 0};return function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r&&(e.request=void 0,e.ua=void 0,p.Jo.removeItem(p.vR,h)),e.ua)return window.ABTasty.pendingUAParser=!1,e.ua;if(!p.Jo.getItem(p.vR,h)){var i=function(t){t&&p.Jo.setItem(p.vR,h,JSON.stringify(t)),e.ua=t};return n?(e.request||(e.request=t.apply(m)),e.request.then((function(t){return i(t),t}))):(e.request||(e.request=t.apply(m,[i])),e.ua)}window.ABTasty.pendingUAParser=!1;try{var o=JSON.parse(p.Jo.getItem(p.vR,h));return e.ua=o,e.ua}catch(t){return(0,s.warning)("Error while parsing UserAgent from sessionStorage: ".concat(t)),e.ua}}}(function(){var t=(0,r.Z)(o().mark((function t(){var e,n,r,i,s=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>0&&void 0!==s[0]?s[0]:function(){},window.ABTasty.pendingUAParser=!0,r=function(){try{return new AbortController}catch(t){(0,c.Tb)(t)}}(),(0,a.cb)()&&null!==(e=window.performance)&&void 0!==e&&e.mark&&window.performance.mark("userAgentStart"),i=setTimeout((function(){void 0===y()&&(null==r||r.abort(),b())}),f),(0,d.tI)(g,i),t.next=8,(0,l.v)(v,{ua:navigator.userAgent},{signal:null==r?void 0:r.signal}).then((function(t){return t.json()})).then((function(t){var e;if(window.ABTasty.pendingUAParser=!1,(0,a.cb)()&&null!==(e=window.performance)&&void 0!==e&&e.mark){window.performance.mark("userAgentEnd"),window.performance.measure("userAgentTiming","userAgentStart","userAgentEnd");var r=window.performance.getEntriesByName("userAgentTiming");window.ABTasty.latency.userAgentTiming=r&&r[0]?r[0].duration:null}return(0,d.MH)(g),n(t),t})).catch((function(t){b(),(0,c.Tb)(new Error("Error while fetching userAgentParser data: ".concat(t))),n(void 0)}));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()),w=function(){var t=(0,r.Z)(o().mark((function t(){var e,n,r,i=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=i.length>0&&void 0!==i[0]&&i[0],n=i.length>1?i[1]:void 0,!e){t.next=8;break}return t.next=5,y(e);case 5:t.t0=t.sent,t.next=9;break;case 8:t.t0=y(e);case 9:if(r=t.t0,0!==n.length){t.next=12;break}return t.abrupt("return",[r]);case 12:return t.abrupt("return",n.map((function(t){return(0,u.ET)(t.split("."),r)})));case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},3285:(t,e,n)=>{"use strict";n.r(e),n.d(e,{start:()=>o});var r=n(838),i=n(4284);function o(){var t=(0,i.wy)().sessionRecordingRights,e=(0,i.rH)();t&&e&&e.length>0&&(0,r.u)("https://sr-tag.abtasty.com/abtasty.js")}},5951:(t,e,n)=>{"use strict";n.d(e,{Es:()=>z});var r,i=n(1002),o=n(885),a=n(5671),s=n(3144),c=n(4942),l=n(2662),u=n(4386),d=n(1918),p=n(4284),m=n(5528),h=n(1042),f=n(6080),g=n(6044),v=n(2084),b=n(763);!function(t){t.get="get",t.set="set"}(r||(r={}));var y="ABTasty",w=[],_="try.abtasty.com",S="".concat(_,"/cross-domain-iframe.html"),T='[src*="'.concat(S,'"]');function k(){return new Promise((function(t,e){if(document.querySelectorAll(T).length>0)t();else{window.addEventListener("message",E,!1);var n=document.createElement("iframe");n.src="".concat(document.location.protocol,"//").concat(S),n.onload=function(){t()},n.setAttribute("frameborder","0"),n.style.width="0",n.style.height="0",n.style.display="none",document.head.insertBefore(n,document.head.childNodes[0])}}))}function C(t){return new Promise((function(e,n){k().then((function(){x({key:y,value:t,identifier:(0,p.Nn)(),method:r.set})}))}))}function x(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){var n={resolve:e,name:t.key};w.push(n)}var r=document.querySelector(T).contentWindow;r.postMessage(JSON.stringify(t),"*")}function E(t){if(!(t.origin.indexOf(_)<0)&&t.data){var e=JSON.parse(t.data),n=w.find((function(t){return t.name===e.key}));return n&&n.resolve&&n.resolve(e),!1}}var A=n(1438),I=n(8194),$=n(1155),P=n(5168),O=n(2533),N=n(2982),B=n(2022);function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach((function(e){(0,c.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var L,M,W,j=function(t,e){return e.split("&").map((function(t){return t.split("=")})).map((function(t){var e=(0,o.Z)(t,2);return[e[0],e[1]]})).reduce((function(e,n){var r=(0,o.Z)(n,2),i=r[0],a=r[1];return R(R({},e),{},(0,c.Z)({},i,function(e){var n=t.find((function(t){return t.key===e}));return n?"th"===e?function(t){return t}:n.typeCast:function(){}}(i)(decodeURI(a))))}),{})},V=function(t){try{var e=document.cookie.match(/ABTasty=([^;]+)/g);if(e&&e.length>1){var n=e.map((function(t){return t.replace(/^ABTasty=/,"")})).map((function(t){return unescape(t)})).map((function(e){return j(t,e)})),r={};return t.forEach((function(t){var e=t.key,i=n.reduce((function(t,n){return(0,f.kK)(n[e])?t:[].concat((0,N.Z)(t),[n[e]])}),[]);if(i.every((function(t){return t===i[0]})))r[e]=i[0];else switch(e){case"uid":r[e]=function(t){t.sort((function(t,e){return t.fst-e.fst}));var e=t.filter((function(t){return t.fst>=0}));return e.length>0?e[0].uid:t[0].uid}(n);break;case"pst":var o=i.some((function(t){return t>=0}));r[e]=o?Math.min.apply(Math,(0,N.Z)(i.filter((function(t){return t>=0})))):i[0];break;case"fst":r[e]=Math.min.apply(Math,(0,N.Z)(i));break;case"cst":case"ns":case"pvt":case"pvis":r[e]=Math.max.apply(Math,(0,N.Z)(i));break;case"th":r[e]=function(t){var e={};return t.forEach((function(t){t.split("_").forEach((function(t){var n=t.split(".")[0];Object.keys(e).indexOf(n)<0&&(e[n]=t)}))})),Object.values(e).join("_")}(i)}})),function(t){var e=(0,p.wy)().isSecureCookie||(0,B.Lr)()?"Samesite=None;Secure;":"";(0,f.zG)((function(t){return(0,v.sZ)(t)}),(function(n){return n.forEach((function(n){document.cookie="".concat(t,"=-1;path=/;domain=").concat(n,";expires=Thu, 01 Jan 1970 00:00:01 GMT;").concat(e)}))}))(window.location.href)}("ABTasty"),Object.entries(r).reduce((function(t,e,n){return t+(n>0?"&":"")+e.join("=")}),"")}return null}catch(t){var i="Handle duplicated ABTasty cookies error.";return(0,g.Tb)(new Error(i)),h.error(i),null}},H=n(2242),F=n(8049),U=n(6012);!function(t){t.uid="uid",t.fst="fst",t.pst="pst",t.cst="cst",t.ns="ns",t.pvt="pvt",t.pvis="pvis",t.th="th"}(L||(L={})),function(t){t.visitorID="visitorID",t.firstSessionTimestamp="firstSessionTimestamp",t.previousSessionTimestamp="previousSessionTimestamp",t.currentSessionTimestamp="currentSessionTimestamp",t.numberOfSessions="numberOfSessions",t.pagesViewedTotal="pagesViewedTotal",t.pagesViewedInSession="pagesViewedInSession",t.testsHistory="testsHistory"}(M||(M={}));var z=function(){function t(){if((0,a.Z)(this,t),(0,c.Z)(this,"dictionary",[{key:L.uid,humanKey:M.visitorID,value:"",typeCast:function(t){return String(t)}},{key:L.fst,humanKey:M.firstSessionTimestamp,value:0,typeCast:function(t){return Number(t)}},{key:L.pst,humanKey:M.previousSessionTimestamp,value:-1,typeCast:function(t){return Number(t)}},{key:L.cst,humanKey:M.currentSessionTimestamp,value:0,typeCast:function(t){return Number(t)}},{key:L.ns,humanKey:M.numberOfSessions,value:0,typeCast:function(t){return Number(t)}},{key:L.pvt,humanKey:M.pagesViewedTotal,value:0,typeCast:function(t){return Number(t)}},{key:L.pvis,humanKey:M.pagesViewedInSession,value:0,typeCast:function(t){return Number(t)}},{key:L.th,humanKey:M.testsHistory,value:{},typeCast:this.deserializeTestsHistory}]),W)return W;var e=(0,p.wy)(),n=e.customCookieDomain,r=e.customCookiePath,i=new m.w;this.sessionCookie=i,this.name=t.getCookieName(),this.customDomain=n,this.customPath=r,window.ABTasty.clearCookie=this.clear.bind(this),window.ABTasty.clearAllCookies=this.clearAll.bind(this),W=this;var o=V(this.dictionary);(0,f.kK)(o)||d.set(this.name,o,this.getConfig())}return(0,s.Z)(t,[{key:"setUp",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=n;null!=n&&""!==n.trim()||null===(r=(new b.T).getFromLocalStorage(this.name))&&(r=d.get(this.name)),r?this.load(r):(this.assureVisitorId(),e.clear(),e.save()),t.cookieReady=!0}},{key:"syncCookieValues",value:function(t,e){if(!t||null==t)return this.setUp(e);var n=(new b.T).getFromLocalStorage(this.name);if(null===n&&(n=d.get(this.name)),!n||null===n)return this.setUp(e,t),void this.save(!0);var r=t.split("&").find((function(t){return"th"===t.split("=")[0]}));if(!r)return this.load(n);var i=r.split("=")[1],o=n.split("&").find((function(t){return"th"===t.split("=")[0]}))||"";i.split("_").map((function(t){o.indexOf(t.split(".")[0])>=0||(n=n+"_"+t)})),this.setUp(e,n),this.save(!0)}},{key:"matchUrlSettings",value:function(){return(0,p.Xx)().some((function(t){var e=t.includeOrExclude,n=t.url,r=t.method;return"exclude"!==e&&(0,v.rl)(r,n)}))}},{key:"get",value:function(t){return this.dictionary.find((function(e){return e.key===t||e.humanKey===t}))}},{key:"set",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null==n?this.get(t).value=e:this.get(t).value[n]=e}},{key:"incr",value:function(t,e){var n=this.get(t);n.value=n.value+e}},{key:"resetDictionary",value:function(){this.dictionary.forEach((function(t){t.value=t.typeCast("")}))}},{key:"load",value:function(t){var e=this;try{unescape(t).split("&").map((function(t){return t.split("=")})).map((function(t){var e=(0,o.Z)(t,2);return[e[0],e[1]]})).forEach((function(t){var n=(0,o.Z)(t,2),r=n[0],i=n[1];e.set(r,e.get(r).typeCast(decodeURI(i)))})),this.removePausedTests()}catch(t){(0,g.Tb)(new Error("Error loading the cookie. ".concat(t))),this.resetDictionary()}}},{key:"removePausedTests",value:function(){var t=this,e=(0,p.ae)();if(!e||!e.obsoletes)return[];var n=[];return Object.keys(this.get(M.testsHistory).value).forEach((function(r){e.obsoletes.includes(parseInt(r,10))&&(t.removeCampaign(r),n.push(parseInt(r,10)))})),this.save(),n}},{key:"getVisitorId",value:function(){return this.get(M.visitorID).value}},{key:"getCampaignHistory",value:function(){var t=this.getCampaigns(),e={},n=[4581,8924,47674].includes((0,p.Oy)());return Object.keys(t).filter((function(t){return n||void 0!==(0,p.ae)().tests[t]})).filter((function(e){return t[e].variationID!==F.uG.Untracked})).map((function(n){var r,i=(0,p.ae)().tests[n];return void 0!==i&&i.parentID>0&&(null===(r=(0,p.ae)().tests[i.parentID])||void 0===r?void 0:r.type)===l.dF.multipage&&(e[i.parentID]=t[n].variationID!==F.uG.Original?String(i.variations[t[n].variationID].masterVariationId):"0"),e[n]=String(t[n].variationID)})),e}},{key:"getCampaign",value:function(t){return this.get(M.testsHistory).value[t]}},{key:"getCampaigns",value:function(){return this.get(M.testsHistory).value}},{key:"setCampaign",value:function(t,e){this.set(M.testsHistory,e,t)}},{key:"removeCampaign",value:function(t){delete this.get(M.testsHistory).value[t]}},{key:"getFirstSessionTimestamp",value:function(){return this.get(M.firstSessionTimestamp).value}},{key:"getCurrentSessionTimestamp",value:function(){return this.get(M.currentSessionTimestamp).value}},{key:"getPreviousSessionTimestamp",value:function(){return this.get(M.previousSessionTimestamp).value}},{key:"getNumberOfSessions",value:function(){return this.get(M.numberOfSessions).value}},{key:"getPagesViewedInSession",value:function(){return this.get(M.pagesViewedInSession).value}},{key:"hasSeenCampaign",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=this.getCampaign(t);return!!n&&((0,f.kK)(e)?n.variationID!==F.uG.Untracked:n.variationID===e)}},{key:"isValid",value:function(t){return/^uid=.*&fst=[0-9]{13,}&pst=(-1|[0-9]{13,})&cst=[0-9]{13,}&ns=[0-9]\d*&pvt=[1-9]\d*&pvis=[1-9]\d*&th=(\d+\.(-1|\d)+\.[1-9]\d*\.[0-9]\d*\.[1-9]\d*\.[1|0]\.[0-9]{13,}\.[0-9]{13,}\.[1|0]_?)*$/.test(t)}},{key:"getConfig",value:function(){return(0,O.$)(388)}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t===I.dE||(0,f.kK)(t)&&(0,I.PM)()?(new b.T).removeLocalStorage(this.name):d.remove(this.name,this.getConfig())}},{key:"clearAll",value:function(){this.clear(),(new m.w).clear()}},{key:"encodeValue",value:function(t){return null!=t&&"object"===(0,i.Z)(t)?this.serializeTestsHistory(t):encodeURI(t)}},{key:"save",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t.cookieReady||n){var r=this.dictionary.map((function(t){return["".concat(t.key,"=").concat(e.encodeValue(t.value))]})).join("&"),i=new H.yN;if(!i.haveConsent([H.RX.storage]))return(0,f.kK)(window.ABTasty.temporaryCookieValues)&&(window.ABTasty.temporaryCookieValues={}),void(window.ABTasty.temporaryCookieValues[this.name]={value:r,config:this.getConfig()});var o=(0,I.PM)();o?(new b.T).updateLocalStorage(this.name,r):d.set(this.name,r,this.getConfig()),this.isCrossDomainUsed()&&!n&&C(r),(0,A.mW)()?o||(new b.T).updateLocalStorage(this.name,r):this.clear(o?I.VA:I.dE),(0,h.success)("Saving datas to ".concat(o?"localStorage":"cookie"),r)}}},{key:"isFirstSession",value:function(){return 0===this.get(M.numberOfSessions).value}},{key:"pageView",value:function(){var t=new m.w,e=new b.T;this.incr(M.pagesViewedTotal,1);var n=Date.now();t.isNewSession?(this.isFirstSession()?(this.set(M.firstSessionTimestamp,n),this.assureVisitorId()):this.set(M.previousSessionTimestamp,this.get(M.currentSessionTimestamp).value),this.set(M.currentSessionTimestamp,n),this.incr(M.numberOfSessions,1),this.set(M.pagesViewedInSession,1)):(this.incr(M.pagesViewedInSession,1),0===this.getFirstSessionTimestamp()&&this.set(M.firstSessionTimestamp,n),0===this.getCurrentSessionTimestamp()&&this.set(M.currentSessionTimestamp,n)),e.addVisitedPage(this)(),this.save()}},{key:"assureVisitorId",value:function(){this.getVisitorId()||this.set(M.visitorID,(0,u.generateId)())}},{key:"campaignView",value:function(t,e,n){var r=new m.w,i=this.getCampaign(t);[U.c.timeout,U.c.failedLoading].includes(n)||(i?this.setCampaign(t,{variationID:e,nbSeenTotal:i.nbSeenTotal+1,nbSeenInSession:r.isNewSession?1:i.nbSeenInSession+1,nbSessions:r.isNewSession?i.nbSessions+1:i.nbSessions,currentlyApplied:1,firstViewTimestamp:i.firstViewTimestamp,lastViewTimestamp:Date.now(),oneVisitorOneTest:1}):this.setCampaign(t,{variationID:e,nbSeenTotal:1,nbSeenInSession:1,nbSessions:1,currentlyApplied:1,firstViewTimestamp:Date.now(),lastViewTimestamp:Date.now(),oneVisitorOneTest:1})),this.save()}},{key:"serializeTestsHistory",value:function(t){return Object.keys(t).map((function(e){var n=t[e];return[e,n.variationID,n.nbSeenTotal,n.nbSeenInSession,n.nbSessions,n.currentlyApplied,n.firstViewTimestamp,n.lastViewTimestamp,n.oneVisitorOneTest]})).map((0,f.v_)(".")).join("_")}},{key:"deserializeTestsHistory",value:function(t){return t.split("_").filter((function(t){return!(0,f.xb)(t)})).map((0,f.Vl)(".")).reduce((function(t,e){return t[Number(e[0])]={variationID:Number(e[1]),nbSeenTotal:Number(e[2]),nbSeenInSession:Number(e[3]),nbSessions:Number(e[4]),currentlyApplied:Number(e[5]),firstViewTimestamp:Number(e[6]),lastViewTimestamp:Number(e[7]),oneVisitorOneTest:Number(e[8])},t}),{})}},{key:"isCrossDomainUsed",value:function(){return(0,p.Xx)().length>0&&this.matchUrlSettings()}}],[{key:"build",value:function(){var e=new t;return e.isCrossDomainUsed()?new Promise((function(t,e){k().then((function(){x({key:y,identifier:(0,p.Nn)(),method:r.get},t)}))})).then((function(t){e.syncCookieValues(t.value,e.sessionCookie)})):e.setUp(e.sessionCookie),"function"!=typeof window.ABTasty.getCampaignHistory&&(window.ABTasty.getCampaignHistory=function(){return e.getCampaignHistory()}),e}},{key:"getCookieName",value:function(){return"ABTasty"}},{key:"exists",value:function(){return!!(0,$.tK)(P.op,this.getCookieName())||!!d.get(this.getCookieName())}},{key:"resetInstance",value:function(){W=null}}]),t}()},5528:(t,e,n)=>{"use strict";n.d(e,{L:()=>r,w:()=>b});var r,i,o,a=n(885),s=n(5671),c=n(3144),l=n(4942),u=n(1918),d=n.n(u),p=n(6080),m=n(4284),h=n(1042),f=n(6044),g=n(2533),v=n(2242);!function(t){t.mrasn="mrasn",t.referrer="referrer",t.landingPage="lp",t.sen="sen"}(r||(r={}));var b=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if((0,s.Z)(this,t),(0,l.Z)(this,"dictionary",[{key:r.mrasn,value:"",typeCast:function(t){return String(t)}},{key:r.sen,value:-1,typeCast:function(t){return parseInt(t,10)}}]),this.dictionary.push({key:r.landingPage,value:window.location.href,typeCast:function(t){return String(t)}}),i&&!e)return i;var n=(0,m.wy)(),a=n.customCookieDomain,c=n.customCookiePath;this.name=t.getCookieName(),this.customDomain=a,this.customPath=c;var u=this.getCookieValue();return u?(this.isNewSession=!1,void 0===o&&(o=!1),this.load(u)):(this.isNewSession=!0,void 0===o&&(o=!0),this.setLandingPage(decodeURIComponent(window.location.href))),i=this,window.ABTasty.clearSessionCookie=this.clear.bind(this),this.save(),i}return(0,c.Z)(t,[{key:"getCookieValue",value:function(){return(new v.yN).haveConsent([v.RX.storage])||(0,p.kK)(window.ABTasty.temporaryCookieValues)||(0,p.kK)(window.ABTasty.temporaryCookieValues[this.name])?d().get(this.name):window.ABTasty.temporaryCookieValues[this.name].value}},{key:"get",value:function(t){return this.dictionary.find((function(e){return e.key===t}))}},{key:"set",value:function(t,e){this.get(t).value=e,this.save()}},{key:"incr",value:function(t,e){var n=this.get(t);n.value=n.value+e,this.save()}},{key:"resetDictionary",value:function(){this.dictionary.forEach((function(t){t.value=t.typeCast("")}))}},{key:"load",value:function(t){var e=this;try{var n=new RegExp(this.dictionary.map((function(t){return"(".concat(t.key,"=.*)")})).join("&"));t.match(n).slice(1).map((function(t,n){var r=new RegExp("(".concat(e.dictionary[n].key,")=(.*)"));return t.match(r).slice(1)})).forEach((function(t){var n=(0,a.Z)(t,2),r=n[0],i=n[1];e.set(r,e.get(r).typeCast(decodeURIComponent(i)))}))}catch(t){(0,f.Tb)(new Error("Error loading the session cookie. ".concat(t))),this.resetDictionary(),this.isNewSession=!0,void 0===o&&(o=!0)}}},{key:"save",value:function(){var t=this.dictionary.map((function(t){return["".concat(t.key,"=").concat(encodeURIComponent(t.value))]})).join("&");if(this.isValid(t)){if(!(new v.yN).haveConsent([v.RX.storage]))return(0,p.kK)(window.ABTasty.temporaryCookieValues)&&(window.ABTasty.temporaryCookieValues={}),void(window.ABTasty.temporaryCookieValues[this.name]={value:t,config:this.getConfig()});d().set(this.name,t,this.getConfig())}else(0,f.Tb)(new Error("Error saving the session cookie. Invalid cookie. Serialized: ".concat(t))),(0,h.error)("Session cookie cannot be saved, incorrect value",t)}},{key:"clear",value:function(){d().remove(this.name,this.getConfig())}},{key:"isValid",value:function(t){return!0}},{key:"getConfig",value:function(){var t=new Date((new Date).getTime()+18e5);return(0,g.$)(t)}},{key:"setMrasn",value:function(t){this.set(r.mrasn,t)}},{key:"getMrasn",value:function(){return this.get(r.mrasn).value}},{key:"setLandingPage",value:function(t){this.set(r.landingPage,t)}},{key:"getLandingPage",value:function(){return this.get(r.landingPage).value}},{key:"getReferrer",value:function(){return""}},{key:"getSen",value:function(){return this.get(r.sen).value}},{key:"isItNewSession",value:function(){return o}},{key:"incrementSen",value:function(){this.incr(r.sen,1)}}],[{key:"getCookieName",value:function(){return"ABTastySession"}}]),t}()},763:(t,e,n)=>{"use strict";n.d(e,{T:()=>p});var r=n(5671),i=n(3144),o=n(4942),a=n(6080),s=n(1155),c=n(5168),l=n(9572);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){(0,o.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var p=function(){function t(){var e=this;(0,r.Z)(this,t),(0,o.Z)(this,"addVisitedPage",(function(t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.location.href,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.title,i={url:n,visite:t.getNumberOfSessions(),time:Date.now(),title:r};e.addItemToABTastyData(l.I.VISITED_PAGES,i),(0,a.xb)(r)&&(0,s.VH)((function(){return!(0,a.xb)(document.title)}),(function(){return e.editLastVisitedPage({title:document.title})}))}}))}return(0,i.Z)(t,[{key:"getABTastyData",value:function(){return JSON.parse(this.getFromLocalStorage(l.I.LOCAL_STORAGE))||{}}},{key:"getItemFromABTastyData",value:function(t){return this.getABTastyData()[t]}},{key:"getActionTrackings",value:function(){return this.getABTastyData()&&this.getABTastyData()[l.I.ACTION_TRACKING]}},{key:"addActionTracking",value:function(t){this.addItemToABTastyData(l.I.ACTION_TRACKING,t)}},{key:"getTransactions",value:function(){return this.getABTastyData()&&this.getABTastyData()[l.I.TRANSACTION]}},{key:"addTransaction",value:function(t){this.addItemToABTastyData(l.I.TRANSACTION,t)}},{key:"getItems",value:function(){return this.getABTastyData()&&this.getABTastyData()[l.I.ITEM]}},{key:"addItem",value:function(t){this.addItemToABTastyData(l.I.ITEM,t)}},{key:"getSegments",value:function(){return this.getABTastyData()&&this.getABTastyData()[l.I.SEGMENT]}},{key:"addSegment",value:function(t){this.addItemToABTastyData(l.I.SEGMENT,t)}},{key:"setSegments",value:function(t){var e=this.getABTastyData();this.updateLocalStorage(l.I.LOCAL_STORAGE,JSON.stringify(d(d({},e),{},(0,o.Z)({},l.I.SEGMENT,t))))}},{key:"getCustomVariables",value:function(){return this.getABTastyData()&&this.getABTastyData()[l.I.CUSTOM_VARIABLE]}},{key:"addCustomVariable",value:function(t){this.addItemToABTastyData(l.I.CUSTOM_VARIABLE,t)}},{key:"getVisitedPages",value:function(){return this.getABTastyData()&&this.getABTastyData()[l.I.VISITED_PAGES]}},{key:"editLastVisitedPage",value:function(t){var e=this.getVisitedPages();if(!(0,a.xb)(e)){var n=e[e.length-1];e[e.length-1]=d(d({},n),t);var r=this.getABTastyData();this.updateLocalStorage(l.I.LOCAL_STORAGE,JSON.stringify(d(d({},r),{},(0,o.Z)({},l.I.VISITED_PAGES,e))))}}},{key:"addItemToABTastyData",value:function(t,e){var n=this.getABTastyData();n[t]&&Array.isArray(n[t])||(n[t]=[]),n[t].push(e),this.updateLocalStorage(l.I.LOCAL_STORAGE,JSON.stringify(n))}},{key:"updateLocalStorage",value:function(t,e){return c.Jo.setItem(c.op,t,e)}},{key:"getFromLocalStorage",value:function(t){return c.Jo.getItem(c.op,t)}},{key:"removeLocalStorage",value:function(t){return c.Jo.removeItem(c.op,t)}}]),t}()},9572:(t,e,n)=>{"use strict";var r,i;n.d(e,{I:()=>r,d:()=>i}),function(t){t.LOCAL_STORAGE="ABTastyData",t.ACTION_TRACKING="ActionTracking",t.CUSTOM_VARIABLE="CV",t.ITEM="items",t.SEGMENT="segments",t.TRANSACTION="transactions",t.VISITED_PAGES="VisitedPages"}(r||(r={})),function(t){t.CV="cv",t.ECO="eco"}(i||(i={}))},7787:(t,e,n)=>{"use strict";var r;n.d(e,{I:()=>r}),function(t){t.CUSTOM_IDENTITIES="ABTastyCustomIdentities",t.CUSTOM_SEGMENTS="ABTastyCustomSegments"}(r||(r={}))},5168:(t,e,n)=>{"use strict";n.d(e,{op:()=>c,vR:()=>l,Jo:()=>p});var r=n(4942),i=n(1155),o=n(4880),a=n(4284),s=n(2242),c="localStorage",l="sessionStorage";function u(){return!!(new s.yN).haveConsent([s.RX.storage])||!(!(0,a.wy)().waitForConsent||"disabled"!==(0,a.wy)().waitForConsent.mode)}function d(t){for(var e=/^(ab\s?tasty|ab-sr-.+)/i,n="",r=window[t].length-1;r>=0;r--)(n=window[t].key(r)).match(e)&&(this.data[t][n]=window[t][n],(0,i.PO)(t,n))}var p={state:{inmemory:!0},data:{localStorage:{},sessionStorage:{}},migrate:function(){var t=this;switch(u()?"browser":"memory"){case"browser":Object.keys(this.data).forEach((function(e){Object.keys(t.data[e]).forEach((function(n){(0,i.ek)(e,n,t.data[e][n])}))})),this.state.inmemory=!1;break;case"memory":d.call(this,"localStorage"),d.call(this,"sessionStorage"),this.state.inmemory=!0}},setItem:function(t,e,n){this.state.inmemory&&u()&&this.migrate(),this.state.inmemory?this.data[t]=Object.assign(this.data[t],(0,r.Z)({},e,n)):(0,i.ek)(t,e,n)},getItem:function(t,e){return this.state.inmemory&&u()&&this.migrate(),this.state.inmemory?(0,o.p)(null,[t,e],this.data):(0,i.tK)(t,e)||null},removeItem:function(t,e){this.state.inmemory&&u()&&this.migrate(),this.state.inmemory?delete this.data[t][e]:(0,i.PO)(t,e)}}},2533:(t,e,n)=>{"use strict";n.d(e,{$:()=>s,L:()=>c});var r=n(1918),i=n(2022),o=n(2084),a=n(4284);function s(t){var e=(0,a.wy)(),n=e.isSecureCookie,r=e.customCookieDomain;return{expires:t,path:e.customCookiePath||"/",domain:r||(0,o.yT)(),secure:n||(0,i.Lr)()||!1,samesite:n||(0,i.Lr)()?"none":"lax"}}function c(t,e){var n="ABTastyCookieQuickTest",i="".concat(t).concat(n),o=!1;r.set(e,i,s(388));try{o=document.cookie.indexOf(n)>-1,t&&o?r.set(e,t,s(388)):r.remove(e,s(1))}catch(t){r.remove(e,s(1))}return o}},8194:(t,e,n)=>{"use strict";n.d(e,{dE:()=>c,VA:()=>l,SD:()=>u,vs:()=>d,PM:()=>p});var r=n(1918),i=n(4284),o=n(1042),a=n(2533),s=n(5951),c="local",l="cookies";function u(){var t=r.get(s.Es.getCookieName());if((0,i.kA)()){if(t&&t.length>=3900)return(0,o.warning)("Cookies size is too big, ABTasty tag stopped execution."),!1;if(!(0,a.L)(t,s.Es.getCookieName())){var e=(0,a.$)(0),n=e.customCookieDomain,c=e.customCookiePath,l=e.domain,u=e.path,d=[n?"domain ".concat(n):null,"/"!==c?"path ".concat(c):null];return d.find((function(t){return t}))?((0,o.warning)("ABTasty data can't be saved to cookie, ABTasty tag stopped execution. A custom configuration with ".concat(d.filter((function(t){return t})).join(" and ")," is set for this account. Please check it matches the current URL.")),!1):((0,o.warning)("ABTasty data can't be saved to cookie on domain ".concat(l," and path ").concat(u,", ABTasty tag stopped execution.")),!1)}}return!0}function d(){var t=(p()&&null!=localStorage&&null!=localStorage.setItem&&null!=localStorage.getItem||(0,i.wy)().storageMode===l&&navigator.cookieEnabled)&&null!=sessionStorage&&null!=sessionStorage.setItem&&null!=sessionStorage.getItem;return t||(0,o.warning)("AB Tasty script encountered an error: LocalStorage, SessionStorage & Cache option aren't allowed on this browser. Execution has stopped."),t}function p(){return(0,i.wy)().storageMode===c}},7947:(t,e)=>{"use strict";e.s_=e.n8=void 0,function(t){t.anyCookie="any_cookie",t.customJs="custom_js",t.didomi="didomi",t.disabled="disabled",t.specificCookie="specific_cookie",t.thirdParty="third_party",t.userAction="user_action"}(e.n8||(e.n8={})),function(t){t[t.test=1]="test",t[t.perso=2]="perso",t[t.redirection=4]="redirection",t[t.aa=8]="aa",t[t.patch=16]="patch"}(e.s_||(e.s_={}))},7319:(t,e)=>{"use strict";e.$f=e._8=e.CJ=e.BH=e.o1=e.DC=e.xz=void 0,e.xz=1,e.DC=10,e.o1=11,e.BH=40,e.CJ=50,function(t){t[t.LOYAL=1]="LOYAL",t[t.VALUABLE=2]="VALUABLE",t[t.WANDERERS=3]="WANDERERS",t[t.DISENGAGED=4]="DISENGAGED"}(e._8||(e._8={})),function(t){t[t.LAST_WEEK=1]="LAST_WEEK",t[t.LAST_TWO_WEEKS=2]="LAST_TWO_WEEKS"}(e.$f||(e.$f={}))},2662:(t,e,n)=>{"use strict";var r,i,o,a;n.d(e,{dF:()=>r,Cd:()=>a}),function(t){t.ab="ab",t.multipage="multipage",t.multivariate="multivariate",t.mastersegment="mastersegment",t.subsegment="subsegment"}(r||(r={})),function(t){t.simplePersonalization="sp",t.multipagePersonalization="mpp",t.multiexperiencePersonalization="mep"}(i||(i={})),function(t){t.aaTest="aa",t.redirection="redirection",t.patch="patch"}(o||(o={})),function(t){t.fastest="fastest",t.waitUntil="waituntil"}(a||(a={}))},5666:t=>{var e=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,o=Object.create(i.prototype),a=new A(r||[]);return o._invoke=function(t,e,n){var r=d;return function(i,o){if(r===m)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw o;return $()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=C(a,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=m;var c=u(t,e,n);if("normal"===c.type){if(r=n.done?h:p,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}(t,n,a),o}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",f={};function g(){}function v(){}function b(){}var y={};c(y,o,(function(){return this}));var w=Object.getPrototypeOf,_=w&&w(w(I([])));_&&_!==n&&r.call(_,o)&&(y=_);var S=b.prototype=g.prototype=Object.create(y);function T(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function n(i,o,a,s){var c=u(t[i],t,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==typeof d&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function C(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method))return f;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var i=u(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,f;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,f):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function I(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:$}}function $(){return{value:e,done:!0}}return v.prototype=b,c(S,"constructor",b),c(b,"constructor",v),v.displayName=c(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,s,"GeneratorFunction")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},T(k.prototype),c(k.prototype,a,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new k(l(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},T(S),c(S,s,"Generator"),c(S,o,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=I,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),f}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},7013:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deleteEvents=e.setEvents=e.setModificationDuringClick=e.isModificationDuringClick=e.isClickInProgress=void 0;var r=n(4679),i=n(6698),o=!1,a=!1,s=(e.isClickInProgress=function(){return o},e.isModificationDuringClick=function(){return a},e.setModificationDuringClick=function(t){a=t}),c=function(){o=!1,a&&((0,r.getWindow)().requestAnimationFrame(i.startLoop),s(!1))},l=function(t){var e=t.type;o=!0,"mouseup"===e&&setTimeout((function(){return o&&c()}),16)},u={passive:!0,capture:!0},d={mousedown:l,mouseup:l,click:function(){return setTimeout(c,0)}},p=Object.keys(d);e.setEvents=function(){p.forEach((function(t){document.addEventListener(t,d[t],u)}))},e.deleteEvents=function(){p.forEach((function(t){document.removeEventListener(t,d[t],u)}))}},6734:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rerun=e.simpleRollbackAndStop=e.stop=e.start=e.rollbackAndRun=e.addModification=e.rollback=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2192)),i=n(7093),o=n(7013),a=n(6698),s=n(4679);var c=!1,l=["checked","class","disabled","form","hidden","href","icon","id","label","max","min","maxLength","minLength","method","name","novalidate","placeholder","readonly","rel","required","selected","size","span","src","target","title","type","value"],u=function(t){if(t&&t.length){var e=(0,a.getModifiedElements)();if(!t.some((function(t){var n=t.addedNodes,i=t.removedNodes,o=t.target,s=t.type,c=t.attributeName,l=t.oldValue,u=[],d=!0;return u=n.length?n:i.length?i:[o],"attributes"===s&&l===o.getAttribute(c)&&(d=!1),d&&(0,a.modificationIsChildOf)([].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,r.default)(t)}(u)),e)})))return}c&&((0,o.isClickInProgress)()&&(0,o.setModificationDuringClick)(!0),(0,a.run)())};(0,i.createObserver)(u);var d=function t(){(0,s.getDocument)()?((0,i.getObserver)().observe((0,s.getDocument)(),{attributes:!0,childList:!0,characterData:!0,subtree:!0,attributeFilter:l}),(0,o.setEvents)()):(0,s.getWindow)().setTimeout(t,50)},p=(e.rollback=function(){(0,a.clean)()},e.addModification=function(t){t&&((0,a.add)(t),u())}),m=(e.rollbackAndRun=function(t){(0,a.clean)(),p(t)},e.start=function(t,e){e&&(0,s.setDocument)(e),c||(c=!0,d()),p(t)}),h=e.stop=function(){c=!1,(0,i.getObserver)().disconnect(),(0,o.deleteEvents)()};e.simpleRollbackAndStop=function(){h(),(0,a.partialClean)()},e.rerun=function(){m(),(0,a.run)()}},6698:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.modificationIsChildOf=e.getModifiedElements=e.run=e.startLoop=e.clean=e.partialClean=e.rollback=e.add=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2192)),i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=n(4679),a=n(7093),s=n(7013),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(8842));function l(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,r.default)(t)}var u=[],d=!1,p={applied:[],operation:null},m=(e.add=function(t){var e;Array.isArray(t)&&t.length?(e=u).push.apply(e,l(t.map((function(t){return i({},p,{operation:t})})))):u.push(i({},p,{operation:t}))},e.rollback=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];u.slice().reverse().forEach((function(e){e.applied&&e.applied.forEach((function(e){e.rollbacks.forEach((function(e){null!=e&&e(t)}))}))}))}),h=e.partialClean=function(){m(),d=!1},f=(e.clean=function(){h(),u.length=0},e.startLoop=function(){d=!1,m(!1),g()}),g=function(){u=u.map((function(t){var e=t.applied,n=t.operation,r=n.type;return c[r]&&"function"!=typeof value?{operation:n,applied:c[r](n,e)}:t})),(0,a.getObserver)().takeRecords()},v=(e.run=function(){var t=(0,s.isClickInProgress)();d||t?(0,s.setModificationDuringClick)(!0):(d=!0,(0,o.getWindow)().requestAnimationFrame(f))},function t(e,n){return e&&"BODY"!==e.tagName?e===n||t(e.parentNode,n):e===n});e.getModifiedElements=function(){return u.map((function(t){return(0,o.qsa)(t.operation.selector)}))},e.modificationIsChildOf=function(t,e){return e.reduce((function(t,e){return e?(t.push.apply(t,l(e)),t):t}),[]).some((function(e){return!!e&&t.some((function(t){return v(e,t)||v(t,e)}))}))}},7093:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=void 0;e.createObserver=function(t){n=new MutationObserver(t)},e.getObserver=function(){return n}},8741:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.createAppliedModification=function(){return{rollbacks:[],target:null,elements:{},savedState:null}}},4679:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=void 0,i=function(t,e){return function(){t.removeAttribute("data-ab-tasty-moved"),e.parentNode&&(e.parentNode.insertBefore(t,e),e.remove())}},o=(e.setDocument=function(t){r=t},e.getWindow=function(){return n.g||window}),a=e.getDocument=function(){return r||o().document},s=e.setData=function(t,e,n){var r=t;r.dataset?r.dataset[e]=n:r.setAttribute(e,n)},c=e.getData=function(t,e){return t.dataset?t.dataset[e]:t.getAttribute(e)},l=e.addChildNode=function(t,e){return t.appendChild(e),function(){if(t.contains(e))try{t.removeChild(e)}catch(t){console.warn("The modification isn't correct. Please contact AB Tasty support team! \n "+t)}}},u=e.addSiblingNode=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&e&&t.parentNode&&!t.parentNode.contains(e)){var r=t.parentNode;return n?r.insertBefore(e,t.nextSibling):r.insertBefore(e,t),function(){if(r.contains(e))try{r.removeChild(e)}catch(t){console.warn("The modification isn't correct. Please contact AB Tasty support team! \n "+t)}}}};e.removeNode=function(t){var e=t,n=!1,r=null,i=void 0;if(e&&e.parentNode&&(e.nodeType===Node.TEXT_NODE||!e.style||"none"!==e.style.display))return e.nodeType===Node.TEXT_NODE?(n=!0,r=e.textContent,e.textContent=""):(i=o().getComputedStyle(e).display,e.style.setProperty("display","none","important")),function(){e.parentNode&&(n?e.textContent=r:(e.style.display=i,e.attributes.style&&""===e.attributes.style.value&&e.removeAttribute("style")))}},e.moveChildNode=function(t,e){var n=t,r=n.parentNode;if(!e||!n||c(n,"abTastyMoved"))return null;var o=n.cloneNode(!0);return o.style.display="none",o.id="",o.className="",s(o,"abTastyMoved",1),s(n,"abTastyMoved",1),r.replaceChild(o,n),l(e,n),i(n,o)},e.moveSiblingNode=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t,o=r.parentNode;if(!e||!r||c(r,"abTastyMoved"))return null;var a=r.cloneNode(!0);return a.style.display="none",s(a,"abTastyMoved",1),s(r,"abTastyMoved",1),o.replaceChild(a,r),u(e,r,n),i(r,a)},e.isEqualNode=function(t,e){return t&&e&&(t.isEqualNode(e)||t.nodeType!==Node.TEXT_NODE&&t.tagName===e.tagName&&t.innerHTML===e.innerHTML)},e.qsa=function(t){try{var e=a();if(/^(#?[\w-]+|\.[\w-.]+)$/.test(t))switch(t.charAt(0)){case"#":return[e.getElementById(t.substr(1))].filter((function(t){return null!=t}));case".":var n=t.substr(1).replace(/\./g," ");return[].slice.call(e.getElementsByClassName(n)).filter((function(t){return null!=t}));default:return[].slice.call(e.getElementsByTagName(t)).filter((function(t){return null!=t}))}return[].slice.call(e.querySelectorAll(t))}catch(t){return[]}},e.setAttribute=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"edit",i=t.getAttribute(e);return"edit"===r?t.setAttribute(e,n):t.removeAttribute(e),function(){null==i?t.removeAttribute(e):t.setAttribute(e,i)}},e.isEqualLink=function(t,e){return t.nodeType!==Node.TEXT_NODE&&t.tagName===e.tagName&&c(t,"abTastyLink")===c(e,"abTastyLink")&&t.href===e.href},e.setNodeStyle=function(t,e,n){var r=t,i=r.style[e];return r.style[e]=n,function(){r.parentNode&&(r.style[e]=i)}}},8842:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1882);Object.defineProperty(e,"editStyleCSS",{enumerable:!0,get:function(){return x(r).default}});var i=n(3023);Object.defineProperty(e,"editText",{enumerable:!0,get:function(){return x(i).default}}),Object.defineProperty(e,"editDirect",{enumerable:!0,get:function(){return x(i).default}});var o=n(8230);Object.defineProperty(e,"hide",{enumerable:!0,get:function(){return x(o).default}}),Object.defineProperty(e,"hideCSS",{enumerable:!0,get:function(){return x(o).default}}),Object.defineProperty(e,"hideByClassCSS",{enumerable:!0,get:function(){return x(o).default}});var a=n(1887);Object.defineProperty(e,"hideContent",{enumerable:!0,get:function(){return x(a).default}});var s=n(8e3);Object.defineProperty(e,"editHtml",{enumerable:!0,get:function(){return x(s).default}}),Object.defineProperty(e,"editHTML",{enumerable:!0,get:function(){return x(s).default}});var c=n(2859);Object.defineProperty(e,"addHtml",{enumerable:!0,get:function(){return x(c).default}}),Object.defineProperty(e,"addHTML",{enumerable:!0,get:function(){return x(c).default}});var l=n(2141);Object.defineProperty(e,"sort",{enumerable:!0,get:function(){return x(l).default}});var u=n(5870);Object.defineProperty(e,"copy",{enumerable:!0,get:function(){return x(u).default}});var d=n(6775);Object.defineProperty(e,"copyAfter",{enumerable:!0,get:function(){return x(d).default}});var p=n(5107);Object.defineProperty(e,"copyBefore",{enumerable:!0,get:function(){return x(p).default}});var m=n(8442);Object.defineProperty(e,"addImage",{enumerable:!0,get:function(){return x(m).default}});var h=n(54);Object.defineProperty(e,"cut",{enumerable:!0,get:function(){return x(h).default}});var f=n(9329);Object.defineProperty(e,"cutAfter",{enumerable:!0,get:function(){return x(f).default}}),Object.defineProperty(e,"advancedSort",{enumerable:!0,get:function(){return x(f).default}});var g=n(7500);Object.defineProperty(e,"cutBefore",{enumerable:!0,get:function(){return x(g).default}});var v=n(4578);Object.defineProperty(e,"addParagraph",{enumerable:!0,get:function(){return x(v).default}});var b=n(8285);Object.defineProperty(e,"editAttributes",{enumerable:!0,get:function(){return x(b).default}});var y=n(8846);Object.defineProperty(e,"editPicture",{enumerable:!0,get:function(){return x(y).default}});var w=n(2078);Object.defineProperty(e,"changeImage",{enumerable:!0,get:function(){return x(w).default}});var _=n(2586);Object.defineProperty(e,"changeLink",{enumerable:!0,get:function(){return x(_).default}});var S=n(9813);Object.defineProperty(e,"addLink",{enumerable:!0,get:function(){return x(S).default}});var T=n(3180);Object.defineProperty(e,"bring2back",{enumerable:!0,get:function(){return x(T).default}});var k=n(4789);Object.defineProperty(e,"bring2front",{enumerable:!0,get:function(){return x(k).default}});var C=n(9407);function x(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"addCSS",{enumerable:!0,get:function(){return x(C).default}})},9407:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2192));e.default=function(t,e){var n='<style type="text/css">'+t.value+"</style>",r=(0,o.qsa)("head");return r.length?[].concat(a(r)).map((function(t){var r=e.find((function(e){return e.target===t}));if(r)return r;var s=(0,i.createAppliedModification)(),c=t.cloneNode(!0),l=(0,o.getDocument)().createElement("div");l.innerHTML=n;var u=[].concat(a(l.childNodes));if(u.forEach((function(t){return(0,o.addChildNode)(c,t)})),(0,o.isEqualNode)(s.savedState,c))s.elements.children.forEach((function(e){return(0,o.addChildNode)(t,e)}));else{var d=u.map((function(e){return(0,o.addChildNode)(t,e)}));s.rollbacks=[function(t){t&&d.forEach((function(e){null!=e&&e(t)}))}],s.target=t,s.elements.children=u,s.savedState=t.cloneNode(!0)}return s})):[]};var i=n(8741),o=n(4679);function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,r.default)(t)}},2859:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2192));e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.selector,n=t.value,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)return[];var s=(0,o.qsa)(e);if(!s.length)return[];var c=[].concat(a(s)).map((function(t){var e=r.filter((function(e){return e.target===t}))[0]||(0,i.createAppliedModification)(),s=t.cloneNode(!0),c=(0,o.getDocument)().createElement("div");c.innerHTML=n;var l=[].concat(a(c.childNodes));return l.forEach((function(t){return(0,o.addChildNode)(s,t)})),(0,o.isEqualNode)(e.savedState,s)?e.elements.children.forEach((function(e){return(0,o.addChildNode)(t,e)})):(e.rollbacks=l.map((function(e){return(0,o.addChildNode)(t,e)})),e.target=t,e.elements.children=l,e.savedState=t.cloneNode(!0)),e}));return c};var i=n(8741),o=n(4679);function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,r.default)(t)}},8442:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t)return[];var n="<img src="+t.value+" />";return(0,i.default)(r({},t,{value:n}),e)};var i=function(t){return t&&t.__esModule?t:{default:t}}(n(2859))},9813:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2192));e.default=function(t){var e=t.selector,n=t.value,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)return[];var c=(0,o.qsa)(e);if(!c.length)return[];var l=[].concat(a(c)).map((function(t){var e=r.filter((function(e){return e.target===t}))[0]||(0,i.createAppliedModification)(),c=t.parentNode.cloneNode(!0),l=[].concat(a(t.parentNode.childNodes)).indexOf(t),u=c.childNodes[l],d=s(n);return(0,o.addSiblingNode)(u,d),(0,o.moveChildNode)(u,d),(0,o.isEqualNode)(e.savedState,c)?((0,o.addSiblingNode)(t,e.elements.link),(0,o.moveChildNode)(t,e.elements.link)):(d=s(n),e.rollbacks=[(0,o.addSiblingNode)(t,d),(0,o.moveChildNode)(t,d)],e.target=t,e.elements.link=d,e.savedState=t.parentNode.cloneNode(!0)),e}));return l};var i=n(8741),o=n(4679);function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,r.default)(t)}var s=function(t){var e=(0,o.getDocument)().createElement("a");return e.href=t.url,e.target=t.target||"_self",(0,o.setData)(e,"abTastyLink",1),e}},4578:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t)return[];var n="<p>"+t.value+"</p>";return(0,i.default)(r({},t,{value:n}),e)};var i=function(t){return t&&t.__esModule?t:{default:t}}(n(2859))},3180:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2192));e.default=function(t){var e=t.selector;if(!e)return[];var n=(0,o.qsa)(e);return n.length?[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,r.default)(t)}(n)).map((function(t){var e=(0,i.createAppliedModification)(),n=t,r=parseInt((0,o.getWindow)().getComputedStyle(t).zIndex,10),a=isNaN(r)?-1:r-1;return e.rollbacks.push((0,o.setNodeStyle)(n,"zIndex",a)),(0,o.getWindow)().getComputedStyle(n).position.match(/absolute|relative|fixed/)||e.rollbacks.push((0,o.setNodeStyle)(t,"position","relative")),e})):[]};var i=n(8741),o=n(4679)},4789:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2192));e.default=function(t){var e=t.selector;if(!e)return[];var n=(0,o.qsa)(e);return n.length?[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,r.default)(t)}(n)).map((function(t){var e=(0,i.createAppliedModification)(),n=t,r=parseInt((0,o.getWindow)().getComputedStyle(t).zIndex,10),a=isNaN(r)?9999999:r+1;return e.rollbacks.push((0,o.setNodeStyle)(n,"zIndex",a)),(0,o.getWindow)().getComputedStyle(n).position.match(/absolute|relative|fixed/)||e.rollbacks.push((0,o.setNodeStyle)(t,"position","relative")),e})):[]};var i=n(8741),o=n(4679)},2078:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.selector,n=t.value;return e&&n?(0,r.default)({selector:e,value:[{attributeName:"src",attributeValue:n}]}):[]};var r=function(t){return t&&t.__esModule?t:{default:t}}(n(8285))},2586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.selector,n=t.value,i=n.url,o=n.target;return(0,r.default)({selector:e,value:[{attributeName:"href",attributeValue:i},{attributeName:"target",attributeValue:o}]})};var r=function(t){return t&&t.__esModule?t:{default:t}}(n(8285))},5870:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.selector,n=t.value,o=(0,i.qsa)(e),a=(0,i.qsa)(n);if(!o.length||!a.length)return[];var s=o[0],c=a[0],l=s.cloneNode(!0);l.id="";var u=(0,r.createAppliedModification)();return u.rollbacks.push((0,i.addChildNode)(c,l)),[u]};var r=n(8741),i=n(4679)},6775:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.selector,n=t.value,o=(0,i.qsa)(e),a=(0,i.qsa)(n);if(!o.length||!a.length)return[];var s=o[0],c=a[0],l=s.cloneNode(!0);l.id="";var u=(0,r.createAppliedModification)();return u.rollbacks.push((0,i.addSiblingNode)(c,l)),[u]};var r=n(8741),i=n(4679)},5107:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.selector,n=t.value,o=(0,i.qsa)(e),a=(0,i.qsa)(n);if(!o.length||!a.length)return[];var s=o[0],c=a[0],l=s.cloneNode(!0);l.id="";var u=(0,r.createAppliedModification)();return u.rollbacks.push((0,i.addSiblingNode)(c,l,!1)),[u]};var r=n(8741),i=n(4679)},54:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.selector,n=t.value,o=(0,i.qsa)(e),a=(0,i.qsa)(n);if(!o.length||!a.length)return[];var s=o[0],c=a[0];s.cloneNode(!0).id="";var l=(0,r.createAppliedModification)();return l.rollbacks.push((0,i.moveChildNode)(s,c)),[l]};var r=n(8741),i=n(4679)},9329:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.selector,n=t.value,o=(0,i.qsa)(e),a=(0,i.qsa)(n);if(!o.length||!a.length)return[];var s=o[0],c=a[0];s.cloneNode(!0).id="";var l=(0,r.createAppliedModification)();return l.rollbacks.push((0,i.moveSiblingNode)(s,c)),[l]};var r=n(8741),i=n(4679)},7500:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.selector,n=t.value,o=(0,i.qsa)(e),a=(0,i.qsa)(n);if(!o.length||!a.length)return[];var s=o[0],c=a[0],l=s.cloneNode(!0);l.id="";var u=(0,r.createAppliedModification)();return u.rollbacks.push((0,i.moveSiblingNode)(s,c,!1)),[u]};var r=n(8741),i=n(4679)},8285:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2192));e.default=function(t){var e=t.selector,n=t.value;if(!e)return[];var a=(0,o.qsa)(e);return a.length?[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,r.default)(t)}(a)).map((function(t){var e=(0,i.createAppliedModification)();return n.forEach((function(n){var r=n.action,i=n.attributeName,a=n.attributeValue;"string"==typeof i&&(null!=t.getAttribute(i)&&t.getAttribute(i)===a||e.rollbacks.push((0,o.setAttribute)(t,i,a,r)))})),e})):[]};var i=n(8741),o=n(4679)},8e3:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2192));e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.selector,n=t.value,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)return[];var s=(0,o.qsa)(e);if(!s.length)return[];var c=[].concat(a(s)).map((function(t){var e=r.filter((function(e){return e.target===t}))[0]||(0,i.createAppliedModification)(),s=t.parentNode.cloneNode(!0),c=[].concat(a(t.parentNode.childNodes)).indexOf(t),l=s.childNodes[c],u=(0,o.getDocument)().createElement("div");u.innerHTML=n;var d=[].concat(a(u.childNodes));return d.forEach((function(t){return(0,o.addSiblingNode)(l,t)})),(0,o.removeNode)(l),(0,o.isEqualNode)(e.savedState,s)?(e.elements.children.forEach((function(e){return(0,o.addSiblingNode)(t,e)})),(0,o.removeNode)(t)):(e.rollbacks=[].concat(a(d.map((function(e){return(0,o.addSiblingNode)(t,e)}))),[(0,o.removeNode)(t)]),e.target=t,e.elements.children=d,e.savedState=t.cloneNode(!0)),e}));return c};var i=n(8741),o=n(4679);function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,r.default)(t)}},8846:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2192));e.default=function(t){var e=t.selector,n=t.value;if(!e)return[];var a=(0,o.qsa)(e);return a.length?[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,r.default)(t)}(a)).map((function(t){var e=(0,i.createAppliedModification)(),r=t.getAttribute("srcset");switch(n.type){case"picture":n.values.forEach((function(n){var i=n.attribute,a=n.srcset,s=function(t){if(t.startsWith("image/"))return'source[type="'+t+'"]';return'source[media="'+t+'"]'}(i),c=t.parentElement.querySelector(s);(r=c&&c.getAttribute("srcset"))&&r!==a&&e.rollbacks.push((0,o.setAttribute)(c,"srcset",a),(0,o.setAttribute)(c,"data-ab-original-srcset",r))}));break;case"img":null!=r&&r===n.srcset||e.rollbacks.push((0,o.setAttribute)(t,"srcset",n.srcset),(0,o.setAttribute)(t,"data-ab-original-srcset",r))}return e})):[]};var i=n(8741),o=n(4679)},1882:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=function(t,e){if(!t.selector||!t.value)return[];if(-1===t.selector.indexOf(":nth-child")){var n='<style type="text/css">'+s(t.selector,t.value)+"</style>";return(0,i.default)(r({},t,{selector:"head",value:n}),e)}l[t.selector]||(l[t.selector]=c,c+=1),(0,o.default)(r({},t,{value:[{attributeName:"data-ab-id",attributeValue:l[t.selector]}]}));var a='[data-ab-id="'+l[t.selector]+'"]',u='<style type="text/css">'+s(a,t.value)+"</style>";return(0,i.default)(r({},t,{selector:"head",value:u}),e)};var i=a(n(2859)),o=a(n(8285));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(t,e){return t+" {"+Object.keys(e).reduce((function(t,n){return""+t+n+":"+e[n]+";"}),"")+"}"},c=0,l={}},3023:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2192));e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.selector,n=t.value,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)return[];var s=(0,o.qsa)(e);if(!s.length)return[];var c=[].concat(a(s)).map((function(t){var e,s=r.filter((function(e){return e.target===t}))[0]||(0,i.createAppliedModification)(),c=[].concat(a(t.childNodes));if(s.rollbacks=[],c.forEach((function(t){if(t.nodeType===Node.TEXT_NODE||t.style&&"none"!==t.style.display){var e=(0,o.removeNode)(t);e&&s.rollbacks.push(e)}})),!s.elements||!s.elements.children){var l=(0,o.getDocument)().createElement("div");l.innerHTML=n,s.elements={children:[].concat(a(l.childNodes))}}var u=s.elements.children.map((function(e){return(0,o.addChildNode)(t,e)}));return(e=s.rollbacks).push.apply(e,a(u)),s}));return c};var i=n(8741),o=n(4679);function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,r.default)(t)}},8230:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.selector;return(0,r.default)({selector:e,value:{display:"none !important"}})};var r=function(t){return t&&t.__esModule?t:{default:t}}(n(1882))},1887:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.selector;return(0,r.default)({selector:e+" *",value:{visibility:"hidden"}})};var r=function(t){return t&&t.__esModule?t:{default:t}}(n(1882))},2141:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2192));e.default=function(t){var e=t.selector,n=t.value;if(!e)return[];var r=(0,o.qsa)(e);if(!r.length)return[];var s=[].concat(a(r)).map((function(t){var e=(0,i.createAppliedModification)(),r=[].concat(a(t.children)).filter((function(t){return"SCRIPT"!==t.tagName})),s=[].concat(a(t.children)),c=s.length;return n.length!==r.length||n.filter((function(t){return t>c-1})).length>0||s.some((function(t){return(0,o.getData)(t,"abTastySorted")}))||(s.forEach((function(e){t.removeChild(e)})),n.forEach((function(e){t.appendChild(s[e]),(0,o.setData)(s[e],"abTastySorted",1)})),e.rollbacks.push((function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];!t&&s.some((function(t){return(0,o.getData)(t,"abTastySorted")}))||s.forEach((function(t){t.removeAttribute("data-ab-tasty-sorted");var e=t.parentNode;e&&(e.removeChild(t),e.appendChild(t))}))}))),e}));return s};var i=n(8741),o=n(4679);function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,r.default)(t)}},2192:(t,e,n)=>{t.exports="function"==typeof Array.from?Array.from:n(3976)},3976:t=>{t.exports=function(){var t=function(t){return"function"==typeof t},e=Math.pow(2,53)-1,n=function(t){var n=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e}(t);return Math.min(Math.max(n,0),e)},r=function(t){if(null!=t){if(["string","number","boolean","symbol"].indexOf(typeof t)>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in t)return Symbol.iterator;if("@@iterator"in t)return"@@iterator"}},i=function(e,n){if(null!=e&&null!=n){var r=e[n];if(null==r)return;if(!t(r))throw new TypeError(r+" is not a function");return r}},o=function(t){var e=t.next();return!Boolean(e.done)&&e};return function(e){"use strict";var a,s,c,l=this,u=arguments.length>1?arguments[1]:void 0;if(void 0!==u){if(!t(u))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(a=arguments[2])}var d=i(e,r(e));if(void 0!==d){s=t(l)?Object(new l):[];var p,m,h=d.call(e);if(null==h)throw new TypeError("Array.from requires an array-like or iterable object");for(c=0;;){if(!(p=o(h)))return s.length=c,s;m=p.value,s[c]=u?u.call(a,m,c):m,c++}}else{var f=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var g,v=n(f.length);for(s=t(l)?Object(new l(v)):new Array(v),c=0;c<v;)g=f[c],s[c]=u?u.call(a,g,c):g,c++;s.length=v}return s}}()},8695:(t,e)=>{"use strict";var n=function(t,e){return e||(e={}),t.split("").forEach((function(t,n){t in e||(e[t]=n)})),e},r={alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",charmap:{0:14,1:8}};r.charmap=n(r.alphabet,r.charmap);var i={alphabet:"0123456789ABCDEFGHJKMNPQRSTVWXYZ",charmap:{O:0,I:1,L:1}};function o(t){if(this.buf=[],this.shift=8,this.carry=0,t){switch(t.type){case"rfc4648":this.charmap=e.rfc4648.charmap;break;case"crockford":this.charmap=e.crockford.charmap;break;default:throw new Error("invalid type")}t.charmap&&(this.charmap=t.charmap)}}function a(t){if(this.buf="",this.shift=3,this.carry=0,t){switch(t.type){case"rfc4648":this.alphabet=e.rfc4648.alphabet;break;case"crockford":this.alphabet=e.crockford.alphabet;break;default:throw new Error("invalid type")}t.alphabet?this.alphabet=t.alphabet:t.lc&&(this.alphabet=this.alphabet.toLowerCase())}}i.charmap=n(i.alphabet,i.charmap),o.prototype.charmap=r.charmap,o.prototype.write=function(t){var e=this.charmap,n=this.buf,r=this.shift,i=this.carry;return t.toUpperCase().split("").forEach((function(t){if("="!=t){var o=255&e[t];(r-=5)>0?i|=o<<r:r<0?(n.push(i|o>>-r),i=o<<(r+=8)&255):(n.push(i|o),r=8,i=0)}})),this.shift=r,this.carry=i,this},o.prototype.finalize=function(t){return t&&this.write(t),8!==this.shift&&0!==this.carry&&(this.buf.push(this.carry),this.shift=8,this.carry=0),this.buf},a.prototype.alphabet=r.alphabet,a.prototype.write=function(t){var e,n,r,i=this.shift,o=this.carry;for(r=0;r<t.length;r++)e=o|(n=t[r])>>i,this.buf+=this.alphabet[31&e],i>5&&(e=n>>(i-=5),this.buf+=this.alphabet[31&e]),o=n<<(i=5-i),i=8-i;return this.shift=i,this.carry=o,this},a.prototype.finalize=function(t){return t&&this.write(t),3!==this.shift&&(this.buf+=this.alphabet[31&this.carry],this.shift=3,this.carry=0),this.buf},e.encode=function(t,e){return new a(e).finalize(t)},e.decode=function(t,e){return new o(e).finalize(t)},e.Decoder=o,e.Encoder=a,e.charmap=n,e.crockford=i,e.rfc4648=r},1918:(t,e,n)=>{var r,i;!function(o){if(void 0===(i="function"==typeof(r=o)?r.call(e,n,e,t):r)||(t.exports=i),!0,t.exports=o(),!!0){var a=window.Cookies,s=window.Cookies=o();s.noConflict=function(){return window.Cookies=a,s}}}((function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function e(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function o(e,n,o){if("undefined"!=typeof document){"number"==typeof(o=t({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(t){}n=r.write?r.write(n,e):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in o)o[c]&&(s+="; "+c,!0!==o[c]&&(s+="="+o[c].split(";")[0]));return document.cookie=e+"="+n+s}}function a(t,n){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],a=0;a<o.length;a++){var s=o[a].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var l=e(s[0]);if(c=(r.read||r)(c,l)||e(c),n)try{c=JSON.parse(c)}catch(t){}if(i[l]=c,t===l)break}catch(t){}}return t?i[t]:i}}return i.set=o,i.get=function(t){return a(t,!1)},i.getJSON=function(t){return a(t,!0)},i.remove=function(e,n){o(e,"",t(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))}))},6488:t=>{"use strict";var e=[0,7,14,9,28,27,18,21,56,63,54,49,36,35,42,45,112,119,126,121,108,107,98,101,72,79,70,65,84,83,90,93,224,231,238,233,252,251,242,245,216,223,214,209,196,195,202,205,144,151,158,153,140,139,130,133,168,175,166,161,180,179,186,189,199,192,201,206,219,220,213,210,255,248,241,246,227,228,237,234,183,176,185,190,171,172,165,162,143,136,129,134,147,148,157,154,39,32,41,46,59,60,53,50,31,24,17,22,3,4,13,10,87,80,89,94,75,76,69,66,111,104,97,102,115,116,125,122,137,142,135,128,149,146,155,156,177,182,191,184,173,170,163,164,249,254,247,240,229,226,235,236,193,198,207,200,221,218,211,212,105,110,103,96,117,114,123,124,81,86,95,88,77,74,67,68,25,30,23,16,5,2,11,12,33,38,47,40,61,58,51,52,78,73,64,71,82,85,92,91,118,113,120,127,106,109,100,99,62,57,48,55,34,37,44,43,6,1,8,15,26,29,20,19,174,169,160,167,178,181,188,187,150,145,152,159,138,141,132,131,222,217,208,215,194,197,204,203,230,225,232,239,250,253,244,243];t.exports=function(t,n,r){var i;for(n||(n=0),null==r&&(r=t.length),i=0;i<r;i++)n=255&e[255&(n^t[i])];return n}},4386:(t,e,n)=>{"use strict";var r=n(8695),i=n(6488);e.generateId=function(){var t=e.randomBytes(9);return e._encode(t)},e.validate=function(t){e._decode(t)},e.normalize=function(t){var n=e._decode(t),r=n.length-1;return e._encode(n.slice(0,r),n[r])},e.randomBytes=function(t){var e=[];if(t>0)for(;t-- >0;)e.push(~~(256*Math.random()));return e},e._encode=function(t,e){var n=new r.Encoder({type:"crockford",lc:!0});e=e||i(t);return n.write(t).finalize([e])},e._decode=function(t){var e=r.decode(t,{type:"crockford"}),n=e.length-1;if(i(e,0,n)!==e[n])throw new Error("invalid id");return e}},907:(t,e,n)=>{"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,{Z:()=>r})},5861:(t,e,n)=>{"use strict";function r(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,c,"next",t)}function c(t){r(a,i,o,s,c,"throw",t)}s(void 0)}))}}n.d(e,{Z:()=>i})},5671:(t,e,n)=>{"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,{Z:()=>r})},3144:(t,e,n)=>{"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}n.d(e,{Z:()=>i})},4942:(t,e,n)=>{"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{Z:()=>r})},4925:(t,e,n)=>{"use strict";function r(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}n.d(e,{Z:()=>r})},885:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var r=n(181);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||(0,r.Z)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2982:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=n(907);var i=n(181);function o(t){return function(t){if(Array.isArray(t))return(0,r.Z)(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||(0,i.Z)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},1002:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}n.d(e,{Z:()=>r})},181:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var r=n(907);function i(t,e){if(t){if("string"==typeof t)return(0,r.Z)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(t,e):void 0}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.m=t,(()=>{var t=[];n.O=(e,r,i,o)=>{if(!r){var a=1/0;for(u=0;u<t.length;u++){for(var[r,i,o]=t[u],s=!0,c=0;c<r.length;c++)(!1&o||a>=o)&&Object.keys(n.O).every((t=>n.O[t](r[c])))?r.splice(c--,1):(s=!1,o<a&&(a=o));if(s){t.splice(u--,1);var l=i();void 0!==l&&(e=l)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[r,i,o]}})(),n.F={},n.E=t=>{Object.keys(n.F).map((e=>{n.F[e](t)}))},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,r)=>(n.f[r](t,e),e)),[])),n.u=t=>{if(142===t)return"shared/analytics.9b88f3e28f8a23ecec21.js"},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={},e="tag:";n.l=(r,i,o,a)=>{if(t[r])t[r].push(i);else{var s,c;if(void 0!==o)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==e+o){s=d;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",e+o),s.src=r),t[r]=[i];var p=(e,n)=>{s.onerror=s.onload=null,clearTimeout(m);var i=t[r];if(delete t[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((t=>t(n))),e)return e(n)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),c&&document.head.appendChild(s)}}})(),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{var t={826:0};n.f.j=(e,r)=>{var i=n.o(t,e)?t[e]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise(((n,r)=>i=t[e]=[n,r]));r.push(i[2]=o);var a=n.p+n.u(e),s=new Error;n.l(a,(r=>{if(n.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}}),"chunk-"+e,e)}},n.F.j=e=>{if(!n.o(t,e)||void 0===t[e]){t[e]=null;var r=document.createElement("link");n.nc&&r.setAttribute("nonce",n.nc),r.rel="prefetch",r.as="script",r.href=n.p+n.u(e),document.head.appendChild(r)}},n.O.j=e=>0===t[e];var e=(e,r)=>{var i,o,[a,s,c]=r,l=0;if(a.some((e=>0!==t[e]))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(c)var u=c(n)}for(e&&e(r);l<a.length;l++)o=a[l],n.o(t,o)&&t[o]&&t[o][0](),t[a[l]]=0;return n.O(u)},r=self.webpackChunktag=self.webpackChunktag||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})(),n.O(0,[826],(()=>{n.E(142)}),5);var r={};Promise.resolve().then(n.bind(n,3422)).then((function(t){return t.mainTag()})),r=n.O(r)})();